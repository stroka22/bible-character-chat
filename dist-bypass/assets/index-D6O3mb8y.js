(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var uS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function jA(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),n}var qp={exports:{}},Ll={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cS;function Tj(){if(cS)return Ll;cS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:s,key:c,ref:a!==void 0?a:null,props:l}}return Ll.Fragment=e,Ll.jsx=n,Ll.jsxs=n,Ll}var hS;function Ej(){return hS||(hS=1,qp.exports=Tj()),qp.exports}var T=Ej(),Hp={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dS;function Aj(){if(dS)return Ue;dS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=y&&N[y]||N["@@iterator"],typeof N=="function"?N:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function w(N,J,he){this.props=N,this.context=J,this.refs=A,this.updater=he||b}w.prototype.isReactComponent={},w.prototype.setState=function(N,J){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,J,"setState")},w.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function _(){}_.prototype=w.prototype;function x(N,J,he){this.props=N,this.context=J,this.refs=A,this.updater=he||b}var P=x.prototype=new _;P.constructor=x,S(P,w.prototype),P.isPureReactComponent=!0;var O=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function j(N,J,he,ue,Z,le){return he=le.ref,{$$typeof:t,type:N,key:J,ref:he!==void 0?he:null,props:le}}function $(N,J){return j(N.type,J,void 0,void 0,void 0,N.props)}function z(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function B(N){var J={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(he){return J[he]})}var te=/\/+/g;function Q(N,J){return typeof N=="object"&&N!==null&&N.key!=null?B(""+N.key):J.toString(36)}function se(){}function ae(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(se,se):(N.status="pending",N.then(function(J){N.status==="pending"&&(N.status="fulfilled",N.value=J)},function(J){N.status==="pending"&&(N.status="rejected",N.reason=J)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function pe(N,J,he,ue,Z){var le=typeof N;(le==="undefined"||le==="boolean")&&(N=null);var me=!1;if(N===null)me=!0;else switch(le){case"bigint":case"string":case"number":me=!0;break;case"object":switch(N.$$typeof){case t:case e:me=!0;break;case p:return me=N._init,pe(me(N._payload),J,he,ue,Z)}}if(me)return Z=Z(N),me=ue===""?"."+Q(N,0):ue,O(Z)?(he="",me!=null&&(he=me.replace(te,"$&/")+"/"),pe(Z,J,he,"",function(ve){return ve})):Z!=null&&(z(Z)&&(Z=$(Z,he+(Z.key==null||N&&N.key===Z.key?"":(""+Z.key).replace(te,"$&/")+"/")+me)),J.push(Z)),1;me=0;var Ie=ue===""?".":ue+":";if(O(N))for(var ee=0;ee<N.length;ee++)ue=N[ee],le=Ie+Q(ue,ee),me+=pe(ue,J,he,le,Z);else if(ee=v(N),typeof ee=="function")for(N=ee.call(N),ee=0;!(ue=N.next()).done;)ue=ue.value,le=Ie+Q(ue,ee++),me+=pe(ue,J,he,le,Z);else if(le==="object"){if(typeof N.then=="function")return pe(ae(N),J,he,ue,Z);throw J=String(N),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return me}function V(N,J,he){if(N==null)return N;var ue=[],Z=0;return pe(N,ue,"","",function(le){return J.call(he,le,Z++)}),ue}function ne(N){if(N._status===-1){var J=N._result;J=J(),J.then(function(he){(N._status===0||N._status===-1)&&(N._status=1,N._result=he)},function(he){(N._status===0||N._status===-1)&&(N._status=2,N._result=he)}),N._status===-1&&(N._status=0,N._result=J)}if(N._status===1)return N._result.default;throw N._result}var K=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function fe(){}return Ue.Children={map:V,forEach:function(N,J,he){V(N,function(){J.apply(this,arguments)},he)},count:function(N){var J=0;return V(N,function(){J++}),J},toArray:function(N){return V(N,function(J){return J})||[]},only:function(N){if(!z(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ue.Component=w,Ue.Fragment=n,Ue.Profiler=a,Ue.PureComponent=x,Ue.StrictMode=s,Ue.Suspense=d,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(N){return R.H.useMemoCache(N)}},Ue.cache=function(N){return function(){return N.apply(null,arguments)}},Ue.cloneElement=function(N,J,he){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ue=S({},N.props),Z=N.key,le=void 0;if(J!=null)for(me in J.ref!==void 0&&(le=void 0),J.key!==void 0&&(Z=""+J.key),J)!M.call(J,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&J.ref===void 0||(ue[me]=J[me]);var me=arguments.length-2;if(me===1)ue.children=he;else if(1<me){for(var Ie=Array(me),ee=0;ee<me;ee++)Ie[ee]=arguments[ee+2];ue.children=Ie}return j(N.type,Z,void 0,void 0,le,ue)},Ue.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},Ue.createElement=function(N,J,he){var ue,Z={},le=null;if(J!=null)for(ue in J.key!==void 0&&(le=""+J.key),J)M.call(J,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Z[ue]=J[ue]);var me=arguments.length-2;if(me===1)Z.children=he;else if(1<me){for(var Ie=Array(me),ee=0;ee<me;ee++)Ie[ee]=arguments[ee+2];Z.children=Ie}if(N&&N.defaultProps)for(ue in me=N.defaultProps,me)Z[ue]===void 0&&(Z[ue]=me[ue]);return j(N,le,void 0,void 0,null,Z)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(N){return{$$typeof:h,render:N}},Ue.isValidElement=z,Ue.lazy=function(N){return{$$typeof:p,_payload:{_status:-1,_result:N},_init:ne}},Ue.memo=function(N,J){return{$$typeof:f,type:N,compare:J===void 0?null:J}},Ue.startTransition=function(N){var J=R.T,he={};R.T=he;try{var ue=N(),Z=R.S;Z!==null&&Z(he,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(fe,K)}catch(le){K(le)}finally{R.T=J}},Ue.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ue.use=function(N){return R.H.use(N)},Ue.useActionState=function(N,J,he){return R.H.useActionState(N,J,he)},Ue.useCallback=function(N,J){return R.H.useCallback(N,J)},Ue.useContext=function(N){return R.H.useContext(N)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(N,J){return R.H.useDeferredValue(N,J)},Ue.useEffect=function(N,J,he){var ue=R.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(N,J)},Ue.useId=function(){return R.H.useId()},Ue.useImperativeHandle=function(N,J,he){return R.H.useImperativeHandle(N,J,he)},Ue.useInsertionEffect=function(N,J){return R.H.useInsertionEffect(N,J)},Ue.useLayoutEffect=function(N,J){return R.H.useLayoutEffect(N,J)},Ue.useMemo=function(N,J){return R.H.useMemo(N,J)},Ue.useOptimistic=function(N,J){return R.H.useOptimistic(N,J)},Ue.useReducer=function(N,J,he){return R.H.useReducer(N,J,he)},Ue.useRef=function(N){return R.H.useRef(N)},Ue.useState=function(N){return R.H.useState(N)},Ue.useSyncExternalStore=function(N,J,he){return R.H.useSyncExternalStore(N,J,he)},Ue.useTransition=function(){return R.H.useTransition()},Ue.version="19.1.0",Ue}var fS;function qv(){return fS||(fS=1,Hp.exports=Aj()),Hp.exports}var k=qv();const Pe=zv(k);var Vp={exports:{}},$l={},Gp={exports:{}},Fp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mS;function Pj(){return mS||(mS=1,function(t){function e(V,ne){var K=V.length;V.push(ne);e:for(;0<K;){var fe=K-1>>>1,N=V[fe];if(0<a(N,ne))V[fe]=ne,V[K]=N,K=fe;else break e}}function n(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var ne=V[0],K=V.pop();if(K!==ne){V[0]=K;e:for(var fe=0,N=V.length,J=N>>>1;fe<J;){var he=2*(fe+1)-1,ue=V[he],Z=he+1,le=V[Z];if(0>a(ue,K))Z<N&&0>a(le,ue)?(V[fe]=le,V[Z]=K,fe=Z):(V[fe]=ue,V[he]=K,fe=he);else if(Z<N&&0>a(le,K))V[fe]=le,V[Z]=K,fe=Z;else break e}}return ne}function a(V,ne){var K=V.sortIndex-ne.sortIndex;return K!==0?K:V.id-ne.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var d=[],f=[],p=1,y=null,v=3,b=!1,S=!1,A=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function O(V){for(var ne=n(f);ne!==null;){if(ne.callback===null)s(f);else if(ne.startTime<=V)s(f),ne.sortIndex=ne.expirationTime,e(d,ne);else break;ne=n(f)}}function R(V){if(A=!1,O(V),!S)if(n(d)!==null)S=!0,M||(M=!0,Q());else{var ne=n(f);ne!==null&&pe(R,ne.startTime-V)}}var M=!1,j=-1,$=5,z=-1;function B(){return w?!0:!(t.unstable_now()-z<$)}function te(){if(w=!1,M){var V=t.unstable_now();z=V;var ne=!0;try{e:{S=!1,A&&(A=!1,x(j),j=-1),b=!0;var K=v;try{t:{for(O(V),y=n(d);y!==null&&!(y.expirationTime>V&&B());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,v=y.priorityLevel;var N=fe(y.expirationTime<=V);if(V=t.unstable_now(),typeof N=="function"){y.callback=N,O(V),ne=!0;break t}y===n(d)&&s(d),O(V)}else s(d);y=n(d)}if(y!==null)ne=!0;else{var J=n(f);J!==null&&pe(R,J.startTime-V),ne=!1}}break e}finally{y=null,v=K,b=!1}ne=void 0}}finally{ne?Q():M=!1}}}var Q;if(typeof P=="function")Q=function(){P(te)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ae=se.port2;se.port1.onmessage=te,Q=function(){ae.postMessage(null)}}else Q=function(){_(te,0)};function pe(V,ne){j=_(function(){V(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(V){switch(v){case 1:case 2:case 3:var ne=3;break;default:ne=v}var K=v;v=ne;try{return V()}finally{v=K}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(V,ne){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var K=v;v=V;try{return ne()}finally{v=K}},t.unstable_scheduleCallback=function(V,ne,K){var fe=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?fe+K:fe):K=fe,V){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=K+N,V={id:p++,callback:ne,priorityLevel:V,startTime:K,expirationTime:N,sortIndex:-1},K>fe?(V.sortIndex=K,e(f,V),n(d)===null&&V===n(f)&&(A?(x(j),j=-1):A=!0,pe(R,K-fe))):(V.sortIndex=N,e(d,V),S||b||(S=!0,M||(M=!0,Q()))),V},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(V){var ne=v;return function(){var K=v;v=ne;try{return V.apply(this,arguments)}finally{v=K}}}}(Fp)),Fp}var pS;function Cj(){return pS||(pS=1,Gp.exports=Pj()),Gp.exports}var Kp={exports:{}},gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gS;function Rj(){if(gS)return gn;gS=1;var t=qv();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,gn.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return l(d,f,null,p)},gn.flushSync=function(d){var f=c.T,p=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=f,s.p=p,s.d.f()}},gn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},gn.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},gn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,y=h(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:b}):p==="script"&&s.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},gn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=h(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},gn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=h(p,f.crossOrigin);s.d.L(d,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},gn.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=h(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},gn.requestFormReset=function(d){s.d.r(d)},gn.unstable_batchedUpdates=function(d,f){return d(f)},gn.useFormState=function(d,f,p){return c.H.useFormState(d,f,p)},gn.useFormStatus=function(){return c.H.useHostTransitionStatus()},gn.version="19.1.0",gn}var yS;function DA(){if(yS)return Kp.exports;yS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Kp.exports=Rj(),Kp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vS;function Oj(){if(vS)return $l;vS=1;var t=Cj(),e=qv(),n=DA();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function h(r){if(l(r)!==r)throw Error(s(188))}function d(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var o=r,u=i;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return h(m),r;if(g===u)return h(m),i;g=g.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=g;else{for(var E=!1,C=m.child;C;){if(C===o){E=!0,o=m,u=g;break}if(C===u){E=!0,u=m,o=g;break}C=C.sibling}if(!E){for(C=g.child;C;){if(C===o){E=!0,o=g,u=m;break}if(C===u){E=!0,u=g,o=m;break}C=C.sibling}if(!E)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:i}function f(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=f(r),i!==null)return i;r=r.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),P=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function Q(r){return r===null||typeof r!="object"?null:(r=te&&r[te]||r["@@iterator"],typeof r=="function"?r:null)}var se=Symbol.for("react.client.reference");function ae(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===se?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case w:return"Profiler";case A:return"StrictMode";case R:return"Suspense";case M:return"SuspenseList";case z:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case b:return"Portal";case P:return(r.displayName||"Context")+".Provider";case x:return(r._context.displayName||"Context")+".Consumer";case O:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case j:return i=r.displayName||null,i!==null?i:ae(r.type)||"Memo";case $:i=r._payload,r=r._init;try{return ae(r(i))}catch{}}return null}var pe=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},fe=[],N=-1;function J(r){return{current:r}}function he(r){0>N||(r.current=fe[N],fe[N]=null,N--)}function ue(r,i){N++,fe[N]=r.current,r.current=i}var Z=J(null),le=J(null),me=J(null),Ie=J(null);function ee(r,i){switch(ue(me,i),ue(le,r),ue(Z,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?$1(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=$1(i),r=I1(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}he(Z),ue(Z,r)}function ve(){he(Z),he(le),he(me)}function we(r){r.memoizedState!==null&&ue(Ie,r);var i=Z.current,o=I1(i,r.type);i!==o&&(ue(le,r),ue(Z,o))}function Ne(r){le.current===r&&(he(Z),he(le)),Ie.current===r&&(he(Ie),Ml._currentValue=K)}var Te=Object.prototype.hasOwnProperty,Ze=t.unstable_scheduleCallback,mt=t.unstable_cancelCallback,kt=t.unstable_shouldYield,St=t.unstable_requestPaint,Ye=t.unstable_now,xt=t.unstable_getCurrentPriorityLevel,_n=t.unstable_ImmediatePriority,fn=t.unstable_UserBlockingPriority,It=t.unstable_NormalPriority,mr=t.unstable_LowPriority,Cn=t.unstable_IdlePriority,Sn=t.log,pr=t.unstable_setDisableYieldValue,Or=null,Vt=null;function $n(r){if(typeof Sn=="function"&&pr(r),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(Or,r)}catch{}}var Ct=Math.clz32?Math.clz32:Bo,xi=Math.log,Ti=Math.LN2;function Bo(r){return r>>>=0,r===0?32:31-(xi(r)/Ti|0)|0}var da=256,Os=4194304;function Qn(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function G(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var m=0,g=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~g,u!==0?m=Qn(u):(E&=C,E!==0?m=Qn(E):o||(o=C&~r,o!==0&&(m=Qn(o))))):(C=u&~g,C!==0?m=Qn(C):E!==0?m=Qn(E):o||(o=u&~r,o!==0&&(m=Qn(o)))),m===0?0:i!==0&&i!==m&&(i&g)===0&&(g=m&-m,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:m}function X(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Qe(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nt(){var r=da;return da<<=1,(da&4194048)===0&&(da=256),r}function at(){var r=Os;return Os<<=1,(Os&62914560)===0&&(Os=4194304),r}function Le(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function Rn(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function es(r,i,o,u,m,g){var E=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var C=r.entanglements,L=r.expirationTimes,H=r.hiddenUpdates;for(o=E&~o;0<o;){var re=31-Ct(o),oe=1<<re;C[re]=0,L[re]=-1;var F=H[re];if(F!==null)for(H[re]=null,re=0;re<F.length;re++){var Y=F[re];Y!==null&&(Y.lane&=-536870913)}o&=~oe}u!==0&&mn(r,u,0),g!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=g&~(E&~i))}function mn(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Ct(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function gr(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Ct(o),m=1<<u;m&i|r[u]&i&&(r[u]|=i),o&=~m}}function Ei(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Mr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function On(){var r=ne.p;return r!==0?r:(r=window.event,r===void 0?32:rS(r.type))}function gc(r,i){var o=ne.p;try{return ne.p=r,i()}finally{ne.p=o}}var yr=Math.random().toString(36).slice(2),Gt="__reactFiber$"+yr,Ut="__reactProps$"+yr,jr="__reactContainer$"+yr,Ms="__reactEvents$"+yr,zo="__reactListeners$"+yr,qo="__reactHandles$"+yr,Ho="__reactResources$"+yr,js="__reactMarker$"+yr;function Ai(r){delete r[Gt],delete r[Ut],delete r[Ms],delete r[zo],delete r[qo]}function ts(r){var i=r[Gt];if(i)return i;for(var o=r.parentNode;o;){if(i=o[jr]||o[Gt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=q1(r);r!==null;){if(o=r[Gt])return o;r=q1(r)}return i}r=o,o=r.parentNode}return null}function Dr(r){if(r=r[Gt]||r[jr]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function Ds(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function ks(r){var i=r[Ho];return i||(i=r[Ho]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Rt(r){r[js]=!0}var ns=new Set,Pi={};function rs(r,i){ss(r,i),ss(r+"Capture",i)}function ss(r,i){for(Pi[r]=i,r=0;r<i.length;r++)ns.add(i[r])}var g2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cb={},Rb={};function y2(r){return Te.call(Rb,r)?!0:Te.call(Cb,r)?!1:g2.test(r)?Rb[r]=!0:(Cb[r]=!0,!1)}function yc(r,i,o){if(y2(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function vc(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function is(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}var Lf,Ob;function fa(r){if(Lf===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Lf=i&&i[1]||"",Ob=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lf+r+Ob}var $f=!1;function If(r,i){if(!r||$f)return"";$f=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Y){var F=Y}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(Y){F=Y}r.call(oe.prototype)}}else{try{throw Error()}catch(Y){F=Y}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Y){if(Y&&F&&typeof Y.stack=="string")return[Y.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],C=g[1];if(E&&C){var L=E.split(`
`),H=C.split(`
`);for(m=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;m<H.length&&!H[m].includes("DetermineComponentFrameRoot");)m++;if(u===L.length||m===H.length)for(u=L.length-1,m=H.length-1;1<=u&&0<=m&&L[u]!==H[m];)m--;for(;1<=u&&0<=m;u--,m--)if(L[u]!==H[m]){if(u!==1||m!==1)do if(u--,m--,0>m||L[u]!==H[m]){var re=`
`+L[u].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=u&&0<=m);break}}}finally{$f=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?fa(o):""}function v2(r){switch(r.tag){case 26:case 27:case 5:return fa(r.type);case 16:return fa("Lazy");case 13:return fa("Suspense");case 19:return fa("SuspenseList");case 0:case 15:return If(r.type,!1);case 11:return If(r.type.render,!1);case 1:return If(r.type,!0);case 31:return fa("Activity");default:return""}}function Mb(r){try{var i="";do i+=v2(r),r=r.return;while(r);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Jn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function jb(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function b2(r){var i=jb(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),u=""+r[i];if(!r.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,g=o.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return m.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(r,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function bc(r){r._valueTracker||(r._valueTracker=b2(r))}function Db(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=jb(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function wc(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var w2=/[\n"\\]/g;function Zn(r){return r.replace(w2,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Uf(r,i,o,u,m,g,E,C){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),i!=null?E==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Jn(i)):r.value!==""+Jn(i)&&(r.value=""+Jn(i)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),i!=null?Bf(r,E,Jn(i)):o!=null?Bf(r,E,Jn(o)):u!=null&&r.removeAttribute("value"),m==null&&g!=null&&(r.defaultChecked=!!g),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+Jn(C):r.removeAttribute("name")}function kb(r,i,o,u,m,g,E,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;o=o!=null?""+Jn(o):"",i=i!=null?""+Jn(i):o,C||i===r.value||(r.value=i),r.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E)}function Bf(r,i,o){i==="number"&&wc(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function ma(r,i,o,u){if(r=r.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<r.length;o++)m=i.hasOwnProperty("$"+r[o].value),r[o].selected!==m&&(r[o].selected=m),m&&u&&(r[o].defaultSelected=!0)}else{for(o=""+Jn(o),i=null,m=0;m<r.length;m++){if(r[m].value===o){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}i!==null||r[m].disabled||(i=r[m])}i!==null&&(i.selected=!0)}}function Nb(r,i,o){if(i!=null&&(i=""+Jn(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+Jn(o):""}function Lb(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(pe(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Jn(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function pa(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var _2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $b(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||_2.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function Ib(r,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&o[m]!==u&&$b(r,m,u)}else for(var g in i)i.hasOwnProperty(g)&&$b(r,g,i[g])}function zf(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var S2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),x2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _c(r){return x2.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var qf=null;function Hf(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ga=null,ya=null;function Ub(r){var i=Dr(r);if(i&&(r=i.stateNode)){var o=r[Ut]||null;e:switch(r=i.stateNode,i.type){case"input":if(Uf(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Zn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var m=u[Ut]||null;if(!m)throw Error(s(90));Uf(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&Db(u)}break e;case"textarea":Nb(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&ma(r,!!o.multiple,i,!1)}}}var Vf=!1;function Bb(r,i,o){if(Vf)return r(i,o);Vf=!0;try{var u=r(i);return u}finally{if(Vf=!1,(ga!==null||ya!==null)&&(ah(),ga&&(i=ga,r=ya,ya=ga=null,Ub(i),r)))for(i=0;i<r.length;i++)Ub(r[i])}}function Vo(r,i){var o=r.stateNode;if(o===null)return null;var u=o[Ut]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gf=!1;if(as)try{var Go={};Object.defineProperty(Go,"passive",{get:function(){Gf=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{Gf=!1}var Ns=null,Ff=null,Sc=null;function zb(){if(Sc)return Sc;var r,i=Ff,o=i.length,u,m="value"in Ns?Ns.value:Ns.textContent,g=m.length;for(r=0;r<o&&i[r]===m[r];r++);var E=o-r;for(u=1;u<=E&&i[o-u]===m[g-u];u++);return Sc=m.slice(r,1<u?1-u:void 0)}function xc(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Tc(){return!0}function qb(){return!1}function Mn(r){function i(o,u,m,g,E){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(o=r[C],this[C]=o?o(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Tc:qb,this.isPropagationStopped=qb,this}return p(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Tc)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Tc)},persist:function(){},isPersistent:Tc}),i}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ec=Mn(Ci),Fo=p({},Ci,{view:0,detail:0}),T2=Mn(Fo),Kf,Yf,Ko,Ac=p({},Fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wf,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ko&&(Ko&&r.type==="mousemove"?(Kf=r.screenX-Ko.screenX,Yf=r.screenY-Ko.screenY):Yf=Kf=0,Ko=r),Kf)},movementY:function(r){return"movementY"in r?r.movementY:Yf}}),Hb=Mn(Ac),E2=p({},Ac,{dataTransfer:0}),A2=Mn(E2),P2=p({},Fo,{relatedTarget:0}),Xf=Mn(P2),C2=p({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),R2=Mn(C2),O2=p({},Ci,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),M2=Mn(O2),j2=p({},Ci,{data:0}),Vb=Mn(j2),D2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L2(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=N2[r])?!!i[r]:!1}function Wf(){return L2}var $2=p({},Fo,{key:function(r){if(r.key){var i=D2[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=xc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?k2[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wf,charCode:function(r){return r.type==="keypress"?xc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?xc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),I2=Mn($2),U2=p({},Ac,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gb=Mn(U2),B2=p({},Fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wf}),z2=Mn(B2),q2=p({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),H2=Mn(q2),V2=p({},Ac,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),G2=Mn(V2),F2=p({},Ci,{newState:0,oldState:0}),K2=Mn(F2),Y2=[9,13,27,32],Qf=as&&"CompositionEvent"in window,Yo=null;as&&"documentMode"in document&&(Yo=document.documentMode);var X2=as&&"TextEvent"in window&&!Yo,Fb=as&&(!Qf||Yo&&8<Yo&&11>=Yo),Kb=" ",Yb=!1;function Xb(r,i){switch(r){case"keyup":return Y2.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wb(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var va=!1;function W2(r,i){switch(r){case"compositionend":return Wb(i);case"keypress":return i.which!==32?null:(Yb=!0,Kb);case"textInput":return r=i.data,r===Kb&&Yb?null:r;default:return null}}function Q2(r,i){if(va)return r==="compositionend"||!Qf&&Xb(r,i)?(r=zb(),Sc=Ff=Ns=null,va=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Fb&&i.locale!=="ko"?null:i.data;default:return null}}var J2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qb(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!J2[r.type]:i==="textarea"}function Jb(r,i,o,u){ga?ya?ya.push(u):ya=[u]:ga=u,i=dh(i,"onChange"),0<i.length&&(o=new Ec("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var Xo=null,Wo=null;function Z2(r){j1(r,0)}function Pc(r){var i=Ds(r);if(Db(i))return r}function Zb(r,i){if(r==="change")return i}var ew=!1;if(as){var Jf;if(as){var Zf="oninput"in document;if(!Zf){var tw=document.createElement("div");tw.setAttribute("oninput","return;"),Zf=typeof tw.oninput=="function"}Jf=Zf}else Jf=!1;ew=Jf&&(!document.documentMode||9<document.documentMode)}function nw(){Xo&&(Xo.detachEvent("onpropertychange",rw),Wo=Xo=null)}function rw(r){if(r.propertyName==="value"&&Pc(Wo)){var i=[];Jb(i,Wo,r,Hf(r)),Bb(Z2,i)}}function eM(r,i,o){r==="focusin"?(nw(),Xo=i,Wo=o,Xo.attachEvent("onpropertychange",rw)):r==="focusout"&&nw()}function tM(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Pc(Wo)}function nM(r,i){if(r==="click")return Pc(i)}function rM(r,i){if(r==="input"||r==="change")return Pc(i)}function sM(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var In=typeof Object.is=="function"?Object.is:sM;function Qo(r,i){if(In(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Te.call(i,m)||!In(r[m],i[m]))return!1}return!0}function sw(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function iw(r,i){var o=sw(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=sw(o)}}function aw(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?aw(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function ow(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=wc(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=wc(r.document)}return i}function em(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var iM=as&&"documentMode"in document&&11>=document.documentMode,ba=null,tm=null,Jo=null,nm=!1;function lw(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;nm||ba==null||ba!==wc(u)||(u=ba,"selectionStart"in u&&em(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Jo&&Qo(Jo,u)||(Jo=u,u=dh(tm,"onSelect"),0<u.length&&(i=new Ec("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=ba)))}function Ri(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var wa={animationend:Ri("Animation","AnimationEnd"),animationiteration:Ri("Animation","AnimationIteration"),animationstart:Ri("Animation","AnimationStart"),transitionrun:Ri("Transition","TransitionRun"),transitionstart:Ri("Transition","TransitionStart"),transitioncancel:Ri("Transition","TransitionCancel"),transitionend:Ri("Transition","TransitionEnd")},rm={},uw={};as&&(uw=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function Oi(r){if(rm[r])return rm[r];if(!wa[r])return r;var i=wa[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in uw)return rm[r]=i[o];return r}var cw=Oi("animationend"),hw=Oi("animationiteration"),dw=Oi("animationstart"),aM=Oi("transitionrun"),oM=Oi("transitionstart"),lM=Oi("transitioncancel"),fw=Oi("transitionend"),mw=new Map,sm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sm.push("scrollEnd");function vr(r,i){mw.set(r,i),rs(i,[r])}var pw=new WeakMap;function er(r,i){if(typeof r=="object"&&r!==null){var o=pw.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Mb(i)},pw.set(r,i),i)}return{value:r,source:i,stack:Mb(i)}}var tr=[],_a=0,im=0;function Cc(){for(var r=_a,i=im=_a=0;i<r;){var o=tr[i];tr[i++]=null;var u=tr[i];tr[i++]=null;var m=tr[i];tr[i++]=null;var g=tr[i];if(tr[i++]=null,u!==null&&m!==null){var E=u.pending;E===null?m.next=m:(m.next=E.next,E.next=m),u.pending=m}g!==0&&gw(o,m,g)}}function Rc(r,i,o,u){tr[_a++]=r,tr[_a++]=i,tr[_a++]=o,tr[_a++]=u,im|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function am(r,i,o,u){return Rc(r,i,o,u),Oc(r)}function Sa(r,i){return Rc(r,null,null,i),Oc(r)}function gw(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var m=!1,g=r.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(m=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,m&&i!==null&&(m=31-Ct(o),r=g.hiddenUpdates,u=r[m],u===null?r[m]=[i]:u.push(i),i.lane=o|536870912),g):null}function Oc(r){if(50<xl)throw xl=0,dp=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var xa={};function uM(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(r,i,o,u){return new uM(r,i,o,u)}function om(r){return r=r.prototype,!(!r||!r.isReactComponent)}function os(r,i){var o=r.alternate;return o===null?(o=Un(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function yw(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Mc(r,i,o,u,m,g){var E=0;if(u=r,typeof r=="function")om(r)&&(E=1);else if(typeof r=="string")E=hj(r,o,Z.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case z:return r=Un(31,o,i,m),r.elementType=z,r.lanes=g,r;case S:return Mi(o.children,m,g,i);case A:E=8,m|=24;break;case w:return r=Un(12,o,i,m|2),r.elementType=w,r.lanes=g,r;case R:return r=Un(13,o,i,m),r.elementType=R,r.lanes=g,r;case M:return r=Un(19,o,i,m),r.elementType=M,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case _:case P:E=10;break e;case x:E=9;break e;case O:E=11;break e;case j:E=14;break e;case $:E=16,u=null;break e}E=29,o=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=Un(E,o,i,m),i.elementType=r,i.type=u,i.lanes=g,i}function Mi(r,i,o,u){return r=Un(7,r,u,i),r.lanes=o,r}function lm(r,i,o){return r=Un(6,r,null,i),r.lanes=o,r}function um(r,i,o){return i=Un(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Ta=[],Ea=0,jc=null,Dc=0,nr=[],rr=0,ji=null,ls=1,us="";function Di(r,i){Ta[Ea++]=Dc,Ta[Ea++]=jc,jc=r,Dc=i}function vw(r,i,o){nr[rr++]=ls,nr[rr++]=us,nr[rr++]=ji,ji=r;var u=ls;r=us;var m=32-Ct(u)-1;u&=~(1<<m),o+=1;var g=32-Ct(i)+m;if(30<g){var E=m-m%5;g=(u&(1<<E)-1).toString(32),u>>=E,m-=E,ls=1<<32-Ct(i)+m|o<<m|u,us=g+r}else ls=1<<g|o<<m|u,us=r}function cm(r){r.return!==null&&(Di(r,1),vw(r,1,0))}function hm(r){for(;r===jc;)jc=Ta[--Ea],Ta[Ea]=null,Dc=Ta[--Ea],Ta[Ea]=null;for(;r===ji;)ji=nr[--rr],nr[rr]=null,us=nr[--rr],nr[rr]=null,ls=nr[--rr],nr[rr]=null}var xn=null,Ot=null,et=!1,ki=null,kr=!1,dm=Error(s(519));function Ni(r){var i=Error(s(418,""));throw tl(er(i,r)),dm}function bw(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[Gt]=r,i[Ut]=u,o){case"dialog":Ge("cancel",i),Ge("close",i);break;case"iframe":case"object":case"embed":Ge("load",i);break;case"video":case"audio":for(o=0;o<El.length;o++)Ge(El[o],i);break;case"source":Ge("error",i);break;case"img":case"image":case"link":Ge("error",i),Ge("load",i);break;case"details":Ge("toggle",i);break;case"input":Ge("invalid",i),kb(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),bc(i);break;case"select":Ge("invalid",i);break;case"textarea":Ge("invalid",i),Lb(i,u.value,u.defaultValue,u.children),bc(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||L1(i.textContent,o)?(u.popover!=null&&(Ge("beforetoggle",i),Ge("toggle",i)),u.onScroll!=null&&Ge("scroll",i),u.onScrollEnd!=null&&Ge("scrollend",i),u.onClick!=null&&(i.onclick=fh),i=!0):i=!1,i||Ni(r)}function ww(r){for(xn=r.return;xn;)switch(xn.tag){case 5:case 13:kr=!1;return;case 27:case 3:kr=!0;return;default:xn=xn.return}}function Zo(r){if(r!==xn)return!1;if(!et)return ww(r),et=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Cp(r.type,r.memoizedProps)),o=!o),o&&Ot&&Ni(r),ww(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(i===0){Ot=wr(r.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;r=r.nextSibling}Ot=null}}else i===27?(i=Ot,Qs(r.type)?(r=jp,jp=null,Ot=r):Ot=i):Ot=xn?wr(r.stateNode.nextSibling):null;return!0}function el(){Ot=xn=null,et=!1}function _w(){var r=ki;return r!==null&&(kn===null?kn=r:kn.push.apply(kn,r),ki=null),r}function tl(r){ki===null?ki=[r]:ki.push(r)}var fm=J(null),Li=null,cs=null;function Ls(r,i,o){ue(fm,i._currentValue),i._currentValue=o}function hs(r){r._currentValue=fm.current,he(fm)}function mm(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function pm(r,i,o,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var g=m.dependencies;if(g!==null){var E=m.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=m;for(var L=0;L<i.length;L++)if(C.context===i[L]){g.lanes|=o,C=g.alternate,C!==null&&(C.lanes|=o),mm(g.return,o,r),u||(E=null);break e}g=C.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(s(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),mm(E,o,r),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===r){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function nl(r,i,o,u){r=null;for(var m=i,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var C=m.type;In(m.pendingProps.value,E.value)||(r!==null?r.push(C):r=[C])}}else if(m===Ie.current){if(E=m.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Ml):r=[Ml])}m=m.return}r!==null&&pm(i,r,o,u),i.flags|=262144}function kc(r){for(r=r.firstContext;r!==null;){if(!In(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function $i(r){Li=r,cs=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function pn(r){return Sw(Li,r)}function Nc(r,i){return Li===null&&$i(r),Sw(r,i)}function Sw(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},cs===null){if(r===null)throw Error(s(308));cs=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else cs=cs.next=i;return o}var cM=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},hM=t.unstable_scheduleCallback,dM=t.unstable_NormalPriority,Ft={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gm(){return{controller:new cM,data:new Map,refCount:0}}function rl(r){r.refCount--,r.refCount===0&&hM(dM,function(){r.controller.abort()})}var sl=null,ym=0,Aa=0,Pa=null;function fM(r,i){if(sl===null){var o=sl=[];ym=0,Aa=bp(),Pa={status:"pending",value:void 0,then:function(u){o.push(u)}}}return ym++,i.then(xw,xw),i}function xw(){if(--ym===0&&sl!==null){Pa!==null&&(Pa.status="fulfilled");var r=sl;sl=null,Aa=0,Pa=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function mM(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var Tw=V.S;V.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&fM(r,i),Tw!==null&&Tw(r,i)};var Ii=J(null);function vm(){var r=Ii.current;return r!==null?r:pt.pooledCache}function Lc(r,i){i===null?ue(Ii,Ii.current):ue(Ii,i.pool)}function Ew(){var r=vm();return r===null?null:{parent:Ft._currentValue,pool:r}}var il=Error(s(460)),Aw=Error(s(474)),$c=Error(s(542)),bm={then:function(){}};function Pw(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Ic(){}function Cw(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(Ic,Ic),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Ow(r),r;default:if(typeof i.status=="string")i.then(Ic,Ic);else{if(r=pt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Ow(r),r}throw al=i,il}}var al=null;function Rw(){if(al===null)throw Error(s(459));var r=al;return al=null,r}function Ow(r){if(r===il||r===$c)throw Error(s(483))}var $s=!1;function wm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _m(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Is(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Us(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(rt&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=Oc(r),gw(r,null,o),i}return Rc(r,u,i,o),Oc(r)}function ol(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,gr(r,o)}}function Sm(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?m=g=i:g=g.next=i}else m=g=i;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var xm=!1;function ll(){if(xm){var r=Pa;if(r!==null)throw r}}function ul(r,i,o,u){xm=!1;var m=r.updateQueue;$s=!1;var g=m.firstBaseUpdate,E=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var L=C,H=L.next;L.next=null,E===null?g=H:E.next=H,E=L;var re=r.alternate;re!==null&&(re=re.updateQueue,C=re.lastBaseUpdate,C!==E&&(C===null?re.firstBaseUpdate=H:C.next=H,re.lastBaseUpdate=L))}if(g!==null){var oe=m.baseState;E=0,re=H=L=null,C=g;do{var F=C.lane&-536870913,Y=F!==C.lane;if(Y?(Xe&F)===F:(u&F)===F){F!==0&&F===Aa&&(xm=!0),re!==null&&(re=re.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Ce=r,Ee=C;F=i;var ut=o;switch(Ee.tag){case 1:if(Ce=Ee.payload,typeof Ce=="function"){oe=Ce.call(ut,oe,F);break e}oe=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Ee.payload,F=typeof Ce=="function"?Ce.call(ut,oe,F):Ce,F==null)break e;oe=p({},oe,F);break e;case 2:$s=!0}}F=C.callback,F!==null&&(r.flags|=64,Y&&(r.flags|=8192),Y=m.callbacks,Y===null?m.callbacks=[F]:Y.push(F))}else Y={lane:F,tag:C.tag,payload:C.payload,callback:C.callback,next:null},re===null?(H=re=Y,L=oe):re=re.next=Y,E|=F;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;Y=C,C=Y.next,Y.next=null,m.lastBaseUpdate=Y,m.shared.pending=null}}while(!0);re===null&&(L=oe),m.baseState=L,m.firstBaseUpdate=H,m.lastBaseUpdate=re,g===null&&(m.shared.lanes=0),Ks|=E,r.lanes=E,r.memoizedState=oe}}function Mw(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function jw(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Mw(o[r],i)}var Ca=J(null),Uc=J(0);function Dw(r,i){r=vs,ue(Uc,r),ue(Ca,i),vs=r|i.baseLanes}function Tm(){ue(Uc,vs),ue(Ca,Ca.current)}function Em(){vs=Uc.current,he(Ca),he(Uc)}var Bs=0,Be=null,ot=null,Bt=null,Bc=!1,Ra=!1,Ui=!1,zc=0,cl=0,Oa=null,pM=0;function Nt(){throw Error(s(321))}function Am(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!In(r[o],i[o]))return!1;return!0}function Pm(r,i,o,u,m,g){return Bs=g,Be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,V.H=r===null||r.memoizedState===null?g_:y_,Ui=!1,g=o(u,m),Ui=!1,Ra&&(g=Nw(i,o,u,m)),kw(r),g}function kw(r){V.H=Kc;var i=ot!==null&&ot.next!==null;if(Bs=0,Bt=ot=Be=null,Bc=!1,cl=0,Oa=null,i)throw Error(s(300));r===null||Jt||(r=r.dependencies,r!==null&&kc(r)&&(Jt=!0))}function Nw(r,i,o,u){Be=r;var m=0;do{if(Ra&&(Oa=null),cl=0,Ra=!1,25<=m)throw Error(s(301));if(m+=1,Bt=ot=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}V.H=SM,g=i(o,u)}while(Ra);return g}function gM(){var r=V.H,i=r.useState()[0];return i=typeof i.then=="function"?hl(i):i,r=r.useState()[0],(ot!==null?ot.memoizedState:null)!==r&&(Be.flags|=1024),i}function Cm(){var r=zc!==0;return zc=0,r}function Rm(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Om(r){if(Bc){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bc=!1}Bs=0,Bt=ot=Be=null,Ra=!1,cl=zc=0,Oa=null}function jn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Be.memoizedState=Bt=r:Bt=Bt.next=r,Bt}function zt(){if(ot===null){var r=Be.alternate;r=r!==null?r.memoizedState:null}else r=ot.next;var i=Bt===null?Be.memoizedState:Bt.next;if(i!==null)Bt=i,ot=r;else{if(r===null)throw Be.alternate===null?Error(s(467)):Error(s(310));ot=r,r={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Bt===null?Be.memoizedState=Bt=r:Bt=Bt.next=r}return Bt}function Mm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hl(r){var i=cl;return cl+=1,Oa===null&&(Oa=[]),r=Cw(Oa,r,i),i=Be,(Bt===null?i.memoizedState:Bt.next)===null&&(i=i.alternate,V.H=i===null||i.memoizedState===null?g_:y_),r}function qc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return hl(r);if(r.$$typeof===P)return pn(r)}throw Error(s(438,String(r)))}function jm(r){var i=null,o=Be.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Be.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Mm(),Be.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=B;return i.index++,o}function ds(r,i){return typeof i=="function"?i(r):i}function Hc(r){var i=zt();return Dm(i,ot,r)}function Dm(r,i,o){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=r.baseQueue,g=u.pending;if(g!==null){if(m!==null){var E=m.next;m.next=g.next,g.next=E}i.baseQueue=m=g,u.pending=null}if(g=r.baseState,m===null)r.memoizedState=g;else{i=m.next;var C=E=null,L=null,H=i,re=!1;do{var oe=H.lane&-536870913;if(oe!==H.lane?(Xe&oe)===oe:(Bs&oe)===oe){var F=H.revertLane;if(F===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),oe===Aa&&(re=!0);else if((Bs&F)===F){H=H.next,F===Aa&&(re=!0);continue}else oe={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},L===null?(C=L=oe,E=g):L=L.next=oe,Be.lanes|=F,Ks|=F;oe=H.action,Ui&&o(g,oe),g=H.hasEagerState?H.eagerState:o(g,oe)}else F={lane:oe,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},L===null?(C=L=F,E=g):L=L.next=F,Be.lanes|=oe,Ks|=oe;H=H.next}while(H!==null&&H!==i);if(L===null?E=g:L.next=C,!In(g,r.memoizedState)&&(Jt=!0,re&&(o=Pa,o!==null)))throw o;r.memoizedState=g,r.baseState=E,r.baseQueue=L,u.lastRenderedState=g}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function km(r){var i=zt(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var u=o.dispatch,m=o.pending,g=i.memoizedState;if(m!==null){o.pending=null;var E=m=m.next;do g=r(g,E.action),E=E.next;while(E!==m);In(g,i.memoizedState)||(Jt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,u]}function Lw(r,i,o){var u=Be,m=zt(),g=et;if(g){if(o===void 0)throw Error(s(407));o=o()}else o=i();var E=!In((ot||m).memoizedState,o);E&&(m.memoizedState=o,Jt=!0),m=m.queue;var C=Uw.bind(null,u,m,r);if(dl(2048,8,C,[r]),m.getSnapshot!==i||E||Bt!==null&&Bt.memoizedState.tag&1){if(u.flags|=2048,Ma(9,Vc(),Iw.bind(null,u,m,o,i),null),pt===null)throw Error(s(349));g||(Bs&124)!==0||$w(u,i,o)}return o}function $w(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=Be.updateQueue,i===null?(i=Mm(),Be.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function Iw(r,i,o,u){i.value=o,i.getSnapshot=u,Bw(i)&&zw(r)}function Uw(r,i,o){return o(function(){Bw(i)&&zw(r)})}function Bw(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!In(r,o)}catch{return!0}}function zw(r){var i=Sa(r,2);i!==null&&Vn(i,r,2)}function Nm(r){var i=jn();if(typeof r=="function"){var o=r;if(r=o(),Ui){$n(!0);try{o()}finally{$n(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:r},i}function qw(r,i,o,u){return r.baseState=o,Dm(r,ot,typeof u=="function"?u:ds)}function yM(r,i,o,u,m){if(Fc(r))throw Error(s(485));if(r=i.action,r!==null){var g={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};V.T!==null?o(!0):g.isTransition=!1,u(g),o=i.pending,o===null?(g.next=i.pending=g,Hw(i,g)):(g.next=o.next,i.pending=o.next=g)}}function Hw(r,i){var o=i.action,u=i.payload,m=r.state;if(i.isTransition){var g=V.T,E={};V.T=E;try{var C=o(m,u),L=V.S;L!==null&&L(E,C),Vw(r,i,C)}catch(H){Lm(r,i,H)}finally{V.T=g}}else try{g=o(m,u),Vw(r,i,g)}catch(H){Lm(r,i,H)}}function Vw(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Gw(r,i,u)},function(u){return Lm(r,i,u)}):Gw(r,i,o)}function Gw(r,i,o){i.status="fulfilled",i.value=o,Fw(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,Hw(r,o)))}function Lm(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Fw(i),i=i.next;while(i!==u)}r.action=null}function Fw(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function Kw(r,i){return i}function Yw(r,i){if(et){var o=pt.formState;if(o!==null){e:{var u=Be;if(et){if(Ot){t:{for(var m=Ot,g=kr;m.nodeType!==8;){if(!g){m=null;break t}if(m=wr(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){Ot=wr(m.nextSibling),u=m.data==="F!";break e}}Ni(u)}u=!1}u&&(i=o[0])}}return o=jn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kw,lastRenderedState:i},o.queue=u,o=f_.bind(null,Be,u),u.dispatch=o,u=Nm(!1),g=zm.bind(null,Be,!1,u.queue),u=jn(),m={state:i,dispatch:null,action:r,pending:null},u.queue=m,o=yM.bind(null,Be,m,g,o),m.dispatch=o,u.memoizedState=r,[i,o,!1]}function Xw(r){var i=zt();return Ww(i,ot,r)}function Ww(r,i,o){if(i=Dm(r,i,Kw)[0],r=Hc(ds)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=hl(i)}catch(E){throw E===il?$c:E}else u=i;i=zt();var m=i.queue,g=m.dispatch;return o!==i.memoizedState&&(Be.flags|=2048,Ma(9,Vc(),vM.bind(null,m,o),null)),[u,g,r]}function vM(r,i){r.action=i}function Qw(r){var i=zt(),o=ot;if(o!==null)return Ww(i,o,r);zt(),i=i.memoizedState,o=zt();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function Ma(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=Be.updateQueue,i===null&&(i=Mm(),Be.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function Vc(){return{destroy:void 0,resource:void 0}}function Jw(){return zt().memoizedState}function Gc(r,i,o,u){var m=jn();u=u===void 0?null:u,Be.flags|=r,m.memoizedState=Ma(1|i,Vc(),o,u)}function dl(r,i,o,u){var m=zt();u=u===void 0?null:u;var g=m.memoizedState.inst;ot!==null&&u!==null&&Am(u,ot.memoizedState.deps)?m.memoizedState=Ma(i,g,o,u):(Be.flags|=r,m.memoizedState=Ma(1|i,g,o,u))}function Zw(r,i){Gc(8390656,8,r,i)}function e_(r,i){dl(2048,8,r,i)}function t_(r,i){return dl(4,2,r,i)}function n_(r,i){return dl(4,4,r,i)}function r_(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function s_(r,i,o){o=o!=null?o.concat([r]):null,dl(4,4,r_.bind(null,i,r),o)}function $m(){}function i_(r,i){var o=zt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Am(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function a_(r,i){var o=zt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Am(i,u[1]))return u[0];if(u=r(),Ui){$n(!0);try{r()}finally{$n(!1)}}return o.memoizedState=[u,i],u}function Im(r,i,o){return o===void 0||(Bs&1073741824)!==0?r.memoizedState=i:(r.memoizedState=o,r=u1(),Be.lanes|=r,Ks|=r,o)}function o_(r,i,o,u){return In(o,i)?o:Ca.current!==null?(r=Im(r,o,u),In(r,i)||(Jt=!0),r):(Bs&42)===0?(Jt=!0,r.memoizedState=o):(r=u1(),Be.lanes|=r,Ks|=r,i)}function l_(r,i,o,u,m){var g=ne.p;ne.p=g!==0&&8>g?g:8;var E=V.T,C={};V.T=C,zm(r,!1,i,o);try{var L=m(),H=V.S;if(H!==null&&H(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var re=mM(L,u);fl(r,i,re,Hn(r))}else fl(r,i,u,Hn(r))}catch(oe){fl(r,i,{then:function(){},status:"rejected",reason:oe},Hn())}finally{ne.p=g,V.T=E}}function bM(){}function Um(r,i,o,u){if(r.tag!==5)throw Error(s(476));var m=u_(r).queue;l_(r,m,i,K,o===null?bM:function(){return c_(r),o(u)})}function u_(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:K},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function c_(r){var i=u_(r).next.queue;fl(r,i,{},Hn())}function Bm(){return pn(Ml)}function h_(){return zt().memoizedState}function d_(){return zt().memoizedState}function wM(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Hn();r=Is(o);var u=Us(i,r,o);u!==null&&(Vn(u,i,o),ol(u,i,o)),i={cache:gm()},r.payload=i;return}i=i.return}}function _M(r,i,o){var u=Hn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Fc(r)?m_(i,o):(o=am(r,i,o,u),o!==null&&(Vn(o,r,u),p_(o,i,u)))}function f_(r,i,o){var u=Hn();fl(r,i,o,u)}function fl(r,i,o,u){var m={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Fc(r))m_(i,m);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,C=g(E,o);if(m.hasEagerState=!0,m.eagerState=C,In(C,E))return Rc(r,i,m,0),pt===null&&Cc(),!1}catch{}finally{}if(o=am(r,i,m,u),o!==null)return Vn(o,r,u),p_(o,i,u),!0}return!1}function zm(r,i,o,u){if(u={lane:2,revertLane:bp(),action:u,hasEagerState:!1,eagerState:null,next:null},Fc(r)){if(i)throw Error(s(479))}else i=am(r,o,u,2),i!==null&&Vn(i,r,2)}function Fc(r){var i=r.alternate;return r===Be||i!==null&&i===Be}function m_(r,i){Ra=Bc=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function p_(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,gr(r,o)}}var Kc={readContext:pn,use:qc,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt},g_={readContext:pn,use:qc,useCallback:function(r,i){return jn().memoizedState=[r,i===void 0?null:i],r},useContext:pn,useEffect:Zw,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Gc(4194308,4,r_.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Gc(4194308,4,r,i)},useInsertionEffect:function(r,i){Gc(4,2,r,i)},useMemo:function(r,i){var o=jn();i=i===void 0?null:i;var u=r();if(Ui){$n(!0);try{r()}finally{$n(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=jn();if(o!==void 0){var m=o(i);if(Ui){$n(!0);try{o(i)}finally{$n(!1)}}}else m=i;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=_M.bind(null,Be,r),[u.memoizedState,r]},useRef:function(r){var i=jn();return r={current:r},i.memoizedState=r},useState:function(r){r=Nm(r);var i=r.queue,o=f_.bind(null,Be,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:$m,useDeferredValue:function(r,i){var o=jn();return Im(o,r,i)},useTransition:function(){var r=Nm(!1);return r=l_.bind(null,Be,r.queue,!0,!1),jn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=Be,m=jn();if(et){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),pt===null)throw Error(s(349));(Xe&124)!==0||$w(u,i,o)}m.memoizedState=o;var g={value:o,getSnapshot:i};return m.queue=g,Zw(Uw.bind(null,u,g,r),[r]),u.flags|=2048,Ma(9,Vc(),Iw.bind(null,u,g,o,i),null),o},useId:function(){var r=jn(),i=pt.identifierPrefix;if(et){var o=us,u=ls;o=(u&~(1<<32-Ct(u)-1)).toString(32)+o,i=""+i+"R"+o,o=zc++,0<o&&(i+="H"+o.toString(32)),i+=""}else o=pM++,i=""+i+"r"+o.toString(32)+"";return r.memoizedState=i},useHostTransitionStatus:Bm,useFormState:Yw,useActionState:Yw,useOptimistic:function(r){var i=jn();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=zm.bind(null,Be,!0,o),o.dispatch=i,[r,i]},useMemoCache:jm,useCacheRefresh:function(){return jn().memoizedState=wM.bind(null,Be)}},y_={readContext:pn,use:qc,useCallback:i_,useContext:pn,useEffect:e_,useImperativeHandle:s_,useInsertionEffect:t_,useLayoutEffect:n_,useMemo:a_,useReducer:Hc,useRef:Jw,useState:function(){return Hc(ds)},useDebugValue:$m,useDeferredValue:function(r,i){var o=zt();return o_(o,ot.memoizedState,r,i)},useTransition:function(){var r=Hc(ds)[0],i=zt().memoizedState;return[typeof r=="boolean"?r:hl(r),i]},useSyncExternalStore:Lw,useId:h_,useHostTransitionStatus:Bm,useFormState:Xw,useActionState:Xw,useOptimistic:function(r,i){var o=zt();return qw(o,ot,r,i)},useMemoCache:jm,useCacheRefresh:d_},SM={readContext:pn,use:qc,useCallback:i_,useContext:pn,useEffect:e_,useImperativeHandle:s_,useInsertionEffect:t_,useLayoutEffect:n_,useMemo:a_,useReducer:km,useRef:Jw,useState:function(){return km(ds)},useDebugValue:$m,useDeferredValue:function(r,i){var o=zt();return ot===null?Im(o,r,i):o_(o,ot.memoizedState,r,i)},useTransition:function(){var r=km(ds)[0],i=zt().memoizedState;return[typeof r=="boolean"?r:hl(r),i]},useSyncExternalStore:Lw,useId:h_,useHostTransitionStatus:Bm,useFormState:Qw,useActionState:Qw,useOptimistic:function(r,i){var o=zt();return ot!==null?qw(o,ot,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:jm,useCacheRefresh:d_},ja=null,ml=0;function Yc(r){var i=ml;return ml+=1,ja===null&&(ja=[]),Cw(ja,r,i)}function pl(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Xc(r,i){throw i.$$typeof===y?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function v_(r){var i=r._init;return i(r._payload)}function b_(r){function i(U,I){if(r){var q=U.deletions;q===null?(U.deletions=[I],U.flags|=16):q.push(I)}}function o(U,I){if(!r)return null;for(;I!==null;)i(U,I),I=I.sibling;return null}function u(U){for(var I=new Map;U!==null;)U.key!==null?I.set(U.key,U):I.set(U.index,U),U=U.sibling;return I}function m(U,I){return U=os(U,I),U.index=0,U.sibling=null,U}function g(U,I,q){return U.index=q,r?(q=U.alternate,q!==null?(q=q.index,q<I?(U.flags|=67108866,I):q):(U.flags|=67108866,I)):(U.flags|=1048576,I)}function E(U){return r&&U.alternate===null&&(U.flags|=67108866),U}function C(U,I,q,ie){return I===null||I.tag!==6?(I=lm(q,U.mode,ie),I.return=U,I):(I=m(I,q),I.return=U,I)}function L(U,I,q,ie){var be=q.type;return be===S?re(U,I,q.props.children,ie,q.key):I!==null&&(I.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===$&&v_(be)===I.type)?(I=m(I,q.props),pl(I,q),I.return=U,I):(I=Mc(q.type,q.key,q.props,null,U.mode,ie),pl(I,q),I.return=U,I)}function H(U,I,q,ie){return I===null||I.tag!==4||I.stateNode.containerInfo!==q.containerInfo||I.stateNode.implementation!==q.implementation?(I=um(q,U.mode,ie),I.return=U,I):(I=m(I,q.children||[]),I.return=U,I)}function re(U,I,q,ie,be){return I===null||I.tag!==7?(I=Mi(q,U.mode,ie,be),I.return=U,I):(I=m(I,q),I.return=U,I)}function oe(U,I,q){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=lm(""+I,U.mode,q),I.return=U,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case v:return q=Mc(I.type,I.key,I.props,null,U.mode,q),pl(q,I),q.return=U,q;case b:return I=um(I,U.mode,q),I.return=U,I;case $:var ie=I._init;return I=ie(I._payload),oe(U,I,q)}if(pe(I)||Q(I))return I=Mi(I,U.mode,q,null),I.return=U,I;if(typeof I.then=="function")return oe(U,Yc(I),q);if(I.$$typeof===P)return oe(U,Nc(U,I),q);Xc(U,I)}return null}function F(U,I,q,ie){var be=I!==null?I.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return be!==null?null:C(U,I,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case v:return q.key===be?L(U,I,q,ie):null;case b:return q.key===be?H(U,I,q,ie):null;case $:return be=q._init,q=be(q._payload),F(U,I,q,ie)}if(pe(q)||Q(q))return be!==null?null:re(U,I,q,ie,null);if(typeof q.then=="function")return F(U,I,Yc(q),ie);if(q.$$typeof===P)return F(U,I,Nc(U,q),ie);Xc(U,q)}return null}function Y(U,I,q,ie,be){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return U=U.get(q)||null,C(I,U,""+ie,be);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case v:return U=U.get(ie.key===null?q:ie.key)||null,L(I,U,ie,be);case b:return U=U.get(ie.key===null?q:ie.key)||null,H(I,U,ie,be);case $:var qe=ie._init;return ie=qe(ie._payload),Y(U,I,q,ie,be)}if(pe(ie)||Q(ie))return U=U.get(q)||null,re(I,U,ie,be,null);if(typeof ie.then=="function")return Y(U,I,q,Yc(ie),be);if(ie.$$typeof===P)return Y(U,I,q,Nc(I,ie),be);Xc(I,ie)}return null}function Ce(U,I,q,ie){for(var be=null,qe=null,_e=I,Ae=I=0,en=null;_e!==null&&Ae<q.length;Ae++){_e.index>Ae?(en=_e,_e=null):en=_e.sibling;var Je=F(U,_e,q[Ae],ie);if(Je===null){_e===null&&(_e=en);break}r&&_e&&Je.alternate===null&&i(U,_e),I=g(Je,I,Ae),qe===null?be=Je:qe.sibling=Je,qe=Je,_e=en}if(Ae===q.length)return o(U,_e),et&&Di(U,Ae),be;if(_e===null){for(;Ae<q.length;Ae++)_e=oe(U,q[Ae],ie),_e!==null&&(I=g(_e,I,Ae),qe===null?be=_e:qe.sibling=_e,qe=_e);return et&&Di(U,Ae),be}for(_e=u(_e);Ae<q.length;Ae++)en=Y(_e,U,Ae,q[Ae],ie),en!==null&&(r&&en.alternate!==null&&_e.delete(en.key===null?Ae:en.key),I=g(en,I,Ae),qe===null?be=en:qe.sibling=en,qe=en);return r&&_e.forEach(function(ni){return i(U,ni)}),et&&Di(U,Ae),be}function Ee(U,I,q,ie){if(q==null)throw Error(s(151));for(var be=null,qe=null,_e=I,Ae=I=0,en=null,Je=q.next();_e!==null&&!Je.done;Ae++,Je=q.next()){_e.index>Ae?(en=_e,_e=null):en=_e.sibling;var ni=F(U,_e,Je.value,ie);if(ni===null){_e===null&&(_e=en);break}r&&_e&&ni.alternate===null&&i(U,_e),I=g(ni,I,Ae),qe===null?be=ni:qe.sibling=ni,qe=ni,_e=en}if(Je.done)return o(U,_e),et&&Di(U,Ae),be;if(_e===null){for(;!Je.done;Ae++,Je=q.next())Je=oe(U,Je.value,ie),Je!==null&&(I=g(Je,I,Ae),qe===null?be=Je:qe.sibling=Je,qe=Je);return et&&Di(U,Ae),be}for(_e=u(_e);!Je.done;Ae++,Je=q.next())Je=Y(_e,U,Ae,Je.value,ie),Je!==null&&(r&&Je.alternate!==null&&_e.delete(Je.key===null?Ae:Je.key),I=g(Je,I,Ae),qe===null?be=Je:qe.sibling=Je,qe=Je);return r&&_e.forEach(function(xj){return i(U,xj)}),et&&Di(U,Ae),be}function ut(U,I,q,ie){if(typeof q=="object"&&q!==null&&q.type===S&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case v:e:{for(var be=q.key;I!==null;){if(I.key===be){if(be=q.type,be===S){if(I.tag===7){o(U,I.sibling),ie=m(I,q.props.children),ie.return=U,U=ie;break e}}else if(I.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===$&&v_(be)===I.type){o(U,I.sibling),ie=m(I,q.props),pl(ie,q),ie.return=U,U=ie;break e}o(U,I);break}else i(U,I);I=I.sibling}q.type===S?(ie=Mi(q.props.children,U.mode,ie,q.key),ie.return=U,U=ie):(ie=Mc(q.type,q.key,q.props,null,U.mode,ie),pl(ie,q),ie.return=U,U=ie)}return E(U);case b:e:{for(be=q.key;I!==null;){if(I.key===be)if(I.tag===4&&I.stateNode.containerInfo===q.containerInfo&&I.stateNode.implementation===q.implementation){o(U,I.sibling),ie=m(I,q.children||[]),ie.return=U,U=ie;break e}else{o(U,I);break}else i(U,I);I=I.sibling}ie=um(q,U.mode,ie),ie.return=U,U=ie}return E(U);case $:return be=q._init,q=be(q._payload),ut(U,I,q,ie)}if(pe(q))return Ce(U,I,q,ie);if(Q(q)){if(be=Q(q),typeof be!="function")throw Error(s(150));return q=be.call(q),Ee(U,I,q,ie)}if(typeof q.then=="function")return ut(U,I,Yc(q),ie);if(q.$$typeof===P)return ut(U,I,Nc(U,q),ie);Xc(U,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,I!==null&&I.tag===6?(o(U,I.sibling),ie=m(I,q),ie.return=U,U=ie):(o(U,I),ie=lm(q,U.mode,ie),ie.return=U,U=ie),E(U)):o(U,I)}return function(U,I,q,ie){try{ml=0;var be=ut(U,I,q,ie);return ja=null,be}catch(_e){if(_e===il||_e===$c)throw _e;var qe=Un(29,_e,null,U.mode);return qe.lanes=ie,qe.return=U,qe}finally{}}}var Da=b_(!0),w_=b_(!1),sr=J(null),Nr=null;function zs(r){var i=r.alternate;ue(Kt,Kt.current&1),ue(sr,r),Nr===null&&(i===null||Ca.current!==null||i.memoizedState!==null)&&(Nr=r)}function __(r){if(r.tag===22){if(ue(Kt,Kt.current),ue(sr,r),Nr===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(Nr=r)}}else qs()}function qs(){ue(Kt,Kt.current),ue(sr,sr.current)}function fs(r){he(sr),Nr===r&&(Nr=null),he(Kt)}var Kt=J(0);function Wc(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Mp(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function qm(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:p({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Hm={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Hn(),m=Is(u);m.payload=i,o!=null&&(m.callback=o),i=Us(r,m,u),i!==null&&(Vn(i,r,u),ol(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Hn(),m=Is(u);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=Us(r,m,u),i!==null&&(Vn(i,r,u),ol(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Hn(),u=Is(o);u.tag=2,i!=null&&(u.callback=i),i=Us(r,u,o),i!==null&&(Vn(i,r,o),ol(i,r,o))}};function S_(r,i,o,u,m,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,E):i.prototype&&i.prototype.isPureReactComponent?!Qo(o,u)||!Qo(m,g):!0}function x_(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&Hm.enqueueReplaceState(i,i.state,null)}function Bi(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=p({},o));for(var m in r)o[m]===void 0&&(o[m]=r[m])}return o}var Qc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function T_(r){Qc(r)}function E_(r){console.error(r)}function A_(r){Qc(r)}function Jc(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function P_(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Vm(r,i,o){return o=Is(o),o.tag=3,o.payload={element:null},o.callback=function(){Jc(r,i)},o}function C_(r){return r=Is(r),r.tag=3,r}function R_(r,i,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=u.value;r.payload=function(){return m(g)},r.callback=function(){P_(i,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){P_(i,o,u),typeof m!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function xM(r,i,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&nl(i,o,m,!0),o=sr.current,o!==null){switch(o.tag){case 13:return Nr===null?mp():o.alternate===null&&Mt===0&&(Mt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===bm?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),gp(r,u,m)),!1;case 22:return o.flags|=65536,u===bm?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),gp(r,u,m)),!1}throw Error(s(435,o.tag))}return gp(r,u,m),mp(),!1}if(et)return i=sr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==dm&&(r=Error(s(422),{cause:u}),tl(er(r,o)))):(u!==dm&&(i=Error(s(423),{cause:u}),tl(er(i,o))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=er(u,o),m=Vm(r.stateNode,u,m),Sm(r,m),Mt!==4&&(Mt=2)),!1;var g=Error(s(520),{cause:u});if(g=er(g,o),Sl===null?Sl=[g]:Sl.push(g),Mt!==4&&(Mt=2),i===null)return!0;u=er(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=m&-m,o.lanes|=r,r=Vm(o.stateNode,u,r),Sm(o,r),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ys===null||!Ys.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=C_(m),R_(m,r,o,u),Sm(o,m),!1}o=o.return}while(o!==null);return!1}var O_=Error(s(461)),Jt=!1;function on(r,i,o,u){i.child=r===null?w_(i,null,o,u):Da(i,r.child,o,u)}function M_(r,i,o,u,m){o=o.render;var g=i.ref;if("ref"in u){var E={};for(var C in u)C!=="ref"&&(E[C]=u[C])}else E=u;return $i(i),u=Pm(r,i,o,E,g,m),C=Cm(),r!==null&&!Jt?(Rm(r,i,m),ms(r,i,m)):(et&&C&&cm(i),i.flags|=1,on(r,i,u,m),i.child)}function j_(r,i,o,u,m){if(r===null){var g=o.type;return typeof g=="function"&&!om(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,D_(r,i,g,u,m)):(r=Mc(o.type,null,u,i,i.mode,m),r.ref=i.ref,r.return=i,i.child=r)}if(g=r.child,!Jm(r,m)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:Qo,o(E,u)&&r.ref===i.ref)return ms(r,i,m)}return i.flags|=1,r=os(g,u),r.ref=i.ref,r.return=i,i.child=r}function D_(r,i,o,u,m){if(r!==null){var g=r.memoizedProps;if(Qo(g,u)&&r.ref===i.ref)if(Jt=!1,i.pendingProps=u=g,Jm(r,m))(r.flags&131072)!==0&&(Jt=!0);else return i.lanes=r.lanes,ms(r,i,m)}return Gm(r,i,o,u,m)}function k_(r,i,o){var u=i.pendingProps,m=u.children,g=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,r!==null){for(m=i.child=r.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;i.childLanes=g&~u}else i.childLanes=0,i.child=null;return N_(r,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Lc(i,g!==null?g.cachePool:null),g!==null?Dw(i,g):Tm(),__(i);else return i.lanes=i.childLanes=536870912,N_(r,i,g!==null?g.baseLanes|o:o,o)}else g!==null?(Lc(i,g.cachePool),Dw(i,g),qs(),i.memoizedState=null):(r!==null&&Lc(i,null),Tm(),qs());return on(r,i,m,o),i.child}function N_(r,i,o,u){var m=vm();return m=m===null?null:{parent:Ft._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},r!==null&&Lc(i,null),Tm(),__(i),r!==null&&nl(r,i,u,!0),null}function Zc(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function Gm(r,i,o,u,m){return $i(i),o=Pm(r,i,o,u,void 0,m),u=Cm(),r!==null&&!Jt?(Rm(r,i,m),ms(r,i,m)):(et&&u&&cm(i),i.flags|=1,on(r,i,o,m),i.child)}function L_(r,i,o,u,m,g){return $i(i),i.updateQueue=null,o=Nw(i,u,o,m),kw(r),u=Cm(),r!==null&&!Jt?(Rm(r,i,g),ms(r,i,g)):(et&&u&&cm(i),i.flags|=1,on(r,i,o,g),i.child)}function $_(r,i,o,u,m){if($i(i),i.stateNode===null){var g=xa,E=o.contextType;typeof E=="object"&&E!==null&&(g=pn(E)),g=new o(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Hm,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},wm(i),E=o.contextType,g.context=typeof E=="object"&&E!==null?pn(E):xa,g.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(qm(i,o,E,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&Hm.enqueueReplaceState(g,g.state,null),ul(i,u,g,m),ll(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){g=i.stateNode;var C=i.memoizedProps,L=Bi(o,C);g.props=L;var H=g.context,re=o.contextType;E=xa,typeof re=="object"&&re!==null&&(E=pn(re));var oe=o.getDerivedStateFromProps;re=typeof oe=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,re||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||H!==E)&&x_(i,g,u,E),$s=!1;var F=i.memoizedState;g.state=F,ul(i,u,g,m),ll(),H=i.memoizedState,C||F!==H||$s?(typeof oe=="function"&&(qm(i,o,oe,u),H=i.memoizedState),(L=$s||S_(i,o,L,u,F,H,E))?(re||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=H),g.props=u,g.state=H,g.context=E,u=L):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,_m(r,i),E=i.memoizedProps,re=Bi(o,E),g.props=re,oe=i.pendingProps,F=g.context,H=o.contextType,L=xa,typeof H=="object"&&H!==null&&(L=pn(H)),C=o.getDerivedStateFromProps,(H=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==oe||F!==L)&&x_(i,g,u,L),$s=!1,F=i.memoizedState,g.state=F,ul(i,u,g,m),ll();var Y=i.memoizedState;E!==oe||F!==Y||$s||r!==null&&r.dependencies!==null&&kc(r.dependencies)?(typeof C=="function"&&(qm(i,o,C,u),Y=i.memoizedState),(re=$s||S_(i,o,re,u,F,Y,L)||r!==null&&r.dependencies!==null&&kc(r.dependencies))?(H||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,Y,L),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,Y,L)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&F===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&F===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Y),g.props=u,g.state=Y,g.context=L,u=re):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&F===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&F===r.memoizedState||(i.flags|=1024),u=!1)}return g=u,Zc(r,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,r!==null&&u?(i.child=Da(i,r.child,null,m),i.child=Da(i,null,o,m)):on(r,i,o,m),i.memoizedState=g.state,r=i.child):r=ms(r,i,m),r}function I_(r,i,o,u){return el(),i.flags|=256,on(r,i,o,u),i.child}var Fm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Km(r){return{baseLanes:r,cachePool:Ew()}}function Ym(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=ir),r}function U_(r,i,o){var u=i.pendingProps,m=!1,g=(i.flags&128)!==0,E;if((E=g)||(E=r!==null&&r.memoizedState===null?!1:(Kt.current&2)!==0),E&&(m=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,r===null){if(et){if(m?zs(i):qs(),et){var C=Ot,L;if(L=C){e:{for(L=C,C=kr;L.nodeType!==8;){if(!C){C=null;break e}if(L=wr(L.nextSibling),L===null){C=null;break e}}C=L}C!==null?(i.memoizedState={dehydrated:C,treeContext:ji!==null?{id:ls,overflow:us}:null,retryLane:536870912,hydrationErrors:null},L=Un(18,null,null,0),L.stateNode=C,L.return=i,i.child=L,xn=i,Ot=null,L=!0):L=!1}L||Ni(i)}if(C=i.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return Mp(C)?i.lanes=32:i.lanes=536870912,null;fs(i)}return C=u.children,u=u.fallback,m?(qs(),m=i.mode,C=eh({mode:"hidden",children:C},m),u=Mi(u,m,o,null),C.return=i,u.return=i,C.sibling=u,i.child=C,m=i.child,m.memoizedState=Km(o),m.childLanes=Ym(r,E,o),i.memoizedState=Fm,u):(zs(i),Xm(i,C))}if(L=r.memoizedState,L!==null&&(C=L.dehydrated,C!==null)){if(g)i.flags&256?(zs(i),i.flags&=-257,i=Wm(r,i,o)):i.memoizedState!==null?(qs(),i.child=r.child,i.flags|=128,i=null):(qs(),m=u.fallback,C=i.mode,u=eh({mode:"visible",children:u.children},C),m=Mi(m,C,o,null),m.flags|=2,u.return=i,m.return=i,u.sibling=m,i.child=u,Da(i,r.child,null,o),u=i.child,u.memoizedState=Km(o),u.childLanes=Ym(r,E,o),i.memoizedState=Fm,i=m);else if(zs(i),Mp(C)){if(E=C.nextSibling&&C.nextSibling.dataset,E)var H=E.dgst;E=H,u=Error(s(419)),u.stack="",u.digest=E,tl({value:u,source:null,stack:null}),i=Wm(r,i,o)}else if(Jt||nl(r,i,o,!1),E=(o&r.childLanes)!==0,Jt||E){if(E=pt,E!==null&&(u=o&-o,u=(u&42)!==0?1:Ei(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==L.retryLane))throw L.retryLane=u,Sa(r,u),Vn(E,r,u),O_;C.data==="$?"||mp(),i=Wm(r,i,o)}else C.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=L.treeContext,Ot=wr(C.nextSibling),xn=i,et=!0,ki=null,kr=!1,r!==null&&(nr[rr++]=ls,nr[rr++]=us,nr[rr++]=ji,ls=r.id,us=r.overflow,ji=i),i=Xm(i,u.children),i.flags|=4096);return i}return m?(qs(),m=u.fallback,C=i.mode,L=r.child,H=L.sibling,u=os(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,H!==null?m=os(H,m):(m=Mi(m,C,o,null),m.flags|=2),m.return=i,u.return=i,u.sibling=m,i.child=u,u=m,m=i.child,C=r.child.memoizedState,C===null?C=Km(o):(L=C.cachePool,L!==null?(H=Ft._currentValue,L=L.parent!==H?{parent:H,pool:H}:L):L=Ew(),C={baseLanes:C.baseLanes|o,cachePool:L}),m.memoizedState=C,m.childLanes=Ym(r,E,o),i.memoizedState=Fm,u):(zs(i),o=r.child,r=o.sibling,o=os(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(E=i.deletions,E===null?(i.deletions=[r],i.flags|=16):E.push(r)),i.child=o,i.memoizedState=null,o)}function Xm(r,i){return i=eh({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function eh(r,i){return r=Un(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Wm(r,i,o){return Da(i,r.child,null,o),r=Xm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function B_(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),mm(r.return,i,o)}function Qm(r,i,o,u,m){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=m)}function z_(r,i,o){var u=i.pendingProps,m=u.revealOrder,g=u.tail;if(on(r,i,u.children,o),u=Kt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&B_(r,o,i);else if(r.tag===19)B_(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(ue(Kt,u),m){case"forwards":for(o=i.child,m=null;o!==null;)r=o.alternate,r!==null&&Wc(r)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),Qm(i,!1,m,o,g);break;case"backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(r=m.alternate,r!==null&&Wc(r)===null){i.child=m;break}r=m.sibling,m.sibling=o,o=m,m=r}Qm(i,!0,o,null,g);break;case"together":Qm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ms(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Ks|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(nl(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,o=os(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=os(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Jm(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&kc(r)))}function TM(r,i,o){switch(i.tag){case 3:ee(i,i.stateNode.containerInfo),Ls(i,Ft,r.memoizedState.cache),el();break;case 27:case 5:we(i);break;case 4:ee(i,i.stateNode.containerInfo);break;case 10:Ls(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(zs(i),i.flags|=128,null):(o&i.child.childLanes)!==0?U_(r,i,o):(zs(i),r=ms(r,i,o),r!==null?r.sibling:null);zs(i);break;case 19:var m=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(nl(r,i,o,!1),u=(o&i.childLanes)!==0),m){if(u)return z_(r,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ue(Kt,Kt.current),u)break;return null;case 22:case 23:return i.lanes=0,k_(r,i,o);case 24:Ls(i,Ft,r.memoizedState.cache)}return ms(r,i,o)}function q_(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)Jt=!0;else{if(!Jm(r,o)&&(i.flags&128)===0)return Jt=!1,TM(r,i,o);Jt=(r.flags&131072)!==0}else Jt=!1,et&&(i.flags&1048576)!==0&&vw(i,Dc,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var u=i.elementType,m=u._init;if(u=m(u._payload),i.type=u,typeof u=="function")om(u)?(r=Bi(u,r),i.tag=1,i=$_(null,i,u,r,o)):(i.tag=0,i=Gm(null,i,u,r,o));else{if(u!=null){if(m=u.$$typeof,m===O){i.tag=11,i=M_(null,i,u,r,o);break e}else if(m===j){i.tag=14,i=j_(null,i,u,r,o);break e}}throw i=ae(u)||u,Error(s(306,i,""))}}return i;case 0:return Gm(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,m=Bi(u,i.pendingProps),$_(r,i,u,m,o);case 3:e:{if(ee(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var g=i.memoizedState;m=g.element,_m(r,i),ul(i,u,null,o);var E=i.memoizedState;if(u=E.cache,Ls(i,Ft,u),u!==g.cache&&pm(i,[Ft],o,!0),ll(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=I_(r,i,u,o);break e}else if(u!==m){m=er(Error(s(424)),i),tl(m),i=I_(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ot=wr(r.firstChild),xn=i,et=!0,ki=null,kr=!0,o=w_(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(el(),u===m){i=ms(r,i,o);break e}on(r,i,u,o)}i=i.child}return i;case 26:return Zc(r,i),r===null?(o=F1(i.type,null,i.pendingProps,null))?i.memoizedState=o:et||(o=i.type,r=i.pendingProps,u=mh(me.current).createElement(o),u[Gt]=i,u[Ut]=r,un(u,o,r),Rt(u),i.stateNode=u):i.memoizedState=F1(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return we(i),r===null&&et&&(u=i.stateNode=H1(i.type,i.pendingProps,me.current),xn=i,kr=!0,m=Ot,Qs(i.type)?(jp=m,Ot=wr(u.firstChild)):Ot=m),on(r,i,i.pendingProps.children,o),Zc(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&et&&((m=u=Ot)&&(u=JM(u,i.type,i.pendingProps,kr),u!==null?(i.stateNode=u,xn=i,Ot=wr(u.firstChild),kr=!1,m=!0):m=!1),m||Ni(i)),we(i),m=i.type,g=i.pendingProps,E=r!==null?r.memoizedProps:null,u=g.children,Cp(m,g)?u=null:E!==null&&Cp(m,E)&&(i.flags|=32),i.memoizedState!==null&&(m=Pm(r,i,gM,null,null,o),Ml._currentValue=m),Zc(r,i),on(r,i,u,o),i.child;case 6:return r===null&&et&&((r=o=Ot)&&(o=ZM(o,i.pendingProps,kr),o!==null?(i.stateNode=o,xn=i,Ot=null,r=!0):r=!1),r||Ni(i)),null;case 13:return U_(r,i,o);case 4:return ee(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Da(i,null,u,o):on(r,i,u,o),i.child;case 11:return M_(r,i,i.type,i.pendingProps,o);case 7:return on(r,i,i.pendingProps,o),i.child;case 8:return on(r,i,i.pendingProps.children,o),i.child;case 12:return on(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ls(i,i.type,u.value),on(r,i,u.children,o),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,$i(i),m=pn(m),u=u(m),i.flags|=1,on(r,i,u,o),i.child;case 14:return j_(r,i,i.type,i.pendingProps,o);case 15:return D_(r,i,i.type,i.pendingProps,o);case 19:return z_(r,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},r===null?(o=eh(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=os(r.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return k_(r,i,o);case 24:return $i(i),u=pn(Ft),r===null?(m=vm(),m===null&&(m=pt,g=gm(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),i.memoizedState={parent:u,cache:m},wm(i),Ls(i,Ft,m)):((r.lanes&o)!==0&&(_m(r,i),ul(i,null,null,o),ll()),m=r.memoizedState,g=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),Ls(i,Ft,u)):(u=g.cache,Ls(i,Ft,u),u!==m.cache&&pm(i,[Ft],o,!0))),on(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ps(r){r.flags|=4}function H_(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Q1(i)){if(i=sr.current,i!==null&&((Xe&4194048)===Xe?Nr!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||i!==Nr))throw al=bm,Aw;r.flags|=8192}}function th(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?at():536870912,r.lanes|=i,$a|=i)}function gl(r,i){if(!et)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Tt(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function EM(r,i,o){var u=i.pendingProps;switch(hm(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(i),null;case 1:return Tt(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),hs(Ft),ve(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Zo(i)?ps(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,_w())),Tt(i),null;case 26:return o=i.memoizedState,r===null?(ps(i),o!==null?(Tt(i),H_(i,o)):(Tt(i),i.flags&=-16777217)):o?o!==r.memoizedState?(ps(i),Tt(i),H_(i,o)):(Tt(i),i.flags&=-16777217):(r.memoizedProps!==u&&ps(i),Tt(i),i.flags&=-16777217),null;case 27:Ne(i),o=me.current;var m=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==u&&ps(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Tt(i),null}r=Z.current,Zo(i)?bw(i):(r=H1(m,u,o),i.stateNode=r,ps(i))}return Tt(i),null;case 5:if(Ne(i),o=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&ps(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Tt(i),null}if(r=Z.current,Zo(i))bw(i);else{switch(m=mh(me.current),r){case 1:r=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=m.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?m.createElement("select",{is:u.is}):m.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?m.createElement(o,{is:u.is}):m.createElement(o)}}r[Gt]=i,r[Ut]=u;e:for(m=i.child;m!==null;){if(m.tag===5||m.tag===6)r.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===i)break e;for(;m.sibling===null;){if(m.return===null||m.return===i)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}i.stateNode=r;e:switch(un(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ps(i)}}return Tt(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&ps(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=me.current,Zo(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,m=xn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[Gt]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||L1(r.nodeValue,o)),r||Ni(i)}else r=mh(r).createTextNode(u),r[Gt]=i,i.stateNode=r}return Tt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Zo(i),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Gt]=i}else el(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Tt(i),m=!1}else m=_w(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(fs(i),i):(fs(i),null)}if(fs(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==m&&(u.flags|=2048)}return o!==r&&o&&(i.child.flags|=8192),th(i,i.updateQueue),Tt(i),null;case 4:return ve(),r===null&&xp(i.stateNode.containerInfo),Tt(i),null;case 10:return hs(i.type),Tt(i),null;case 19:if(he(Kt),m=i.memoizedState,m===null)return Tt(i),null;if(u=(i.flags&128)!==0,g=m.rendering,g===null)if(u)gl(m,!1);else{if(Mt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(g=Wc(r),g!==null){for(i.flags|=128,gl(m,!1),r=g.updateQueue,i.updateQueue=r,th(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)yw(o,r),o=o.sibling;return ue(Kt,Kt.current&1|2),i.child}r=r.sibling}m.tail!==null&&Ye()>sh&&(i.flags|=128,u=!0,gl(m,!1),i.lanes=4194304)}else{if(!u)if(r=Wc(g),r!==null){if(i.flags|=128,u=!0,r=r.updateQueue,i.updateQueue=r,th(i,r),gl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!et)return Tt(i),null}else 2*Ye()-m.renderingStartTime>sh&&o!==536870912&&(i.flags|=128,u=!0,gl(m,!1),i.lanes=4194304);m.isBackwards?(g.sibling=i.child,i.child=g):(r=m.last,r!==null?r.sibling=g:i.child=g,m.last=g)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Ye(),i.sibling=null,r=Kt.current,ue(Kt,u?r&1|2:r&1),i):(Tt(i),null);case 22:case 23:return fs(i),Em(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Tt(i),i.subtreeFlags&6&&(i.flags|=8192)):Tt(i),o=i.updateQueue,o!==null&&th(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&he(Ii),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),hs(Ft),Tt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function AM(r,i){switch(hm(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return hs(Ft),ve(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Ne(i),null;case 13:if(fs(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));el()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return he(Kt),null;case 4:return ve(),null;case 10:return hs(i.type),null;case 22:case 23:return fs(i),Em(),r!==null&&he(Ii),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return hs(Ft),null;case 25:return null;default:return null}}function V_(r,i){switch(hm(i),i.tag){case 3:hs(Ft),ve();break;case 26:case 27:case 5:Ne(i);break;case 4:ve();break;case 13:fs(i);break;case 19:he(Kt);break;case 10:hs(i.type);break;case 22:case 23:fs(i),Em(),r!==null&&he(Ii);break;case 24:hs(Ft)}}function yl(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&r)===r){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==m)}}catch(C){dt(i,i.return,C)}}function Hs(r,i,o){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var g=m.next;u=g;do{if((u.tag&r)===r){var E=u.inst,C=E.destroy;if(C!==void 0){E.destroy=void 0,m=i;var L=o,H=C;try{H()}catch(re){dt(m,L,re)}}}u=u.next}while(u!==g)}}catch(re){dt(i,i.return,re)}}function G_(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{jw(i,o)}catch(u){dt(r,r.return,u)}}}function F_(r,i,o){o.props=Bi(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){dt(r,i,u)}}function vl(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(m){dt(r,i,m)}}function Lr(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){dt(r,i,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){dt(r,i,m)}else o.current=null}function K_(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){dt(r,r.return,m)}}function Zm(r,i,o){try{var u=r.stateNode;KM(u,r.type,o,i),u[Ut]=i}catch(m){dt(r,r.return,m)}}function Y_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Qs(r.type)||r.tag===4}function ep(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Y_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Qs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function tp(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=fh));else if(u!==4&&(u===27&&Qs(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(tp(r,i,o),r=r.sibling;r!==null;)tp(r,i,o),r=r.sibling}function nh(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&Qs(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(nh(r,i,o),r=r.sibling;r!==null;)nh(r,i,o),r=r.sibling}function X_(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);un(i,u,o),i[Gt]=r,i[Ut]=o}catch(g){dt(r,r.return,g)}}var gs=!1,Lt=!1,np=!1,W_=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function PM(r,i){if(r=r.containerInfo,Ap=wh,r=ow(r),em(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,C=-1,L=-1,H=0,re=0,oe=r,F=null;t:for(;;){for(var Y;oe!==o||m!==0&&oe.nodeType!==3||(C=E+m),oe!==g||u!==0&&oe.nodeType!==3||(L=E+u),oe.nodeType===3&&(E+=oe.nodeValue.length),(Y=oe.firstChild)!==null;)F=oe,oe=Y;for(;;){if(oe===r)break t;if(F===o&&++H===m&&(C=E),F===g&&++re===u&&(L=E),(Y=oe.nextSibling)!==null)break;oe=F,F=oe.parentNode}oe=Y}o=C===-1||L===-1?null:{start:C,end:L}}else o=null}o=o||{start:0,end:0}}else o=null;for(Pp={focusedElem:r,selectionRange:o},wh=!1,Zt=i;Zt!==null;)if(i=Zt,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,Zt=r;else for(;Zt!==null;){switch(i=Zt,g=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=i,m=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var Ce=Bi(o.type,m,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(Ce,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ee){dt(o,o.return,Ee)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Op(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Op(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Zt=r;break}Zt=i.return}}function Q_(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Vs(r,o),u&4&&yl(5,o);break;case 1:if(Vs(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(E){dt(o,o.return,E)}else{var m=Bi(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(m,i,r.__reactInternalSnapshotBeforeUpdate)}catch(E){dt(o,o.return,E)}}u&64&&G_(o),u&512&&vl(o,o.return);break;case 3:if(Vs(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{jw(r,i)}catch(E){dt(o,o.return,E)}}break;case 27:i===null&&u&4&&X_(o);case 26:case 5:Vs(r,o),i===null&&u&4&&K_(o),u&512&&vl(o,o.return);break;case 12:Vs(r,o);break;case 13:Vs(r,o),u&4&&e1(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=LM.bind(null,o),ej(r,o))));break;case 22:if(u=o.memoizedState!==null||gs,!u){i=i!==null&&i.memoizedState!==null||Lt,m=gs;var g=Lt;gs=u,(Lt=i)&&!g?Gs(r,o,(o.subtreeFlags&8772)!==0):Vs(r,o),gs=m,Lt=g}break;case 30:break;default:Vs(r,o)}}function J_(r){var i=r.alternate;i!==null&&(r.alternate=null,J_(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Ai(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var bt=null,Dn=!1;function ys(r,i,o){for(o=o.child;o!==null;)Z_(r,i,o),o=o.sibling}function Z_(r,i,o){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(Or,o)}catch{}switch(o.tag){case 26:Lt||Lr(o,i),ys(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Lt||Lr(o,i);var u=bt,m=Dn;Qs(o.type)&&(bt=o.stateNode,Dn=!1),ys(r,i,o),Pl(o.stateNode),bt=u,Dn=m;break;case 5:Lt||Lr(o,i);case 6:if(u=bt,m=Dn,bt=null,ys(r,i,o),bt=u,Dn=m,bt!==null)if(Dn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(o.stateNode)}catch(g){dt(o,i,g)}else try{bt.removeChild(o.stateNode)}catch(g){dt(o,i,g)}break;case 18:bt!==null&&(Dn?(r=bt,z1(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Nl(r)):z1(bt,o.stateNode));break;case 4:u=bt,m=Dn,bt=o.stateNode.containerInfo,Dn=!0,ys(r,i,o),bt=u,Dn=m;break;case 0:case 11:case 14:case 15:Lt||Hs(2,o,i),Lt||Hs(4,o,i),ys(r,i,o);break;case 1:Lt||(Lr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&F_(o,i,u)),ys(r,i,o);break;case 21:ys(r,i,o);break;case 22:Lt=(u=Lt)||o.memoizedState!==null,ys(r,i,o),Lt=u;break;default:ys(r,i,o)}}function e1(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Nl(r)}catch(o){dt(i,i.return,o)}}function CM(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new W_),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new W_),i;default:throw Error(s(435,r.tag))}}function rp(r,i){var o=CM(r);i.forEach(function(u){var m=$M.bind(null,r,u);o.has(u)||(o.add(u),u.then(m,m))})}function Bn(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],g=r,E=i,C=E;e:for(;C!==null;){switch(C.tag){case 27:if(Qs(C.type)){bt=C.stateNode,Dn=!1;break e}break;case 5:bt=C.stateNode,Dn=!1;break e;case 3:case 4:bt=C.stateNode.containerInfo,Dn=!0;break e}C=C.return}if(bt===null)throw Error(s(160));Z_(g,E,m),bt=null,Dn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)t1(i,r),i=i.sibling}var br=null;function t1(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Bn(i,r),zn(r),u&4&&(Hs(3,r,r.return),yl(3,r),Hs(5,r,r.return));break;case 1:Bn(i,r),zn(r),u&512&&(Lt||o===null||Lr(o,o.return)),u&64&&gs&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=br;if(Bn(i,r),zn(r),u&512&&(Lt||o===null||Lr(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":g=m.getElementsByTagName("title")[0],(!g||g[js]||g[Gt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(u),m.head.insertBefore(g,m.querySelector("head > title"))),un(g,u,o),g[Gt]=r,Rt(g),u=g;break e;case"link":var E=X1("link","href",m).get(u+(o.href||""));if(E){for(var C=0;C<E.length;C++)if(g=E[C],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(C,1);break t}}g=m.createElement(u),un(g,u,o),m.head.appendChild(g);break;case"meta":if(E=X1("meta","content",m).get(u+(o.content||""))){for(C=0;C<E.length;C++)if(g=E[C],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(C,1);break t}}g=m.createElement(u),un(g,u,o),m.head.appendChild(g);break;default:throw Error(s(468,u))}g[Gt]=r,Rt(g),u=g}r.stateNode=u}else W1(m,r.type,r.stateNode);else r.stateNode=Y1(m,u,r.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?W1(m,r.type,r.stateNode):Y1(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Zm(r,r.memoizedProps,o.memoizedProps)}break;case 27:Bn(i,r),zn(r),u&512&&(Lt||o===null||Lr(o,o.return)),o!==null&&u&4&&Zm(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Bn(i,r),zn(r),u&512&&(Lt||o===null||Lr(o,o.return)),r.flags&32){m=r.stateNode;try{pa(m,"")}catch(Y){dt(r,r.return,Y)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,Zm(r,m,o!==null?o.memoizedProps:m)),u&1024&&(np=!0);break;case 6:if(Bn(i,r),zn(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Y){dt(r,r.return,Y)}}break;case 3:if(yh=null,m=br,br=ph(i.containerInfo),Bn(i,r),br=m,zn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Nl(i.containerInfo)}catch(Y){dt(r,r.return,Y)}np&&(np=!1,n1(r));break;case 4:u=br,br=ph(r.stateNode.containerInfo),Bn(i,r),zn(r),br=u;break;case 12:Bn(i,r),zn(r);break;case 13:Bn(i,r),zn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(up=Ye()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,rp(r,u)));break;case 22:m=r.memoizedState!==null;var L=o!==null&&o.memoizedState!==null,H=gs,re=Lt;if(gs=H||m,Lt=re||L,Bn(i,r),Lt=re,gs=H,zn(r),u&8192)e:for(i=r.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||L||gs||Lt||zi(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){L=o=i;try{if(g=L.stateNode,m)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{C=L.stateNode;var oe=L.memoizedProps.style,F=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;C.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(Y){dt(L,L.return,Y)}}}else if(i.tag===6){if(o===null){L=i;try{L.stateNode.nodeValue=m?"":L.memoizedProps}catch(Y){dt(L,L.return,Y)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,rp(r,o))));break;case 19:Bn(i,r),zn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,rp(r,u)));break;case 30:break;case 21:break;default:Bn(i,r),zn(r)}}function zn(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(Y_(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,g=ep(r);nh(r,g,m);break;case 5:var E=o.stateNode;o.flags&32&&(pa(E,""),o.flags&=-33);var C=ep(r);nh(r,C,E);break;case 3:case 4:var L=o.stateNode.containerInfo,H=ep(r);tp(r,H,L);break;default:throw Error(s(161))}}catch(re){dt(r,r.return,re)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function n1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;n1(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Vs(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Q_(r,i.alternate,i),i=i.sibling}function zi(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Hs(4,i,i.return),zi(i);break;case 1:Lr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&F_(i,i.return,o),zi(i);break;case 27:Pl(i.stateNode);case 26:case 5:Lr(i,i.return),zi(i);break;case 22:i.memoizedState===null&&zi(i);break;case 30:zi(i);break;default:zi(i)}r=r.sibling}}function Gs(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=r,g=i,E=g.flags;switch(g.tag){case 0:case 11:case 15:Gs(m,g,o),yl(4,g);break;case 1:if(Gs(m,g,o),u=g,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(H){dt(u,u.return,H)}if(u=g,m=u.updateQueue,m!==null){var C=u.stateNode;try{var L=m.shared.hiddenCallbacks;if(L!==null)for(m.shared.hiddenCallbacks=null,m=0;m<L.length;m++)Mw(L[m],C)}catch(H){dt(u,u.return,H)}}o&&E&64&&G_(g),vl(g,g.return);break;case 27:X_(g);case 26:case 5:Gs(m,g,o),o&&u===null&&E&4&&K_(g),vl(g,g.return);break;case 12:Gs(m,g,o);break;case 13:Gs(m,g,o),o&&E&4&&e1(m,g);break;case 22:g.memoizedState===null&&Gs(m,g,o),vl(g,g.return);break;case 30:break;default:Gs(m,g,o)}i=i.sibling}}function sp(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&rl(o))}function ip(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&rl(r))}function $r(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)r1(r,i,o,u),i=i.sibling}function r1(r,i,o,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:$r(r,i,o,u),m&2048&&yl(9,i);break;case 1:$r(r,i,o,u);break;case 3:$r(r,i,o,u),m&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&rl(r)));break;case 12:if(m&2048){$r(r,i,o,u),r=i.stateNode;try{var g=i.memoizedProps,E=g.id,C=g.onPostCommit;typeof C=="function"&&C(E,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){dt(i,i.return,L)}}else $r(r,i,o,u);break;case 13:$r(r,i,o,u);break;case 23:break;case 22:g=i.stateNode,E=i.alternate,i.memoizedState!==null?g._visibility&2?$r(r,i,o,u):bl(r,i):g._visibility&2?$r(r,i,o,u):(g._visibility|=2,ka(r,i,o,u,(i.subtreeFlags&10256)!==0)),m&2048&&sp(E,i);break;case 24:$r(r,i,o,u),m&2048&&ip(i.alternate,i);break;default:$r(r,i,o,u)}}function ka(r,i,o,u,m){for(m=m&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=r,E=i,C=o,L=u,H=E.flags;switch(E.tag){case 0:case 11:case 15:ka(g,E,C,L,m),yl(8,E);break;case 23:break;case 22:var re=E.stateNode;E.memoizedState!==null?re._visibility&2?ka(g,E,C,L,m):bl(g,E):(re._visibility|=2,ka(g,E,C,L,m)),m&&H&2048&&sp(E.alternate,E);break;case 24:ka(g,E,C,L,m),m&&H&2048&&ip(E.alternate,E);break;default:ka(g,E,C,L,m)}i=i.sibling}}function bl(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,m=u.flags;switch(u.tag){case 22:bl(o,u),m&2048&&sp(u.alternate,u);break;case 24:bl(o,u),m&2048&&ip(u.alternate,u);break;default:bl(o,u)}i=i.sibling}}var wl=8192;function Na(r){if(r.subtreeFlags&wl)for(r=r.child;r!==null;)s1(r),r=r.sibling}function s1(r){switch(r.tag){case 26:Na(r),r.flags&wl&&r.memoizedState!==null&&fj(br,r.memoizedState,r.memoizedProps);break;case 5:Na(r);break;case 3:case 4:var i=br;br=ph(r.stateNode.containerInfo),Na(r),br=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=wl,wl=16777216,Na(r),wl=i):Na(r));break;default:Na(r)}}function i1(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function _l(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Zt=u,o1(u,r)}i1(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)a1(r),r=r.sibling}function a1(r){switch(r.tag){case 0:case 11:case 15:_l(r),r.flags&2048&&Hs(9,r,r.return);break;case 3:_l(r);break;case 12:_l(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,rh(r)):_l(r);break;default:_l(r)}}function rh(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Zt=u,o1(u,r)}i1(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Hs(8,i,i.return),rh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,rh(i));break;default:rh(i)}r=r.sibling}}function o1(r,i){for(;Zt!==null;){var o=Zt;switch(o.tag){case 0:case 11:case 15:Hs(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:rl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Zt=u;else e:for(o=r;Zt!==null;){u=Zt;var m=u.sibling,g=u.return;if(J_(u),u===o){Zt=null;break e}if(m!==null){m.return=g,Zt=m;break e}Zt=g}}}var RM={getCacheForType:function(r){var i=pn(Ft),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o}},OM=typeof WeakMap=="function"?WeakMap:Map,rt=0,pt=null,Ve=null,Xe=0,st=0,qn=null,Fs=!1,La=!1,ap=!1,vs=0,Mt=0,Ks=0,qi=0,op=0,ir=0,$a=0,Sl=null,kn=null,lp=!1,up=0,sh=1/0,ih=null,Ys=null,ln=0,Xs=null,Ia=null,Ua=0,cp=0,hp=null,l1=null,xl=0,dp=null;function Hn(){if((rt&2)!==0&&Xe!==0)return Xe&-Xe;if(V.T!==null){var r=Aa;return r!==0?r:bp()}return On()}function u1(){ir===0&&(ir=(Xe&536870912)===0||et?nt():536870912);var r=sr.current;return r!==null&&(r.flags|=32),ir}function Vn(r,i,o){(r===pt&&(st===2||st===9)||r.cancelPendingCommit!==null)&&(Ba(r,0),Ws(r,Xe,ir,!1)),Rn(r,o),((rt&2)===0||r!==pt)&&(r===pt&&((rt&2)===0&&(qi|=o),Mt===4&&Ws(r,Xe,ir,!1)),Ir(r))}function c1(r,i,o){if((rt&6)!==0)throw Error(s(327));var u=!o&&(i&124)===0&&(i&r.expiredLanes)===0||X(r,i),m=u?DM(r,i):pp(r,i,!0),g=u;do{if(m===0){La&&!u&&Ws(r,i,0,!1);break}else{if(o=r.current.alternate,g&&!MM(o)){m=pp(r,i,!1),g=!1;continue}if(m===2){if(g=i,r.errorRecoveryDisabledLanes&g)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var C=r;m=Sl;var L=C.current.memoizedState.isDehydrated;if(L&&(Ba(C,E).flags|=256),E=pp(C,E,!1),E!==2){if(ap&&!L){C.errorRecoveryDisabledLanes|=g,qi|=g,m=4;break e}g=kn,kn=m,g!==null&&(kn===null?kn=g:kn.push.apply(kn,g))}m=E}if(g=!1,m!==2)continue}}if(m===1){Ba(r,0),Ws(r,i,0,!0);break}e:{switch(u=r,g=m,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ws(u,i,ir,!Fs);break e;case 2:kn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=up+300-Ye(),10<m)){if(Ws(u,i,ir,!Fs),G(u,0,!0)!==0)break e;u.timeoutHandle=U1(h1.bind(null,u,o,kn,ih,lp,i,ir,qi,$a,Fs,g,2,-0,0),m);break e}h1(u,o,kn,ih,lp,i,ir,qi,$a,Fs,g,0,-0,0)}}break}while(!0);Ir(r)}function h1(r,i,o,u,m,g,E,C,L,H,re,oe,F,Y){if(r.timeoutHandle=-1,oe=i.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Ol={stylesheets:null,count:0,unsuspend:dj},s1(i),oe=mj(),oe!==null)){r.cancelPendingCommit=oe(v1.bind(null,r,i,g,o,u,m,E,C,L,re,1,F,Y)),Ws(r,g,E,!H);return}v1(r,i,g,o,u,m,E,C,L)}function MM(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],g=m.getSnapshot;m=m.value;try{if(!In(g(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ws(r,i,o,u){i&=~op,i&=~qi,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var m=i;0<m;){var g=31-Ct(m),E=1<<g;u[g]=-1,m&=~E}o!==0&&mn(r,o,i)}function ah(){return(rt&6)===0?(Tl(0),!1):!0}function fp(){if(Ve!==null){if(st===0)var r=Ve.return;else r=Ve,cs=Li=null,Om(r),ja=null,ml=0,r=Ve;for(;r!==null;)V_(r.alternate,r),r=r.return;Ve=null}}function Ba(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,XM(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),fp(),pt=r,Ve=o=os(r.current,null),Xe=i,st=0,qn=null,Fs=!1,La=X(r,i),ap=!1,$a=ir=op=qi=Ks=Mt=0,kn=Sl=null,lp=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var m=31-Ct(u),g=1<<m;i|=r[m],u&=~g}return vs=i,Cc(),o}function d1(r,i){Be=null,V.H=Kc,i===il||i===$c?(i=Rw(),st=3):i===Aw?(i=Rw(),st=4):st=i===O_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,qn=i,Ve===null&&(Mt=1,Jc(r,er(i,r.current)))}function f1(){var r=V.H;return V.H=Kc,r===null?Kc:r}function m1(){var r=V.A;return V.A=RM,r}function mp(){Mt=4,Fs||(Xe&4194048)!==Xe&&sr.current!==null||(La=!0),(Ks&134217727)===0&&(qi&134217727)===0||pt===null||Ws(pt,Xe,ir,!1)}function pp(r,i,o){var u=rt;rt|=2;var m=f1(),g=m1();(pt!==r||Xe!==i)&&(ih=null,Ba(r,i)),i=!1;var E=Mt;e:do try{if(st!==0&&Ve!==null){var C=Ve,L=qn;switch(st){case 8:fp(),E=6;break e;case 3:case 2:case 9:case 6:sr.current===null&&(i=!0);var H=st;if(st=0,qn=null,za(r,C,L,H),o&&La){E=0;break e}break;default:H=st,st=0,qn=null,za(r,C,L,H)}}jM(),E=Mt;break}catch(re){d1(r,re)}while(!0);return i&&r.shellSuspendCounter++,cs=Li=null,rt=u,V.H=m,V.A=g,Ve===null&&(pt=null,Xe=0,Cc()),E}function jM(){for(;Ve!==null;)p1(Ve)}function DM(r,i){var o=rt;rt|=2;var u=f1(),m=m1();pt!==r||Xe!==i?(ih=null,sh=Ye()+500,Ba(r,i)):La=X(r,i);e:do try{if(st!==0&&Ve!==null){i=Ve;var g=qn;t:switch(st){case 1:st=0,qn=null,za(r,i,g,1);break;case 2:case 9:if(Pw(g)){st=0,qn=null,g1(i);break}i=function(){st!==2&&st!==9||pt!==r||(st=7),Ir(r)},g.then(i,i);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Pw(g)?(st=0,qn=null,g1(i)):(st=0,qn=null,za(r,i,g,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var C=Ve;if(!E||Q1(E)){st=0,qn=null;var L=C.sibling;if(L!==null)Ve=L;else{var H=C.return;H!==null?(Ve=H,oh(H)):Ve=null}break t}}st=0,qn=null,za(r,i,g,5);break;case 6:st=0,qn=null,za(r,i,g,6);break;case 8:fp(),Mt=6;break e;default:throw Error(s(462))}}kM();break}catch(re){d1(r,re)}while(!0);return cs=Li=null,V.H=u,V.A=m,rt=o,Ve!==null?0:(pt=null,Xe=0,Cc(),Mt)}function kM(){for(;Ve!==null&&!kt();)p1(Ve)}function p1(r){var i=q_(r.alternate,r,vs);r.memoizedProps=r.pendingProps,i===null?oh(r):Ve=i}function g1(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=L_(o,i,i.pendingProps,i.type,void 0,Xe);break;case 11:i=L_(o,i,i.pendingProps,i.type.render,i.ref,Xe);break;case 5:Om(i);default:V_(o,i),i=Ve=yw(i,vs),i=q_(o,i,vs)}r.memoizedProps=r.pendingProps,i===null?oh(r):Ve=i}function za(r,i,o,u){cs=Li=null,Om(i),ja=null,ml=0;var m=i.return;try{if(xM(r,m,i,o,Xe)){Mt=1,Jc(r,er(o,r.current)),Ve=null;return}}catch(g){if(m!==null)throw Ve=m,g;Mt=1,Jc(r,er(o,r.current)),Ve=null;return}i.flags&32768?(et||u===1?r=!0:La||(Xe&536870912)!==0?r=!1:(Fs=r=!0,(u===2||u===9||u===3||u===6)&&(u=sr.current,u!==null&&u.tag===13&&(u.flags|=16384))),y1(i,r)):oh(i)}function oh(r){var i=r;do{if((i.flags&32768)!==0){y1(i,Fs);return}r=i.return;var o=EM(i.alternate,i,vs);if(o!==null){Ve=o;return}if(i=i.sibling,i!==null){Ve=i;return}Ve=i=r}while(i!==null);Mt===0&&(Mt=5)}function y1(r,i){do{var o=AM(r.alternate,r);if(o!==null){o.flags&=32767,Ve=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){Ve=r;return}Ve=r=o}while(r!==null);Mt=6,Ve=null}function v1(r,i,o,u,m,g,E,C,L){r.cancelPendingCommit=null;do lh();while(ln!==0);if((rt&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=im,es(r,o,g,E,C,L),r===pt&&(Ve=pt=null,Xe=0),Ia=i,Xs=r,Ua=o,cp=g,hp=m,l1=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,IM(It,function(){return x1(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=V.T,V.T=null,m=ne.p,ne.p=2,E=rt,rt|=4;try{PM(r,i,o)}finally{rt=E,ne.p=m,V.T=u}}ln=1,b1(),w1(),_1()}}function b1(){if(ln===1){ln=0;var r=Xs,i=Ia,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=V.T,V.T=null;var u=ne.p;ne.p=2;var m=rt;rt|=4;try{t1(i,r);var g=Pp,E=ow(r.containerInfo),C=g.focusedElem,L=g.selectionRange;if(E!==C&&C&&C.ownerDocument&&aw(C.ownerDocument.documentElement,C)){if(L!==null&&em(C)){var H=L.start,re=L.end;if(re===void 0&&(re=H),"selectionStart"in C)C.selectionStart=H,C.selectionEnd=Math.min(re,C.value.length);else{var oe=C.ownerDocument||document,F=oe&&oe.defaultView||window;if(F.getSelection){var Y=F.getSelection(),Ce=C.textContent.length,Ee=Math.min(L.start,Ce),ut=L.end===void 0?Ee:Math.min(L.end,Ce);!Y.extend&&Ee>ut&&(E=ut,ut=Ee,Ee=E);var U=iw(C,Ee),I=iw(C,ut);if(U&&I&&(Y.rangeCount!==1||Y.anchorNode!==U.node||Y.anchorOffset!==U.offset||Y.focusNode!==I.node||Y.focusOffset!==I.offset)){var q=oe.createRange();q.setStart(U.node,U.offset),Y.removeAllRanges(),Ee>ut?(Y.addRange(q),Y.extend(I.node,I.offset)):(q.setEnd(I.node,I.offset),Y.addRange(q))}}}}for(oe=[],Y=C;Y=Y.parentNode;)Y.nodeType===1&&oe.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<oe.length;C++){var ie=oe[C];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}wh=!!Ap,Pp=Ap=null}finally{rt=m,ne.p=u,V.T=o}}r.current=i,ln=2}}function w1(){if(ln===2){ln=0;var r=Xs,i=Ia,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=V.T,V.T=null;var u=ne.p;ne.p=2;var m=rt;rt|=4;try{Q_(r,i.alternate,i)}finally{rt=m,ne.p=u,V.T=o}}ln=3}}function _1(){if(ln===4||ln===3){ln=0,St();var r=Xs,i=Ia,o=Ua,u=l1;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ln=5:(ln=0,Ia=Xs=null,S1(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(Ys=null),Mr(o),i=i.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(Or,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=V.T,m=ne.p,ne.p=2,V.T=null;try{for(var g=r.onRecoverableError,E=0;E<u.length;E++){var C=u[E];g(C.value,{componentStack:C.stack})}}finally{V.T=i,ne.p=m}}(Ua&3)!==0&&lh(),Ir(r),m=r.pendingLanes,(o&4194090)!==0&&(m&42)!==0?r===dp?xl++:(xl=0,dp=r):xl=0,Tl(0)}}function S1(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,rl(i)))}function lh(r){return b1(),w1(),_1(),x1()}function x1(){if(ln!==5)return!1;var r=Xs,i=cp;cp=0;var o=Mr(Ua),u=V.T,m=ne.p;try{ne.p=32>o?32:o,V.T=null,o=hp,hp=null;var g=Xs,E=Ua;if(ln=0,Ia=Xs=null,Ua=0,(rt&6)!==0)throw Error(s(331));var C=rt;if(rt|=4,a1(g.current),r1(g,g.current,E,o),rt=C,Tl(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(Or,g)}catch{}return!0}finally{ne.p=m,V.T=u,S1(r,i)}}function T1(r,i,o){i=er(o,i),i=Vm(r.stateNode,i,2),r=Us(r,i,2),r!==null&&(Rn(r,2),Ir(r))}function dt(r,i,o){if(r.tag===3)T1(r,r,o);else for(;i!==null;){if(i.tag===3){T1(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ys===null||!Ys.has(u))){r=er(o,r),o=C_(2),u=Us(i,o,2),u!==null&&(R_(o,u,i,r),Rn(u,2),Ir(u));break}}i=i.return}}function gp(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new OM;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(o)||(ap=!0,m.add(o),r=NM.bind(null,r,i,o),i.then(r,r))}function NM(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,pt===r&&(Xe&o)===o&&(Mt===4||Mt===3&&(Xe&62914560)===Xe&&300>Ye()-up?(rt&2)===0&&Ba(r,0):op|=o,$a===Xe&&($a=0)),Ir(r)}function E1(r,i){i===0&&(i=at()),r=Sa(r,i),r!==null&&(Rn(r,i),Ir(r))}function LM(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),E1(r,o)}function $M(r,i){var o=0;switch(r.tag){case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),E1(r,o)}function IM(r,i){return Ze(r,i)}var uh=null,qa=null,yp=!1,ch=!1,vp=!1,Hi=0;function Ir(r){r!==qa&&r.next===null&&(qa===null?uh=qa=r:qa=qa.next=r),ch=!0,yp||(yp=!0,BM())}function Tl(r,i){if(!vp&&ch){vp=!0;do for(var o=!1,u=uh;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var g=0;else{var E=u.suspendedLanes,C=u.pingedLanes;g=(1<<31-Ct(42|r)+1)-1,g&=m&~(E&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,R1(u,g))}else g=Xe,g=G(u,u===pt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||X(u,g)||(o=!0,R1(u,g));u=u.next}while(o);vp=!1}}function UM(){A1()}function A1(){ch=yp=!1;var r=0;Hi!==0&&(YM()&&(r=Hi),Hi=0);for(var i=Ye(),o=null,u=uh;u!==null;){var m=u.next,g=P1(u,i);g===0?(u.next=null,o===null?uh=m:o.next=m,m===null&&(qa=o)):(o=u,(r!==0||(g&3)!==0)&&(ch=!0)),u=m}Tl(r)}function P1(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var E=31-Ct(g),C=1<<E,L=m[E];L===-1?((C&o)===0||(C&u)!==0)&&(m[E]=Qe(C,i)):L<=i&&(r.expiredLanes|=C),g&=~C}if(i=pt,o=Xe,o=G(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(st===2||st===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&mt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||X(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&mt(u),Mr(o)){case 2:case 8:o=fn;break;case 32:o=It;break;case 268435456:o=Cn;break;default:o=It}return u=C1.bind(null,r),o=Ze(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&mt(u),r.callbackPriority=2,r.callbackNode=null,2}function C1(r,i){if(ln!==0&&ln!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(lh()&&r.callbackNode!==o)return null;var u=Xe;return u=G(r,r===pt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(c1(r,u,i),P1(r,Ye()),r.callbackNode!=null&&r.callbackNode===o?C1.bind(null,r):null)}function R1(r,i){if(lh())return null;c1(r,i,!0)}function BM(){WM(function(){(rt&6)!==0?Ze(_n,UM):A1()})}function bp(){return Hi===0&&(Hi=nt()),Hi}function O1(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:_c(""+r)}function M1(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function zM(r,i,o,u,m){if(i==="submit"&&o&&o.stateNode===m){var g=O1((m[Ut]||null).action),E=u.submitter;E&&(i=(i=E[Ut]||null)?O1(i.formAction):E.getAttribute("formAction"),i!==null&&(g=i,E=null));var C=new Ec("action","action",null,u,m);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Hi!==0){var L=E?M1(m,E):new FormData(m);Um(o,{pending:!0,data:L,method:m.method,action:g},null,L)}}else typeof g=="function"&&(C.preventDefault(),L=E?M1(m,E):new FormData(m),Um(o,{pending:!0,data:L,method:m.method,action:g},g,L))},currentTarget:m}]})}}for(var wp=0;wp<sm.length;wp++){var _p=sm[wp],qM=_p.toLowerCase(),HM=_p[0].toUpperCase()+_p.slice(1);vr(qM,"on"+HM)}vr(cw,"onAnimationEnd"),vr(hw,"onAnimationIteration"),vr(dw,"onAnimationStart"),vr("dblclick","onDoubleClick"),vr("focusin","onFocus"),vr("focusout","onBlur"),vr(aM,"onTransitionRun"),vr(oM,"onTransitionStart"),vr(lM,"onTransitionCancel"),vr(fw,"onTransitionEnd"),ss("onMouseEnter",["mouseout","mouseover"]),ss("onMouseLeave",["mouseout","mouseover"]),ss("onPointerEnter",["pointerout","pointerover"]),ss("onPointerLeave",["pointerout","pointerover"]),rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rs("onBeforeInput",["compositionend","keypress","textInput","paste"]),rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function j1(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],m=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var E=u.length-1;0<=E;E--){var C=u[E],L=C.instance,H=C.currentTarget;if(C=C.listener,L!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=H;try{g(m)}catch(re){Qc(re)}m.currentTarget=null,g=L}else for(E=0;E<u.length;E++){if(C=u[E],L=C.instance,H=C.currentTarget,C=C.listener,L!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=H;try{g(m)}catch(re){Qc(re)}m.currentTarget=null,g=L}}}}function Ge(r,i){var o=i[Ms];o===void 0&&(o=i[Ms]=new Set);var u=r+"__bubble";o.has(u)||(D1(i,r,2,!1),o.add(u))}function Sp(r,i,o){var u=0;i&&(u|=4),D1(o,r,u,i)}var hh="_reactListening"+Math.random().toString(36).slice(2);function xp(r){if(!r[hh]){r[hh]=!0,ns.forEach(function(o){o!=="selectionchange"&&(VM.has(o)||Sp(o,!1,r),Sp(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[hh]||(i[hh]=!0,Sp("selectionchange",!1,i))}}function D1(r,i,o,u){switch(rS(i)){case 2:var m=yj;break;case 8:m=vj;break;default:m=$p}o=m.bind(null,i,o,r),m=void 0,!Gf||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(i,o,{capture:!0,passive:m}):r.addEventListener(i,o,!0):m!==void 0?r.addEventListener(i,o,{passive:m}):r.addEventListener(i,o,!1)}function Tp(r,i,o,u,m){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var C=u.stateNode.containerInfo;if(C===m)break;if(E===4)for(E=u.return;E!==null;){var L=E.tag;if((L===3||L===4)&&E.stateNode.containerInfo===m)return;E=E.return}for(;C!==null;){if(E=ts(C),E===null)return;if(L=E.tag,L===5||L===6||L===26||L===27){u=g=E;continue e}C=C.parentNode}}u=u.return}Bb(function(){var H=g,re=Hf(o),oe=[];e:{var F=mw.get(r);if(F!==void 0){var Y=Ec,Ce=r;switch(r){case"keypress":if(xc(o)===0)break e;case"keydown":case"keyup":Y=I2;break;case"focusin":Ce="focus",Y=Xf;break;case"focusout":Ce="blur",Y=Xf;break;case"beforeblur":case"afterblur":Y=Xf;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Hb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=A2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=z2;break;case cw:case hw:case dw:Y=R2;break;case fw:Y=H2;break;case"scroll":case"scrollend":Y=T2;break;case"wheel":Y=G2;break;case"copy":case"cut":case"paste":Y=M2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Gb;break;case"toggle":case"beforetoggle":Y=K2}var Ee=(i&4)!==0,ut=!Ee&&(r==="scroll"||r==="scrollend"),U=Ee?F!==null?F+"Capture":null:F;Ee=[];for(var I=H,q;I!==null;){var ie=I;if(q=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||q===null||U===null||(ie=Vo(I,U),ie!=null&&Ee.push(Al(I,ie,q))),ut)break;I=I.return}0<Ee.length&&(F=new Y(F,Ce,null,o,re),oe.push({event:F,listeners:Ee}))}}if((i&7)===0){e:{if(F=r==="mouseover"||r==="pointerover",Y=r==="mouseout"||r==="pointerout",F&&o!==qf&&(Ce=o.relatedTarget||o.fromElement)&&(ts(Ce)||Ce[jr]))break e;if((Y||F)&&(F=re.window===re?re:(F=re.ownerDocument)?F.defaultView||F.parentWindow:window,Y?(Ce=o.relatedTarget||o.toElement,Y=H,Ce=Ce?ts(Ce):null,Ce!==null&&(ut=l(Ce),Ee=Ce.tag,Ce!==ut||Ee!==5&&Ee!==27&&Ee!==6)&&(Ce=null)):(Y=null,Ce=H),Y!==Ce)){if(Ee=Hb,ie="onMouseLeave",U="onMouseEnter",I="mouse",(r==="pointerout"||r==="pointerover")&&(Ee=Gb,ie="onPointerLeave",U="onPointerEnter",I="pointer"),ut=Y==null?F:Ds(Y),q=Ce==null?F:Ds(Ce),F=new Ee(ie,I+"leave",Y,o,re),F.target=ut,F.relatedTarget=q,ie=null,ts(re)===H&&(Ee=new Ee(U,I+"enter",Ce,o,re),Ee.target=q,Ee.relatedTarget=ut,ie=Ee),ut=ie,Y&&Ce)t:{for(Ee=Y,U=Ce,I=0,q=Ee;q;q=Ha(q))I++;for(q=0,ie=U;ie;ie=Ha(ie))q++;for(;0<I-q;)Ee=Ha(Ee),I--;for(;0<q-I;)U=Ha(U),q--;for(;I--;){if(Ee===U||U!==null&&Ee===U.alternate)break t;Ee=Ha(Ee),U=Ha(U)}Ee=null}else Ee=null;Y!==null&&k1(oe,F,Y,Ee,!1),Ce!==null&&ut!==null&&k1(oe,ut,Ce,Ee,!0)}}e:{if(F=H?Ds(H):window,Y=F.nodeName&&F.nodeName.toLowerCase(),Y==="select"||Y==="input"&&F.type==="file")var be=Zb;else if(Qb(F))if(ew)be=rM;else{be=tM;var qe=eM}else Y=F.nodeName,!Y||Y.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&zf(H.elementType)&&(be=Zb):be=nM;if(be&&(be=be(r,H))){Jb(oe,be,o,re);break e}qe&&qe(r,F,H),r==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&Bf(F,"number",F.value)}switch(qe=H?Ds(H):window,r){case"focusin":(Qb(qe)||qe.contentEditable==="true")&&(ba=qe,tm=H,Jo=null);break;case"focusout":Jo=tm=ba=null;break;case"mousedown":nm=!0;break;case"contextmenu":case"mouseup":case"dragend":nm=!1,lw(oe,o,re);break;case"selectionchange":if(iM)break;case"keydown":case"keyup":lw(oe,o,re)}var _e;if(Qf)e:{switch(r){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else va?Xb(r,o)&&(Ae="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Ae="onCompositionStart");Ae&&(Fb&&o.locale!=="ko"&&(va||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&va&&(_e=zb()):(Ns=re,Ff="value"in Ns?Ns.value:Ns.textContent,va=!0)),qe=dh(H,Ae),0<qe.length&&(Ae=new Vb(Ae,r,null,o,re),oe.push({event:Ae,listeners:qe}),_e?Ae.data=_e:(_e=Wb(o),_e!==null&&(Ae.data=_e)))),(_e=X2?W2(r,o):Q2(r,o))&&(Ae=dh(H,"onBeforeInput"),0<Ae.length&&(qe=new Vb("onBeforeInput","beforeinput",null,o,re),oe.push({event:qe,listeners:Ae}),qe.data=_e)),zM(oe,r,H,o,re)}j1(oe,i)})}function Al(r,i,o){return{instance:r,listener:i,currentTarget:o}}function dh(r,i){for(var o=i+"Capture",u=[];r!==null;){var m=r,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Vo(r,o),m!=null&&u.unshift(Al(r,m,g)),m=Vo(r,i),m!=null&&u.push(Al(r,m,g))),r.tag===3)return u;r=r.return}return[]}function Ha(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function k1(r,i,o,u,m){for(var g=i._reactName,E=[];o!==null&&o!==u;){var C=o,L=C.alternate,H=C.stateNode;if(C=C.tag,L!==null&&L===u)break;C!==5&&C!==26&&C!==27||H===null||(L=H,m?(H=Vo(o,g),H!=null&&E.unshift(Al(o,H,L))):m||(H=Vo(o,g),H!=null&&E.push(Al(o,H,L)))),o=o.return}E.length!==0&&r.push({event:i,listeners:E})}var GM=/\r\n?/g,FM=/\u0000|\uFFFD/g;function N1(r){return(typeof r=="string"?r:""+r).replace(GM,`
`).replace(FM,"")}function L1(r,i){return i=N1(i),N1(r)===i}function fh(){}function lt(r,i,o,u,m,g){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||pa(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&pa(r,""+u);break;case"className":vc(r,"class",u);break;case"tabIndex":vc(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":vc(r,o,u);break;case"style":Ib(r,u,g);break;case"data":if(i!=="object"){vc(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=_c(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&lt(r,i,"name",m.name,m,null),lt(r,i,"formEncType",m.formEncType,m,null),lt(r,i,"formMethod",m.formMethod,m,null),lt(r,i,"formTarget",m.formTarget,m,null)):(lt(r,i,"encType",m.encType,m,null),lt(r,i,"method",m.method,m,null),lt(r,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=_c(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=fh);break;case"onScroll":u!=null&&Ge("scroll",r);break;case"onScrollEnd":u!=null&&Ge("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=_c(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ge("beforetoggle",r),Ge("toggle",r),yc(r,"popover",u);break;case"xlinkActuate":is(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":is(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":is(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":is(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":is(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":is(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":is(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":is(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":is(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":yc(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=S2.get(o)||o,yc(r,o,u))}}function Ep(r,i,o,u,m,g){switch(o){case"style":Ib(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof u=="string"?pa(r,u):(typeof u=="number"||typeof u=="bigint")&&pa(r,""+u);break;case"onScroll":u!=null&&Ge("scroll",r);break;case"onScrollEnd":u!=null&&Ge("scrollend",r);break;case"onClick":u!=null&&(r.onclick=fh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pi.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),g=r[Ut]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(i,g,m),typeof u=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,m);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):yc(r,o,u)}}}function un(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",r),Ge("load",r);var u=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:lt(r,i,g,E,o,null)}}m&&lt(r,i,"srcSet",o.srcSet,o,null),u&&lt(r,i,"src",o.src,o,null);return;case"input":Ge("invalid",r);var C=g=E=m=null,L=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var re=o[u];if(re!=null)switch(u){case"name":m=re;break;case"type":E=re;break;case"checked":L=re;break;case"defaultChecked":H=re;break;case"value":g=re;break;case"defaultValue":C=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,i));break;default:lt(r,i,u,re,o,null)}}kb(r,g,C,L,H,E,m,!1),bc(r);return;case"select":Ge("invalid",r),u=E=g=null;for(m in o)if(o.hasOwnProperty(m)&&(C=o[m],C!=null))switch(m){case"value":g=C;break;case"defaultValue":E=C;break;case"multiple":u=C;default:lt(r,i,m,C,o,null)}i=g,o=E,r.multiple=!!u,i!=null?ma(r,!!u,i,!1):o!=null&&ma(r,!!u,o,!0);return;case"textarea":Ge("invalid",r),g=m=u=null;for(E in o)if(o.hasOwnProperty(E)&&(C=o[E],C!=null))switch(E){case"value":u=C;break;case"defaultValue":m=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:lt(r,i,E,C,o,null)}Lb(r,u,m,g),bc(r);return;case"option":for(L in o)if(o.hasOwnProperty(L)&&(u=o[L],u!=null))switch(L){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:lt(r,i,L,u,o,null)}return;case"dialog":Ge("beforetoggle",r),Ge("toggle",r),Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":Ge("load",r);break;case"video":case"audio":for(u=0;u<El.length;u++)Ge(El[u],r);break;case"image":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"embed":case"source":case"link":Ge("error",r),Ge("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:lt(r,i,H,u,o,null)}return;default:if(zf(i)){for(re in o)o.hasOwnProperty(re)&&(u=o[re],u!==void 0&&Ep(r,i,re,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&lt(r,i,C,u,o,null))}function KM(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,E=null,C=null,L=null,H=null,re=null;for(Y in o){var oe=o[Y];if(o.hasOwnProperty(Y)&&oe!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":L=oe;default:u.hasOwnProperty(Y)||lt(r,i,Y,null,u,oe)}}for(var F in u){var Y=u[F];if(oe=o[F],u.hasOwnProperty(F)&&(Y!=null||oe!=null))switch(F){case"type":g=Y;break;case"name":m=Y;break;case"checked":H=Y;break;case"defaultChecked":re=Y;break;case"value":E=Y;break;case"defaultValue":C=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==oe&&lt(r,i,F,Y,u,oe)}}Uf(r,E,C,L,H,re,g,m);return;case"select":Y=E=C=F=null;for(g in o)if(L=o[g],o.hasOwnProperty(g)&&L!=null)switch(g){case"value":break;case"multiple":Y=L;default:u.hasOwnProperty(g)||lt(r,i,g,null,u,L)}for(m in u)if(g=u[m],L=o[m],u.hasOwnProperty(m)&&(g!=null||L!=null))switch(m){case"value":F=g;break;case"defaultValue":C=g;break;case"multiple":E=g;default:g!==L&&lt(r,i,m,g,u,L)}i=C,o=E,u=Y,F!=null?ma(r,!!o,F,!1):!!u!=!!o&&(i!=null?ma(r,!!o,i,!0):ma(r,!!o,o?[]:"",!1));return;case"textarea":Y=F=null;for(C in o)if(m=o[C],o.hasOwnProperty(C)&&m!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:lt(r,i,C,null,u,m)}for(E in u)if(m=u[E],g=o[E],u.hasOwnProperty(E)&&(m!=null||g!=null))switch(E){case"value":F=m;break;case"defaultValue":Y=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==g&&lt(r,i,E,m,u,g)}Nb(r,F,Y);return;case"option":for(var Ce in o)if(F=o[Ce],o.hasOwnProperty(Ce)&&F!=null&&!u.hasOwnProperty(Ce))switch(Ce){case"selected":r.selected=!1;break;default:lt(r,i,Ce,null,u,F)}for(L in u)if(F=u[L],Y=o[L],u.hasOwnProperty(L)&&F!==Y&&(F!=null||Y!=null))switch(L){case"selected":r.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:lt(r,i,L,F,u,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in o)F=o[Ee],o.hasOwnProperty(Ee)&&F!=null&&!u.hasOwnProperty(Ee)&&lt(r,i,Ee,null,u,F);for(H in u)if(F=u[H],Y=o[H],u.hasOwnProperty(H)&&F!==Y&&(F!=null||Y!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:lt(r,i,H,F,u,Y)}return;default:if(zf(i)){for(var ut in o)F=o[ut],o.hasOwnProperty(ut)&&F!==void 0&&!u.hasOwnProperty(ut)&&Ep(r,i,ut,void 0,u,F);for(re in u)F=u[re],Y=o[re],!u.hasOwnProperty(re)||F===Y||F===void 0&&Y===void 0||Ep(r,i,re,F,u,Y);return}}for(var U in o)F=o[U],o.hasOwnProperty(U)&&F!=null&&!u.hasOwnProperty(U)&&lt(r,i,U,null,u,F);for(oe in u)F=u[oe],Y=o[oe],!u.hasOwnProperty(oe)||F===Y||F==null&&Y==null||lt(r,i,oe,F,u,Y)}var Ap=null,Pp=null;function mh(r){return r.nodeType===9?r:r.ownerDocument}function $1(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function I1(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Cp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Rp=null;function YM(){var r=window.event;return r&&r.type==="popstate"?r===Rp?!1:(Rp=r,!0):(Rp=null,!1)}var U1=typeof setTimeout=="function"?setTimeout:void 0,XM=typeof clearTimeout=="function"?clearTimeout:void 0,B1=typeof Promise=="function"?Promise:void 0,WM=typeof queueMicrotask=="function"?queueMicrotask:typeof B1<"u"?function(r){return B1.resolve(null).then(r).catch(QM)}:U1;function QM(r){setTimeout(function(){throw r})}function Qs(r){return r==="head"}function z1(r,i){var o=i,u=0,m=0;do{var g=o.nextSibling;if(r.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var E=r.ownerDocument;if(o&1&&Pl(E.documentElement),o&2&&Pl(E.body),o&4)for(o=E.head,Pl(o),E=o.firstChild;E;){var C=E.nextSibling,L=E.nodeName;E[js]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=C}}if(m===0){r.removeChild(g),Nl(i);return}m--}else o==="$"||o==="$?"||o==="$!"?m++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);Nl(i)}function Op(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Op(o),Ai(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function JM(r,i,o,u){for(;r.nodeType===1;){var m=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[js])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=wr(r.nextSibling),r===null)break}return null}function ZM(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=wr(r.nextSibling),r===null))return null;return r}function Mp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function ej(r,i){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function wr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var jp=null;function q1(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return r;i--}else o==="/$"&&i++}r=r.previousSibling}return null}function H1(r,i,o){switch(i=mh(o),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Pl(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Ai(r)}var ar=new Map,V1=new Set;function ph(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var bs=ne.d;ne.d={f:tj,r:nj,D:rj,C:sj,L:ij,m:aj,X:lj,S:oj,M:uj};function tj(){var r=bs.f(),i=ah();return r||i}function nj(r){var i=Dr(r);i!==null&&i.tag===5&&i.type==="form"?c_(i):bs.r(r)}var Va=typeof document>"u"?null:document;function G1(r,i,o){var u=Va;if(u&&typeof i=="string"&&i){var m=Zn(i);m='link[rel="'+r+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),V1.has(m)||(V1.add(m),r={rel:r,crossOrigin:o,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),un(i,"link",r),Rt(i),u.head.appendChild(i)))}}function rj(r){bs.D(r),G1("dns-prefetch",r,null)}function sj(r,i){bs.C(r,i),G1("preconnect",r,i)}function ij(r,i,o){bs.L(r,i,o);var u=Va;if(u&&r&&i){var m='link[rel="preload"][as="'+Zn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Zn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Zn(o.imageSizes)+'"]')):m+='[href="'+Zn(r)+'"]';var g=m;switch(i){case"style":g=Ga(r);break;case"script":g=Fa(r)}ar.has(g)||(r=p({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),ar.set(g,r),u.querySelector(m)!==null||i==="style"&&u.querySelector(Cl(g))||i==="script"&&u.querySelector(Rl(g))||(i=u.createElement("link"),un(i,"link",r),Rt(i),u.head.appendChild(i)))}}function aj(r,i){bs.m(r,i);var o=Va;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+Zn(u)+'"][href="'+Zn(r)+'"]',g=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Fa(r)}if(!ar.has(g)&&(r=p({rel:"modulepreload",href:r},i),ar.set(g,r),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Rl(g)))return}u=o.createElement("link"),un(u,"link",r),Rt(u),o.head.appendChild(u)}}}function oj(r,i,o){bs.S(r,i,o);var u=Va;if(u&&r){var m=ks(u).hoistableStyles,g=Ga(r);i=i||"default";var E=m.get(g);if(!E){var C={loading:0,preload:null};if(E=u.querySelector(Cl(g)))C.loading=5;else{r=p({rel:"stylesheet",href:r,"data-precedence":i},o),(o=ar.get(g))&&Dp(r,o);var L=E=u.createElement("link");Rt(L),un(L,"link",r),L._p=new Promise(function(H,re){L.onload=H,L.onerror=re}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,gh(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:C},m.set(g,E)}}}function lj(r,i){bs.X(r,i);var o=Va;if(o&&r){var u=ks(o).hoistableScripts,m=Fa(r),g=u.get(m);g||(g=o.querySelector(Rl(m)),g||(r=p({src:r,async:!0},i),(i=ar.get(m))&&kp(r,i),g=o.createElement("script"),Rt(g),un(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function uj(r,i){bs.M(r,i);var o=Va;if(o&&r){var u=ks(o).hoistableScripts,m=Fa(r),g=u.get(m);g||(g=o.querySelector(Rl(m)),g||(r=p({src:r,async:!0,type:"module"},i),(i=ar.get(m))&&kp(r,i),g=o.createElement("script"),Rt(g),un(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function F1(r,i,o,u){var m=(m=me.current)?ph(m):null;if(!m)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Ga(o.href),o=ks(m).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Ga(o.href);var g=ks(m).hoistableStyles,E=g.get(r);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,E),(g=m.querySelector(Cl(r)))&&!g._p&&(E.instance=g,E.state.loading=5),ar.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ar.set(r,o),g||cj(m,r,o,E.state))),i&&u===null)throw Error(s(528,""));return E}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Fa(o),o=ks(m).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Ga(r){return'href="'+Zn(r)+'"'}function Cl(r){return'link[rel="stylesheet"]['+r+"]"}function K1(r){return p({},r,{"data-precedence":r.precedence,precedence:null})}function cj(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),un(i,"link",o),Rt(i),r.head.appendChild(i))}function Fa(r){return'[src="'+Zn(r)+'"]'}function Rl(r){return"script[async]"+r}function Y1(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Zn(o.href)+'"]');if(u)return i.instance=u,Rt(u),u;var m=p({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Rt(u),un(u,"style",m),gh(u,o.precedence,r),i.instance=u;case"stylesheet":m=Ga(o.href);var g=r.querySelector(Cl(m));if(g)return i.state.loading|=4,i.instance=g,Rt(g),g;u=K1(o),(m=ar.get(m))&&Dp(u,m),g=(r.ownerDocument||r).createElement("link"),Rt(g);var E=g;return E._p=new Promise(function(C,L){E.onload=C,E.onerror=L}),un(g,"link",u),i.state.loading|=4,gh(g,o.precedence,r),i.instance=g;case"script":return g=Fa(o.src),(m=r.querySelector(Rl(g)))?(i.instance=m,Rt(m),m):(u=o,(m=ar.get(g))&&(u=p({},o),kp(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),Rt(m),un(m,"link",u),r.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,gh(u,o.precedence,r));return i.instance}function gh(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,g=m,E=0;E<u.length;E++){var C=u[E];if(C.dataset.precedence===i)g=C;else if(g!==m)break}g?g.parentNode.insertBefore(r,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Dp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function kp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var yh=null;function X1(r,i,o){if(yh===null){var u=new Map,m=yh=new Map;m.set(o,u)}else m=yh,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),m=0;m<o.length;m++){var g=o[m];if(!(g[js]||g[Gt]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(i)||"";E=r+E;var C=u.get(E);C?C.push(g):u.set(E,[g])}}return u}function W1(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function hj(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Q1(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Ol=null;function dj(){}function fj(r,i,o){if(Ol===null)throw Error(s(475));var u=Ol;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var m=Ga(o.href),g=r.querySelector(Cl(m));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=vh.bind(u),r.then(u,u)),i.state.loading|=4,i.instance=g,Rt(g);return}g=r.ownerDocument||r,o=K1(o),(m=ar.get(m))&&Dp(o,m),g=g.createElement("link"),Rt(g);var E=g;E._p=new Promise(function(C,L){E.onload=C,E.onerror=L}),un(g,"link",o),i.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=vh.bind(u),r.addEventListener("load",i),r.addEventListener("error",i))}}function mj(){if(Ol===null)throw Error(s(475));var r=Ol;return r.stylesheets&&r.count===0&&Np(r,r.stylesheets),0<r.count?function(i){var o=setTimeout(function(){if(r.stylesheets&&Np(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(o)}}:null}function vh(){if(this.count--,this.count===0){if(this.stylesheets)Np(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var bh=null;function Np(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,bh=new Map,i.forEach(pj,r),bh=null,vh.call(r))}function pj(r,i){if(!(i.state.loading&4)){var o=bh.get(r);if(o)var u=o.get(null);else{o=new Map,bh.set(r,o);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var E=m[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}m=i.instance,E=m.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,m),o.set(E,m),this.count++,u=vh.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),g?g.parentNode.insertBefore(m,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),i.state.loading|=4}}var Ml={$$typeof:P,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function gj(r,i,o,u,m,g,E,C){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Le(0),this.hiddenUpdates=Le(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function J1(r,i,o,u,m,g,E,C,L,H,re,oe){return r=new gj(r,i,o,E,C,L,H,oe),i=1,g===!0&&(i|=24),g=Un(3,null,null,i),r.current=g,g.stateNode=r,i=gm(),i.refCount++,r.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:i},wm(g),r}function Z1(r){return r?(r=xa,r):xa}function eS(r,i,o,u,m,g){m=Z1(m),u.context===null?u.context=m:u.pendingContext=m,u=Is(i),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Us(r,u,i),o!==null&&(Vn(o,r,i),ol(o,r,i))}function tS(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Lp(r,i){tS(r,i),(r=r.alternate)&&tS(r,i)}function nS(r){if(r.tag===13){var i=Sa(r,67108864);i!==null&&Vn(i,r,67108864),Lp(r,67108864)}}var wh=!0;function yj(r,i,o,u){var m=V.T;V.T=null;var g=ne.p;try{ne.p=2,$p(r,i,o,u)}finally{ne.p=g,V.T=m}}function vj(r,i,o,u){var m=V.T;V.T=null;var g=ne.p;try{ne.p=8,$p(r,i,o,u)}finally{ne.p=g,V.T=m}}function $p(r,i,o,u){if(wh){var m=Ip(u);if(m===null)Tp(r,i,u,_h,o),sS(r,u);else if(wj(m,r,i,o,u))u.stopPropagation();else if(sS(r,u),i&4&&-1<bj.indexOf(r)){for(;m!==null;){var g=Dr(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=Qn(g.pendingLanes);if(E!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;E;){var L=1<<31-Ct(E);C.entanglements[1]|=L,E&=~L}Ir(g),(rt&6)===0&&(sh=Ye()+500,Tl(0))}}break;case 13:C=Sa(g,2),C!==null&&Vn(C,g,2),ah(),Lp(g,2)}if(g=Ip(u),g===null&&Tp(r,i,u,_h,o),g===m)break;m=g}m!==null&&u.stopPropagation()}else Tp(r,i,u,null,o)}}function Ip(r){return r=Hf(r),Up(r)}var _h=null;function Up(r){if(_h=null,r=ts(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return _h=r,null}function rS(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xt()){case _n:return 2;case fn:return 8;case It:case mr:return 32;case Cn:return 268435456;default:return 32}default:return 32}}var Bp=!1,Js=null,Zs=null,ei=null,jl=new Map,Dl=new Map,ti=[],bj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sS(r,i){switch(r){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":jl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dl.delete(i.pointerId)}}function kl(r,i,o,u,m,g){return r===null||r.nativeEvent!==g?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[m]},i!==null&&(i=Dr(i),i!==null&&nS(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),r)}function wj(r,i,o,u,m){switch(i){case"focusin":return Js=kl(Js,r,i,o,u,m),!0;case"dragenter":return Zs=kl(Zs,r,i,o,u,m),!0;case"mouseover":return ei=kl(ei,r,i,o,u,m),!0;case"pointerover":var g=m.pointerId;return jl.set(g,kl(jl.get(g)||null,r,i,o,u,m)),!0;case"gotpointercapture":return g=m.pointerId,Dl.set(g,kl(Dl.get(g)||null,r,i,o,u,m)),!0}return!1}function iS(r){var i=ts(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,gc(r.priority,function(){if(o.tag===13){var u=Hn();u=Ei(u);var m=Sa(o,u);m!==null&&Vn(m,o,u),Lp(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Sh(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Ip(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);qf=u,o.target.dispatchEvent(u),qf=null}else return i=Dr(o),i!==null&&nS(i),r.blockedOn=o,!1;i.shift()}return!0}function aS(r,i,o){Sh(r)&&o.delete(i)}function _j(){Bp=!1,Js!==null&&Sh(Js)&&(Js=null),Zs!==null&&Sh(Zs)&&(Zs=null),ei!==null&&Sh(ei)&&(ei=null),jl.forEach(aS),Dl.forEach(aS)}function xh(r,i){r.blockedOn===i&&(r.blockedOn=null,Bp||(Bp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,_j)))}var Th=null;function oS(r){Th!==r&&(Th=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Th===r&&(Th=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],m=r[i+2];if(typeof u!="function"){if(Up(u||o)===null)continue;break}var g=Dr(o);g!==null&&(r.splice(i,3),i-=3,Um(g,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Nl(r){function i(L){return xh(L,r)}Js!==null&&xh(Js,r),Zs!==null&&xh(Zs,r),ei!==null&&xh(ei,r),jl.forEach(i),Dl.forEach(i);for(var o=0;o<ti.length;o++){var u=ti[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ti.length&&(o=ti[0],o.blockedOn===null);)iS(o),o.blockedOn===null&&ti.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],g=o[u+1],E=m[Ut]||null;if(typeof g=="function")E||oS(o);else if(E){var C=null;if(g&&g.hasAttribute("formAction")){if(m=g,E=g[Ut]||null)C=E.formAction;else if(Up(m)!==null)continue}else C=E.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),oS(o)}}}function zp(r){this._internalRoot=r}Eh.prototype.render=zp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=Hn();eS(o,u,r,i,null,null)},Eh.prototype.unmount=zp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;eS(r.current,2,null,r,null,null),ah(),i[jr]=null}};function Eh(r){this._internalRoot=r}Eh.prototype.unstable_scheduleHydration=function(r){if(r){var i=On();r={blockedOn:null,target:r,priority:i};for(var o=0;o<ti.length&&i!==0&&i<ti[o].priority;o++);ti.splice(o,0,r),o===0&&iS(r)}};var lS=e.version;if(lS!=="19.1.0")throw Error(s(527,lS,"19.1.0"));ne.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=d(i),r=r!==null?f(r):null,r=r===null?null:r.stateNode,r};var Sj={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{Or=Ah.inject(Sj),Vt=Ah}catch{}}return $l.createRoot=function(r,i){if(!a(r))throw Error(s(299));var o=!1,u="",m=T_,g=E_,E=A_,C=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(C=i.unstable_transitionCallbacks)),i=J1(r,1,!1,null,null,o,u,m,g,E,C,null),r[jr]=i.current,xp(r),new zp(i)},$l.hydrateRoot=function(r,i,o){if(!a(r))throw Error(s(299));var u=!1,m="",g=T_,E=E_,C=A_,L=null,H=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(L=o.unstable_transitionCallbacks),o.formState!==void 0&&(H=o.formState)),i=J1(r,1,!0,i,o??null,u,m,g,E,C,L,H),i.context=Z1(null),o=i.current,u=Hn(),u=Ei(u),m=Is(u),m.callback=null,Us(o,m,u),o=u,i.current.lanes=o,Rn(i,o),Ir(i),r[jr]=i.current,xp(r),new Eh(i)},$l.version="19.1.0",$l}var bS;function Mj(){if(bS)return Vp.exports;bS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Vp.exports=Oj(),Vp.exports}var jj=Mj(),Il={},wS;function Dj(){if(wS)return Il;wS=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.parse=c,Il.serialize=f;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function c(v,b){const S=new l,A=v.length;if(A<2)return S;const w=(b==null?void 0:b.decode)||p;let _=0;do{const x=v.indexOf("=",_);if(x===-1)break;const P=v.indexOf(";",_),O=P===-1?A:P;if(x>O){_=v.lastIndexOf(";",x-1)+1;continue}const R=h(v,_,x),M=d(v,x,R),j=v.slice(R,M);if(S[j]===void 0){let $=h(v,x+1,O),z=d(v,O,$);const B=w(v.slice($,z));S[j]=B}_=O+1}while(_<A);return S}function h(v,b,S){do{const A=v.charCodeAt(b);if(A!==32&&A!==9)return b}while(++b<S);return S}function d(v,b,S){for(;b>S;){const A=v.charCodeAt(--b);if(A!==32&&A!==9)return b+1}return S}function f(v,b,S){const A=(S==null?void 0:S.encode)||encodeURIComponent;if(!t.test(v))throw new TypeError(`argument name is invalid: ${v}`);const w=A(b);if(!e.test(w))throw new TypeError(`argument val is invalid: ${b}`);let _=v+"="+w;if(!S)return _;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);_+="; Max-Age="+S.maxAge}if(S.domain){if(!n.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);_+="; Domain="+S.domain}if(S.path){if(!s.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);_+="; Path="+S.path}if(S.expires){if(!y(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);_+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(_+="; HttpOnly"),S.secure&&(_+="; Secure"),S.partitioned&&(_+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return _}function p(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function y(v){return a.call(v)==="[object Date]"}return Il}Dj();var _S="popstate";function kj(t={}){function e(s,a){let{pathname:l,search:c,hash:h}=s.location;return zy("",{pathname:l,search:c,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:$u(a)}return Lj(e,n,null,t)}function _t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Pr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Nj(){return Math.random().toString(36).substring(2,10)}function SS(t,e){return{usr:t.state,key:t.key,idx:e}}function zy(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Oo(e):e,state:n,key:e&&e.key||s||Nj()}}function $u({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Oo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function Lj(t,e,n,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,c=a.history,h="POP",d=null,f=p();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function p(){return(c.state||{idx:null}).idx}function y(){h="POP";let w=p(),_=w==null?null:w-f;f=w,d&&d({action:h,location:A.location,delta:_})}function v(w,_){h="PUSH";let x=zy(A.location,w,_);f=p()+1;let P=SS(x,f),O=A.createHref(x);try{c.pushState(P,"",O)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(O)}l&&d&&d({action:h,location:A.location,delta:1})}function b(w,_){h="REPLACE";let x=zy(A.location,w,_);f=p();let P=SS(x,f),O=A.createHref(x);c.replaceState(P,"",O),l&&d&&d({action:h,location:A.location,delta:0})}function S(w){return $j(w)}let A={get action(){return h},get location(){return t(a,c)},listen(w){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(_S,y),d=w,()=>{a.removeEventListener(_S,y),d=null}},createHref(w){return e(a,w)},createURL:S,encodeLocation(w){let _=S(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:b,go(w){return c.go(w)}};return A}function $j(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_t(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:$u(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function kA(t,e,n="/"){return Ij(t,e,n,!1)}function Ij(t,e,n,s){let a=typeof e=="string"?Oo(e):e,l=Ps(a.pathname||"/",n);if(l==null)return null;let c=NA(t);Uj(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let f=Wj(l);h=Yj(c[d],f,s)}return h}function NA(t,e=[],n=[],s=""){let a=(l,c,h)=>{let d={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};d.relativePath.startsWith("/")&&(_t(d.relativePath.startsWith(s),`Absolute route path "${d.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(s.length));let f=As([s,d.relativePath]),p=n.concat(d);l.children&&l.children.length>0&&(_t(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),NA(l.children,e,p,f)),!(l.path==null&&!l.index)&&e.push({path:f,score:Fj(f,l.index),routesMeta:p})};return t.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))a(l,c);else for(let d of LA(l.path))a(l,c,d)}),e}function LA(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let c=LA(s.join("/")),h=[];return h.push(...c.map(d=>d===""?l:[l,d].join("/"))),a&&h.push(...c),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function Uj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Kj(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Bj=/^:[\w-]+$/,zj=3,qj=2,Hj=1,Vj=10,Gj=-2,xS=t=>t==="*";function Fj(t,e){let n=t.split("/"),s=n.length;return n.some(xS)&&(s+=Gj),e&&(s+=qj),n.filter(a=>!xS(a)).reduce((a,l)=>a+(Bj.test(l)?zj:l===""?Hj:Vj),s)}function Kj(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function Yj(t,e,n=!1){let{routesMeta:s}=t,a={},l="/",c=[];for(let h=0;h<s.length;++h){let d=s[h],f=h===s.length-1,p=l==="/"?e:e.slice(l.length)||"/",y=Vd({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),v=d.route;if(!y&&f&&n&&!s[s.length-1].route.index&&(y=Vd({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:As([l,y.pathname]),pathnameBase:eD(As([l,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(l=As([l,y.pathnameBase]))}return c}function Vd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=Xj(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:s.reduce((f,{paramName:p,isOptional:y},v)=>{if(p==="*"){let S=h[v]||"";c=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const b=h[v];return y&&!b?f[p]=void 0:f[p]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:t}}function Xj(t,e=!1,n=!0){Pr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(s.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function Wj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ps(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function Qj(t,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?Oo(t):t;return{pathname:n?n.startsWith("/")?n:Jj(n,e):e,search:tD(s),hash:nD(a)}}function Jj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Yp(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Zj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Hv(t){let e=Zj(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Vv(t,e,n,s=!1){let a;typeof t=="string"?a=Oo(t):(a={...t},_t(!a.pathname||!a.pathname.includes("?"),Yp("?","pathname","search",a)),_t(!a.pathname||!a.pathname.includes("#"),Yp("#","pathname","hash",a)),_t(!a.search||!a.search.includes("#"),Yp("#","search","hash",a)));let l=t===""||a.pathname==="",c=l?"/":a.pathname,h;if(c==null)h=n;else{let y=e.length-1;if(!s&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;a.pathname=v.join("/")}h=y>=0?e[y]:"/"}let d=Qj(a,h),f=c&&c!=="/"&&c.endsWith("/"),p=(l||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var As=t=>t.join("/").replace(/\/\/+/g,"/"),eD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),tD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function rD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var $A=["POST","PUT","PATCH","DELETE"];new Set($A);var sD=["GET",...$A];new Set(sD);var Mo=k.createContext(null);Mo.displayName="DataRouter";var df=k.createContext(null);df.displayName="DataRouterState";var IA=k.createContext({isTransitioning:!1});IA.displayName="ViewTransition";var iD=k.createContext(new Map);iD.displayName="Fetchers";var aD=k.createContext(null);aD.displayName="Await";var Rr=k.createContext(null);Rr.displayName="Navigation";var Zu=k.createContext(null);Zu.displayName="Location";var Qr=k.createContext({outlet:null,matches:[],isDataRoute:!1});Qr.displayName="Route";var Gv=k.createContext(null);Gv.displayName="RouteError";function oD(t,{relative:e}={}){_t(jo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=k.useContext(Rr),{hash:a,pathname:l,search:c}=ec(t,{relative:e}),h=l;return n!=="/"&&(h=l==="/"?n:As([n,l])),s.createHref({pathname:h,search:c,hash:a})}function jo(){return k.useContext(Zu)!=null}function Jr(){return _t(jo(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Zu).location}var UA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BA(t){k.useContext(Rr).static||k.useLayoutEffect(t)}function Fv(){let{isDataRoute:t}=k.useContext(Qr);return t?wD():lD()}function lD(){_t(jo(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext(Mo),{basename:e,navigator:n}=k.useContext(Rr),{matches:s}=k.useContext(Qr),{pathname:a}=Jr(),l=JSON.stringify(Hv(s)),c=k.useRef(!1);return BA(()=>{c.current=!0}),k.useCallback((d,f={})=>{if(Pr(c.current,UA),!c.current)return;if(typeof d=="number"){n.go(d);return}let p=Vv(d,JSON.parse(l),a,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:As([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,l,a,t])}k.createContext(null);function ec(t,{relative:e}={}){let{matches:n}=k.useContext(Qr),{pathname:s}=Jr(),a=JSON.stringify(Hv(n));return k.useMemo(()=>Vv(t,JSON.parse(a),s,e==="path"),[t,a,s,e])}function uD(t,e){return zA(t,e)}function zA(t,e,n,s){var _;_t(jo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=k.useContext(Rr),{matches:l}=k.useContext(Qr),c=l[l.length-1],h=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",p=c&&c.route;{let x=p&&p.path||"";qA(d,!p||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let y=Jr(),v;if(e){let x=typeof e=="string"?Oo(e):e;_t(f==="/"||((_=x.pathname)==null?void 0:_.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${x.pathname}" was given in the \`location\` prop.`),v=x}else v=y;let b=v.pathname||"/",S=b;if(f!=="/"){let x=f.replace(/^\//,"").split("/");S="/"+b.replace(/^\//,"").split("/").slice(x.length).join("/")}let A=kA(t,{pathname:S});Pr(p||A!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Pr(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=mD(A&&A.map(x=>Object.assign({},x,{params:Object.assign({},h,x.params),pathname:As([f,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?f:As([f,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),l,n,s);return e&&w?k.createElement(Zu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},w):w}function cD(){let t=bD(),e=rD(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:l},"ErrorBoundary")," or"," ",k.createElement("code",{style:l},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:a},n):null,c)}var hD=k.createElement(cD,null),dD=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?k.createElement(Qr.Provider,{value:this.props.routeContext},k.createElement(Gv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fD({routeContext:t,match:e,children:n}){let s=k.useContext(Mo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Qr.Provider,{value:t},n)}function mD(t,e=[],n=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=n==null?void 0:n.errors;if(l!=null){let d=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);_t(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,h=-1;if(n)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=d),f.route.id){let{loaderData:p,errors:y}=n,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||v){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((d,f,p)=>{let y,v=!1,b=null,S=null;n&&(y=l&&f.route.id?l[f.route.id]:void 0,b=f.route.errorElement||hD,c&&(h<0&&p===0?(qA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,S=null):h===p&&(v=!0,S=f.route.hydrateFallbackElement||null)));let A=e.concat(a.slice(0,p+1)),w=()=>{let _;return y?_=b:v?_=S:f.route.Component?_=k.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=d,k.createElement(fD,{match:f,routeContext:{outlet:d,matches:A,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?k.createElement(dD,{location:n.location,revalidation:n.revalidation,component:b,error:y,children:w(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):w()},null)}function Kv(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pD(t){let e=k.useContext(Mo);return _t(e,Kv(t)),e}function gD(t){let e=k.useContext(df);return _t(e,Kv(t)),e}function yD(t){let e=k.useContext(Qr);return _t(e,Kv(t)),e}function Yv(t){let e=yD(t),n=e.matches[e.matches.length-1];return _t(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function vD(){return Yv("useRouteId")}function bD(){var s;let t=k.useContext(Gv),e=gD("useRouteError"),n=Yv("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function wD(){let{router:t}=pD("useNavigate"),e=Yv("useNavigate"),n=k.useRef(!1);return BA(()=>{n.current=!0}),k.useCallback(async(a,l={})=>{Pr(n.current,UA),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...l}))},[t,e])}var TS={};function qA(t,e,n){!e&&!TS[t]&&(TS[t]=!0,Pr(!1,n))}k.memo(_D);function _D({routes:t,future:e,state:n}){return zA(t,void 0,n,e)}function SD({to:t,replace:e,state:n,relative:s}){_t(jo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=k.useContext(Rr);Pr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=k.useContext(Qr),{pathname:c}=Jr(),h=Fv(),d=Vv(t,Hv(l),c,s==="path"),f=JSON.stringify(d);return k.useEffect(()=>{h(JSON.parse(f),{replace:e,state:n,relative:s})},[h,f,s,e,n]),null}function xd(t){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xD({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:l=!1}){_t(!jo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof n=="string"&&(n=Oo(n));let{pathname:d="/",search:f="",hash:p="",state:y=null,key:v="default"}=n,b=k.useMemo(()=>{let S=Ps(d,c);return S==null?null:{location:{pathname:S,search:f,hash:p,state:y,key:v},navigationType:s}},[c,d,f,p,y,v,s]);return Pr(b!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:k.createElement(Rr.Provider,{value:h},k.createElement(Zu.Provider,{children:e,value:b}))}function TD({children:t,location:e}){return uD(qy(t),e)}function qy(t,e=[]){let n=[];return k.Children.forEach(t,(s,a)=>{if(!k.isValidElement(s))return;let l=[...e,a];if(s.type===k.Fragment){n.push.apply(n,qy(s.props.children,l));return}_t(s.type===xd,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=qy(s.props.children,l)),n.push(c)}),n}var Td="get",Ed="application/x-www-form-urlencoded";function ff(t){return t!=null&&typeof t.tagName=="string"}function ED(t){return ff(t)&&t.tagName.toLowerCase()==="button"}function AD(t){return ff(t)&&t.tagName.toLowerCase()==="form"}function PD(t){return ff(t)&&t.tagName.toLowerCase()==="input"}function CD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function RD(t,e){return t.button===0&&(!e||e==="_self")&&!CD(t)}var Ph=null;function OD(){if(Ph===null)try{new FormData(document.createElement("form"),0),Ph=!1}catch{Ph=!0}return Ph}var MD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xp(t){return t!=null&&!MD.has(t)?(Pr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ed}"`),null):t}function jD(t,e){let n,s,a,l,c;if(AD(t)){let h=t.getAttribute("action");s=h?Ps(h,e):null,n=t.getAttribute("method")||Td,a=Xp(t.getAttribute("enctype"))||Ed,l=new FormData(t)}else if(ED(t)||PD(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||h.getAttribute("action");if(s=d?Ps(d,e):null,n=t.getAttribute("formmethod")||h.getAttribute("method")||Td,a=Xp(t.getAttribute("formenctype"))||Xp(h.getAttribute("enctype"))||Ed,l=new FormData(h,t),!OD()){let{name:f,type:p,value:y}=t;if(p==="image"){let v=f?`${f}.`:"";l.append(`${v}x`,"0"),l.append(`${v}y`,"0")}else f&&l.append(f,y)}}else{if(ff(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Td,s=null,a=Ed,c=t}return l&&a==="text/plain"&&(c=l,l=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:l,body:c}}function Xv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function DD(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kD(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ND(t,e,n){let s=await Promise.all(t.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await DD(l,n);return c.links?c.links():[]}return[]}));return UD(s.flat(1).filter(kD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function ES(t,e,n,s,a,l){let c=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,h=(d,f)=>{var p;return n[f].pathname!==d.pathname||((p=n[f].route.path)==null?void 0:p.endsWith("*"))&&n[f].params["*"]!==d.params["*"]};return l==="assets"?e.filter((d,f)=>c(d,f)||h(d,f)):l==="data"?e.filter((d,f)=>{var y;let p=s.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(c(d,f)||h(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function LD(t,e,{includeHydrateFallback:n}={}){return $D(t.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function $D(t){return[...new Set(t)]}function ID(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function UD(t,e){let n=new Set;return new Set(e),t.reduce((s,a)=>{let l=JSON.stringify(ID(a));return n.has(l)||(n.add(l),s.push({key:l,link:a})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var BD=new Set([100,101,204,205]);function zD(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Ps(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function HA(){let t=k.useContext(Mo);return Xv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function qD(){let t=k.useContext(df);return Xv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Wv=k.createContext(void 0);Wv.displayName="FrameworkContext";function VA(){let t=k.useContext(Wv);return Xv(t,"You must render this element inside a <HydratedRouter> element"),t}function HD(t,e){let n=k.useContext(Wv),[s,a]=k.useState(!1),[l,c]=k.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:y}=e,v=k.useRef(null);k.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let A=_=>{_.forEach(x=>{c(x.isIntersecting)})},w=new IntersectionObserver(A,{threshold:.5});return v.current&&w.observe(v.current),()=>{w.disconnect()}}},[t]),k.useEffect(()=>{if(s){let A=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(A)}}},[s]);let b=()=>{a(!0)},S=()=>{a(!1),c(!1)};return n?t!=="intent"?[l,v,{}]:[l,v,{onFocus:Ul(h,b),onBlur:Ul(d,S),onMouseEnter:Ul(f,b),onMouseLeave:Ul(p,S),onTouchStart:Ul(y,b)}]:[!1,v,{}]}function Ul(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function VD({page:t,...e}){let{router:n}=HA(),s=k.useMemo(()=>kA(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?k.createElement(FD,{page:t,matches:s,...e}):null}function GD(t){let{manifest:e,routeModules:n}=VA(),[s,a]=k.useState([]);return k.useEffect(()=>{let l=!1;return ND(t,e,n).then(c=>{l||a(c)}),()=>{l=!0}},[t,e,n]),s}function FD({page:t,matches:e,...n}){let s=Jr(),{manifest:a,routeModules:l}=VA(),{basename:c}=HA(),{loaderData:h,matches:d}=qD(),f=k.useMemo(()=>ES(t,e,d,a,s,"data"),[t,e,d,a,s]),p=k.useMemo(()=>ES(t,e,d,a,s,"assets"),[t,e,d,a,s]),y=k.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let S=new Set,A=!1;if(e.forEach(_=>{var P;let x=a.routes[_.route.id];!x||!x.hasLoader||(!f.some(O=>O.route.id===_.route.id)&&_.route.id in h&&((P=l[_.route.id])!=null&&P.shouldRevalidate)||x.hasClientLoader?A=!0:S.add(_.route.id))}),S.size===0)return[];let w=zD(t,c);return A&&S.size>0&&w.searchParams.set("_routes",e.filter(_=>S.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[c,h,s,a,f,e,t,l]),v=k.useMemo(()=>LD(p,a),[p,a]),b=GD(p);return k.createElement(k.Fragment,null,y.map(S=>k.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),v.map(S=>k.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),b.map(({key:S,link:A})=>k.createElement("link",{key:S,...A})))}function KD(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var GA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{GA&&(window.__reactRouterVersion="7.6.2")}catch{}function YD({basename:t,children:e,window:n}){let s=k.useRef();s.current==null&&(s.current=kj({window:n,v5Compat:!0}));let a=s.current,[l,c]=k.useState({action:a.action,location:a.location}),h=k.useCallback(d=>{k.startTransition(()=>c(d))},[c]);return k.useLayoutEffect(()=>a.listen(h),[a,h]),k.createElement(xD,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:a})}var FA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KA=k.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,state:h,target:d,to:f,preventScrollReset:p,viewTransition:y,...v},b){let{basename:S}=k.useContext(Rr),A=typeof f=="string"&&FA.test(f),w,_=!1;if(typeof f=="string"&&A&&(w=f,GA))try{let z=new URL(window.location.href),B=f.startsWith("//")?new URL(z.protocol+f):new URL(f),te=Ps(B.pathname,S);B.origin===z.origin&&te!=null?f=te+B.search+B.hash:_=!0}catch{Pr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=oD(f,{relative:a}),[P,O,R]=HD(s,v),M=JD(f,{replace:c,state:h,target:d,preventScrollReset:p,relative:a,viewTransition:y});function j(z){e&&e(z),z.defaultPrevented||M(z)}let $=k.createElement("a",{...v,...R,href:w||x,onClick:_||l?e:j,ref:KD(b,O),target:d,"data-discover":!A&&n==="render"?"true":void 0});return P&&!A?k.createElement(k.Fragment,null,$,k.createElement(VD,{page:x})):$});KA.displayName="Link";var XD=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:h,children:d,...f},p){let y=ec(c,{relative:f.relative}),v=Jr(),b=k.useContext(df),{navigator:S,basename:A}=k.useContext(Rr),w=b!=null&&rk(y)&&h===!0,_=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,x=v.pathname,P=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(x=x.toLowerCase(),P=P?P.toLowerCase():null,_=_.toLowerCase()),P&&A&&(P=Ps(P,A)||P);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let R=x===_||!a&&x.startsWith(_)&&x.charAt(O)==="/",M=P!=null&&(P===_||!a&&P.startsWith(_)&&P.charAt(_.length)==="/"),j={isActive:R,isPending:M,isTransitioning:w},$=R?e:void 0,z;typeof s=="function"?z=s(j):z=[s,R?"active":null,M?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let B=typeof l=="function"?l(j):l;return k.createElement(KA,{...f,"aria-current":$,className:z,ref:p,style:B,to:c,viewTransition:h},typeof d=="function"?d(j):d)});XD.displayName="NavLink";var WD=k.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:l,method:c=Td,action:h,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:y,...v},b)=>{let S=tk(),A=nk(h,{relative:f}),w=c.toLowerCase()==="get"?"get":"post",_=typeof h=="string"&&FA.test(h),x=P=>{if(d&&d(P),P.defaultPrevented)return;P.preventDefault();let O=P.nativeEvent.submitter,R=(O==null?void 0:O.getAttribute("formmethod"))||c;S(O||P.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:a,state:l,relative:f,preventScrollReset:p,viewTransition:y})};return k.createElement("form",{ref:b,method:w,action:A,onSubmit:s?d:x,...v,"data-discover":!_&&t==="render"?"true":void 0})});WD.displayName="Form";function QD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YA(t){let e=k.useContext(Mo);return _t(e,QD(t)),e}function JD(t,{target:e,replace:n,state:s,preventScrollReset:a,relative:l,viewTransition:c}={}){let h=Fv(),d=Jr(),f=ec(t,{relative:l});return k.useCallback(p=>{if(RD(p,e)){p.preventDefault();let y=n!==void 0?n:$u(d)===$u(f);h(t,{replace:y,state:s,preventScrollReset:a,relative:l,viewTransition:c})}},[d,h,f,n,s,e,t,a,l,c])}var ZD=0,ek=()=>`__${String(++ZD)}__`;function tk(){let{router:t}=YA("useSubmit"),{basename:e}=k.useContext(Rr),n=vD();return k.useCallback(async(s,a={})=>{let{action:l,method:c,encType:h,formData:d,body:f}=jD(s,e);if(a.navigate===!1){let p=a.fetcherKey||ek();await t.fetch(p,n,a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||h,flushSync:a.flushSync})}else await t.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function nk(t,{relative:e}={}){let{basename:n}=k.useContext(Rr),s=k.useContext(Qr);_t(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...ec(t||".",{relative:e})},c=Jr();if(t==null){l.search=c.search;let h=new URLSearchParams(l.search),d=h.getAll("index");if(d.some(p=>p==="")){h.delete("index"),d.filter(y=>y).forEach(y=>h.append("index",y));let p=h.toString();l.search=p?`?${p}`:""}}return(!t||t===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:As([n,l.pathname])),$u(l)}function rk(t,e={}){let n=k.useContext(IA);_t(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=YA("useViewTransitionState"),a=ec(t,{relative:e.relative});if(!n.isTransitioning)return!1;let l=Ps(n.currentLocation.pathname,s)||n.currentLocation.pathname,c=Ps(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Vd(a.pathname,c)!=null||Vd(a.pathname,l)!=null}[...BD];var sk=DA();const ik=zv(sk),ak="modulepreload",ok=function(t){return"/"+t},AS={},tc=function(e,n,s){let a=Promise.resolve();if(n&&n.length>0){let c=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=c(n.map(f=>{if(f=ok(f),f in AS)return;AS[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":ak,p||(v.as="script"),v.crossOrigin="",v.href=f,d&&v.setAttribute("nonce",d),document.head.appendChild(v),p)return new Promise((b,S)=>{v.addEventListener("load",b),v.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return a.then(c=>{for(const h of c||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},lk=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>tc(async()=>{const{default:s}=await Promise.resolve().then(()=>Do);return{default:s}},[]).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class Qv extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class uk extends Qv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ck extends Qv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class hk extends Qv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Hy;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Hy||(Hy={}));var dk=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function h(p){try{f(s.next(p))}catch(y){c(y)}}function d(p){try{f(s.throw(p))}catch(y){c(y)}}function f(p){p.done?l(p.value):a(p.value).then(h,d)}f((s=s.apply(t,e||[])).next())})};class fk{constructor(e,{headers:n={},customFetch:s,region:a=Hy.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=lk(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var s;return dk(this,void 0,void 0,function*(){try{const{headers:a,method:l,body:c}=n;let h={},{region:d}=n;d||(d=this.region),d&&d!=="any"&&(h["x-region"]=d);let f;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",f=c):typeof c=="string"?(h["Content-Type"]="text/plain",f=c):typeof FormData<"u"&&c instanceof FormData?f=c:(h["Content-Type"]="application/json",f=JSON.stringify(c)));const p=yield this.fetch(`${this.url}/${e}`,{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:f}).catch(S=>{throw new uk(S)}),y=p.headers.get("x-relay-error");if(y&&y==="true")throw new ck(p);if(!p.ok)throw new hk(p);let v=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return v==="application/json"?b=yield p.json():v==="application/octet-stream"?b=yield p.blob():v==="text/event-stream"?b=p:v==="multipart/form-data"?b=yield p.formData():b=yield p.text(),{data:b,error:null}}catch(a){return{data:null,error:a}}})}}var tn={},Ka={},Ya={},Xa={},Wa={},Qa={},mk=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ao=mk();const pk=Ao.fetch,XA=Ao.fetch.bind(Ao),WA=Ao.Headers,gk=Ao.Request,yk=Ao.Response,Do=Object.freeze(Object.defineProperty({__proto__:null,Headers:WA,Request:gk,Response:yk,default:XA,fetch:pk},Symbol.toStringTag,{value:"Module"})),vk=jA(Do);var Ch={},PS;function QA(){if(PS)return Ch;PS=1,Object.defineProperty(Ch,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Ch.default=t,Ch}var CS;function JA(){if(CS)return Qa;CS=1;var t=Qa&&Qa.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Qa,"__esModule",{value:!0});const e=t(vk),n=t(QA());class s{constructor(l){this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=l.headers,this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=l.shouldThrowOnError,this.signal=l.signal,this.isMaybeSingle=l.isMaybeSingle,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,c){return this.headers=Object.assign({},this.headers),this.headers[l]=c,this}then(l,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const h=this.fetch;let d=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var p,y,v;let b=null,S=null,A=null,w=f.status,_=f.statusText;if(f.ok){if(this.method!=="HEAD"){const R=await f.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=R:S=JSON.parse(R))}const P=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),O=(y=f.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");P&&O&&O.length>1&&(A=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,A=null,w=406,_="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const P=await f.text();try{b=JSON.parse(P),Array.isArray(b)&&f.status===404&&(S=[],b=null,w=200,_="OK")}catch{f.status===404&&P===""?(w=204,_="No Content"):b={message:P}}if(b&&this.isMaybeSingle&&(!((v=b==null?void 0:b.details)===null||v===void 0)&&v.includes("0 rows"))&&(b=null,w=200,_="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:S,count:A,status:w,statusText:_}});return this.shouldThrowOnError||(d=d.catch(f=>{var p,y,v;return{error:{message:`${(p=f==null?void 0:f.name)!==null&&p!==void 0?p:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(y=f==null?void 0:f.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(l,c)}returns(){return this}overrideTypes(){return this}}return Qa.default=s,Qa}var RS;function ZA(){if(RS)return Wa;RS=1;var t=Wa&&Wa.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Wa,"__esModule",{value:!0});const e=t(JA());class n extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",c),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:h,referencedTable:d=h}={}){const f=d?`${d}.order`:"order",p=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${p?`${p},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(h,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:h=c}={}){const d=typeof h>"u"?"offset":`${h}.offset`,f=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(d,`${a}`),this.url.searchParams.set(f,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:h=!1,wal:d=!1,format:f="text"}={}){var p;const y=[a?"analyze":null,l?"verbose":null,c?"settings":null,h?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${v}"; options=${y};`,f==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Wa.default=n,Wa}var OS;function Jv(){if(OS)return Xa;OS=1;var t=Xa&&Xa.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Xa,"__esModule",{value:!0});const e=t(ZA());class n extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const c=Array.from(new Set(l)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:c,type:h}={}){let d="";h==="plain"?d="pl":h==="phrase"?d="ph":h==="websearch"&&(d="w");const f=c===void 0?"":`(${c})`;return this.url.searchParams.append(a,`${d}fts${f}.${l}`),this}match(a){return Object.entries(a).forEach(([l,c])=>{this.url.searchParams.append(l,`eq.${c}`)}),this}not(a,l,c){return this.url.searchParams.append(a,`not.${l}.${c}`),this}or(a,{foreignTable:l,referencedTable:c=l}={}){const h=c?`${c}.or`:"or";return this.url.searchParams.append(h,`(${a})`),this}filter(a,l,c){return this.url.searchParams.append(a,`${l}.${c}`),this}}return Xa.default=n,Xa}var MS;function eP(){if(MS)return Ya;MS=1;var t=Ya&&Ya.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ya,"__esModule",{value:!0});const e=t(Jv());class n{constructor(a,{headers:l={},schema:c,fetch:h}){this.url=a,this.headers=l,this.schema=c,this.fetch=h}select(a,{head:l=!1,count:c}={}){const h=l?"HEAD":"GET";let d=!1;const f=(a??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",f),c&&(this.headers.Prefer=`count=${c}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:l,defaultToNull:c=!0}={}){const h="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),l&&d.push(`count=${l}`),c||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(a)){const f=a.reduce((p,y)=>p.concat(Object.keys(y)),[]);if(f.length>0){const p=[...new Set(f)].map(y=>`"${y}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:h,defaultToNull:d=!0}={}){const f="POST",p=[`resolution=${c?"ignore":"merge"}-duplicates`];if(l!==void 0&&this.url.searchParams.set("on_conflict",l),this.headers.Prefer&&p.push(this.headers.Prefer),h&&p.push(`count=${h}`),d||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(a)){const y=a.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:l}={}){const c="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),l&&h.push(`count=${l}`),this.headers.Prefer=h.join(","),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const l="DELETE",c=[];return a&&c.push(`count=${a}`),this.headers.Prefer&&c.unshift(this.headers.Prefer),this.headers.Prefer=c.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ya.default=n,Ya}var Bl={},zl={},jS;function bk(){return jS||(jS=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.version=void 0,zl.version="0.0.0-automated"),zl}var DS;function wk(){if(DS)return Bl;DS=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.DEFAULT_HEADERS=void 0;const t=bk();return Bl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Bl}var kS;function _k(){if(kS)return Ka;kS=1;var t=Ka&&Ka.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ka,"__esModule",{value:!0});const e=t(eP()),n=t(Jv()),s=wk();class a{constructor(c,{headers:h={},schema:d,fetch:f}={}){this.url=c,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),h),this.schemaName=d,this.fetch=f}from(c){const h=new URL(`${this.url}/${c}`);return new e.default(h,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new a(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,h={},{head:d=!1,get:f=!1,count:p}={}){let y;const v=new URL(`${this.url}/rpc/${c}`);let b;d||f?(y=d?"HEAD":"GET",Object.entries(h).filter(([A,w])=>w!==void 0).map(([A,w])=>[A,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([A,w])=>{v.searchParams.append(A,w)})):(y="POST",b=h);const S=Object.assign({},this.headers);return p&&(S.Prefer=`count=${p}`),new n.default({method:y,url:v,headers:S,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Ka.default=a,Ka}var NS;function Sk(){if(NS)return tn;NS=1;var t=tn&&tn.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(tn,"__esModule",{value:!0}),tn.PostgrestError=tn.PostgrestBuilder=tn.PostgrestTransformBuilder=tn.PostgrestFilterBuilder=tn.PostgrestQueryBuilder=tn.PostgrestClient=void 0;const e=t(_k());tn.PostgrestClient=e.default;const n=t(eP());tn.PostgrestQueryBuilder=n.default;const s=t(Jv());tn.PostgrestFilterBuilder=s.default;const a=t(ZA());tn.PostgrestTransformBuilder=a.default;const l=t(JA());tn.PostgrestBuilder=l.default;const c=t(QA());return tn.PostgrestError=c.default,tn.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},tn}var xk=Sk();const Tk=zv(xk),{PostgrestClient:Ek,PostgrestQueryBuilder:AH,PostgrestFilterBuilder:PH,PostgrestTransformBuilder:CH,PostgrestBuilder:RH,PostgrestError:OH}=Tk;let Vy;typeof window>"u"?Vy=require("ws"):Vy=window.WebSocket;const Ak="2.11.10",Pk={"X-Client-Info":`realtime-js/${Ak}`},Ck="1.0.0",tP=1e4,Rk=1e3;var xo;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(xo||(xo={}));var Tn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Tn||(Tn={}));var Ar;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ar||(Ar={}));var Gy;(function(t){t.websocket="websocket"})(Gy||(Gy={}));var ea;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ea||(ea={}));class Ok{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const a=n.getUint8(1),l=n.getUint8(2);let c=this.HEADER_LENGTH+2;const h=s.decode(e.slice(c,c+a));c=c+a;const d=s.decode(e.slice(c,c+l));c=c+l;const f=JSON.parse(s.decode(e.slice(c,e.byteLength)));return{ref:null,topic:h,event:d,payload:f}}}class nP{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(gt||(gt={}));const LS=(t,e,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((l,c)=>(l[c]=Mk(c,t,e,a),l),{})},Mk=(t,e,n,s)=>{const a=e.find(h=>h.name===t),l=a==null?void 0:a.type,c=n[t];return l&&!s.includes(l)?rP(l,c):Fy(c)},rP=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Nk(e,n)}switch(t){case gt.bool:return jk(e);case gt.float4:case gt.float8:case gt.int2:case gt.int4:case gt.int8:case gt.numeric:case gt.oid:return Dk(e);case gt.json:case gt.jsonb:return kk(e);case gt.timestamp:return Lk(e);case gt.abstime:case gt.date:case gt.daterange:case gt.int4range:case gt.int8range:case gt.money:case gt.reltime:case gt.text:case gt.time:case gt.timestamptz:case gt.timetz:case gt.tsrange:case gt.tstzrange:return Fy(e);default:return Fy(e)}},Fy=t=>t,jk=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Dk=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},kk=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Nk=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const c=t.slice(1,n);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(h=>rP(e,h))}return t},Lk=t=>typeof t=="string"?t.replace(" ","T"):t,sP=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Wp{constructor(e,n,s={},a=tP){this.channel=e,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var $S;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})($S||($S={}));class Su{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Su.syncState(this.state,a,l,c),this.pendingDiffs.forEach(d=>{this.state=Su.syncDiff(this.state,d,l,c)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Su.syncDiff(this.state,a,l,c),h())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,a){const l=this.cloneDeep(e),c=this.transformState(n),h={},d={};return this.map(l,(f,p)=>{c[f]||(d[f]=p)}),this.map(c,(f,p)=>{const y=l[f];if(y){const v=p.map(w=>w.presence_ref),b=y.map(w=>w.presence_ref),S=p.filter(w=>b.indexOf(w.presence_ref)<0),A=y.filter(w=>v.indexOf(w.presence_ref)<0);S.length>0&&(h[f]=S),A.length>0&&(d[f]=A)}else h[f]=p}),this.syncDiff(l,{joins:h,leaves:d},s,a)}static syncDiff(e,n,s,a){const{joins:l,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(h,d)=>{var f;const p=(f=e[h])!==null&&f!==void 0?f:[];if(e[h]=this.cloneDeep(d),p.length>0){const y=e[h].map(b=>b.presence_ref),v=p.filter(b=>y.indexOf(b.presence_ref)<0);e[h].unshift(...v)}s(h,p,d)}),this.map(c,(h,d)=>{let f=e[h];if(!f)return;const p=d.map(y=>y.presence_ref);f=f.filter(y=>p.indexOf(y.presence_ref)<0),e[h]=f,a(h,f,d),f.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const a=e[s];return"metas"in a?n[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var IS;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(IS||(IS={}));var US;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(US||(US={}));var Es;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Es||(Es={}));class Zv{constructor(e,n={config:{}},s){this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=Tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Wp(this,Ar.join,this.params,this.timeout),this.rejoinTimer=new nP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ar.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Su(this),this.broadcastEndpointURL=sP(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:l,presence:c,private:h}}=this.params;this._onError(p=>e==null?void 0:e(Es.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Es.CLOSED));const d={},f={broadcast:l,presence:c,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(p=>p.filter))!==null&&a!==void 0?a:[],private:h};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket.setAuth(),p===void 0){e==null||e(Es.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,S=[];for(let A=0;A<b;A++){const w=v[A],{filter:{event:_,schema:x,table:P,filter:O}}=w,R=p&&p[A];if(R&&R.event===_&&R.schema===x&&R.table===P&&R.filter===O)S.push(Object.assign(Object.assign({},w),{id:R.id}));else{this.unsubscribe(),this.state=Tn.errored,e==null||e(Es.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(Es.SUBSCRIBED);return}}).receive("error",p=>{this.state=Tn.errored,e==null||e(Es.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Es.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this._on(e,n,s)}async send(e,n={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:c}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,h,d;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||d===void 0)&&d.ack)&&l("ok"),f.receive("ok",()=>l("ok")),f.receive("error",()=>l("error")),f.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Tn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ar.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(s=>{const a=new Wp(this,Ar.leave,{},e);a.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(l),c}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Wp(this,e,n,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var a,l;const c=e.toLocaleLowerCase(),{close:h,error:d,leave:f,join:p}=Ar;if(s&&[h,d,f,p].indexOf(c)>=0&&s!==this._joinRef())return;let v=this._onMessage(c,n,s);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var S,A,w;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((w=(A=b.filter)===null||A===void 0?void 0:A.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===c}).map(b=>b.callback(v,s)):(l=this.bindings[c])===null||l===void 0||l.filter(b=>{var S,A,w,_,x,P;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const O=b.id,R=(S=b.filter)===null||S===void 0?void 0:S.event;return O&&((A=n.ids)===null||A===void 0?void 0:A.includes(O))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const O=(x=(_=b==null?void 0:b.filter)===null||_===void 0?void 0:_.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return O==="*"||O===((P=n==null?void 0:n.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:A,table:w,commit_timestamp:_,type:x,errors:P}=S;v=Object.assign(Object.assign({},{schema:A,table:w,commit_timestamp:_,eventType:x,new:{},old:{},errors:P}),this._getPayloadRecords(S))}b.callback(v,s)})}_isClosed(){return this.state===Tn.closed}_isJoined(){return this.state===Tn.joined}_isJoining(){return this.state===Tn.joining}_isLeaving(){return this.state===Tn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const a=e.toLocaleLowerCase(),l={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Zv.isEqual(a.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ar.close,{},e)}_onError(e){this._on(Ar.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=LS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=LS(e.columns,e.old_record)),n}}const BS=()=>{},$k=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ik{constructor(e,n){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Pk,this.params={},this.timeout=tP,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=BS,this.ref=0,this.logger=BS,this.conn=null,this.sendBuffer=[],this.serializer=new Ok,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=l=>{let c;return l?c=l:typeof fetch>"u"?c=(...h)=>tc(async()=>{const{default:d}=await Promise.resolve().then(()=>Do);return{default:d}},void 0).then(({default:d})=>d(...h)):c=fetch,(...h)=>c(...h)},this.endPoint=`${e}/${Gy.websocket}`,this.httpEndpoint=sP(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const a=(s=n==null?void 0:n.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:l=>[1e3,2e3,5e3,1e4][l-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(l,c)=>c(JSON.stringify(l)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new nP(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Vy),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Uk(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ck}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels=this.channels.filter(s=>s._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case xo.connecting:return ea.Connecting;case xo.open:return ea.Open;case xo.closing:return ea.Closing;default:return ea.Closed}}isConnected(){return this.connectionState()===ea.Open}channel(e,n={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new Zv(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:a,ref:l}=e,c=()=>{this.encode(e,h=>{var d;(d=this.conn)===null||d===void 0||d.send(h)})};this.log("push",`${n} ${s} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),s.joinedOnce&&s._isJoined()&&s._push(Ar.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Rk,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:s,event:a,payload:l,ref:c}=n;s==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),c&&c===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${l.status||""} ${s} ${a} ${c&&"("+c+")"||""}`,l),Array.from(this.channels).filter(h=>h._isMember(s)).forEach(h=>h._trigger(a,l,c)),this.stateChangeCallbacks.message.forEach(h=>h(n))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ar.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${s}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([$k],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}}class Uk{constructor(e,n,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=xo.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class e0 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function sn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Bk extends e0{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ky extends e0{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var zk=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function h(p){try{f(s.next(p))}catch(y){c(y)}}function d(p){try{f(s.throw(p))}catch(y){c(y)}}function f(p){p.done?l(p.value):a(p.value).then(h,d)}f((s=s.apply(t,e||[])).next())})};const iP=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>tc(async()=>{const{default:s}=await Promise.resolve().then(()=>Do);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},qk=()=>zk(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield tc(()=>Promise.resolve().then(()=>Do),void 0)).Response:Response}),Yy=t=>{if(Array.isArray(t))return t.map(n=>Yy(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=Yy(s)}),e};var ca=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function h(p){try{f(s.next(p))}catch(y){c(y)}}function d(p){try{f(s.throw(p))}catch(y){c(y)}}function f(p){p.done?l(p.value):a(p.value).then(h,d)}f((s=s.apply(t,e||[])).next())})};const Qp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Hk=(t,e,n)=>ca(void 0,void 0,void 0,function*(){const s=yield qk();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(a=>{e(new Bk(Qp(a),t.status||500))}).catch(a=>{e(new Ky(Qp(a),a))}):e(new Ky(Qp(t),t))}),Vk=(t,e,n,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(a.body=JSON.stringify(s)),Object.assign(Object.assign({},a),n))};function nc(t,e,n,s,a,l){return ca(this,void 0,void 0,function*(){return new Promise((c,h)=>{t(n,Vk(e,s,a,l)).then(d=>{if(!d.ok)throw d;return s!=null&&s.noResolveJson?d:d.json()}).then(d=>c(d)).catch(d=>Hk(d,h,s))})})}function Gd(t,e,n,s){return ca(this,void 0,void 0,function*(){return nc(t,"GET",e,n,s)})}function di(t,e,n,s,a){return ca(this,void 0,void 0,function*(){return nc(t,"POST",e,s,a,n)})}function Gk(t,e,n,s,a){return ca(this,void 0,void 0,function*(){return nc(t,"PUT",e,s,a,n)})}function Fk(t,e,n,s){return ca(this,void 0,void 0,function*(){return nc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function aP(t,e,n,s,a){return ca(this,void 0,void 0,function*(){return nc(t,"DELETE",e,s,a,n)})}var Nn=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function h(p){try{f(s.next(p))}catch(y){c(y)}}function d(p){try{f(s.throw(p))}catch(y){c(y)}}function f(p){p.done?l(p.value):a(p.value).then(h,d)}f((s=s.apply(t,e||[])).next())})};const Kk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Yk{constructor(e,n={},s,a){this.url=e,this.headers=n,this.bucketId=s,this.fetch=iP(a)}uploadOrUpdate(e,n,s,a){return Nn(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},zS),a);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const d=c.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),d&&l.append("metadata",this.encodeMetadata(d)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl),d&&l.append("metadata",this.encodeMetadata(d))):(l=s,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,d&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a!=null&&a.headers&&(h=Object.assign(Object.assign({},h),a.headers));const f=this._removeEmptyFolders(n),p=this._getFinalPath(f),y=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:e,body:l,headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{})),v=yield y.json();return y.ok?{data:{path:f,id:v.Id,fullPath:v.Key},error:null}:{data:null,error:v}}catch(l){if(sn(l))return{data:null,error:l};throw l}})}upload(e,n,s){return Nn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,a){return Nn(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),h=new URL(this.url+`/object/upload/sign/${c}`);h.searchParams.set("token",n);try{let d;const f=Object.assign({upsert:zS.upsert},a),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&s instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",s)):typeof FormData<"u"&&s instanceof FormData?(d=s,d.append("cacheControl",f.cacheControl)):(d=s,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const y=yield this.fetch(h.toString(),{method:"PUT",body:d,headers:p}),v=yield y.json();return y.ok?{data:{path:l,fullPath:v.Key},error:null}:{data:null,error:v}}catch(d){if(sn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return Nn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const l=yield di(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(this.url+l.url),h=c.searchParams.get("token");if(!h)throw new e0("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:h},error:null}}catch(s){if(sn(s))return{data:null,error:s};throw s}})}update(e,n,s){return Nn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return Nn(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(sn(a))return{data:null,error:a};throw a}})}copy(e,n,s){return Nn(this,void 0,void 0,function*(){try{return{data:{path:(yield di(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(sn(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,s){return Nn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield di(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(sn(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,s){return Nn(this,void 0,void 0,function*(){try{const a=yield di(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(sn(a))return{data:null,error:a};throw a}})}download(e,n){return Nn(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),c=l?`?${l}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield Gd(this.fetch,`${this.url}/${a}/${h}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(sn(h))return{data:null,error:h};throw h}})}info(e){return Nn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield Gd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Yy(s),error:null}}catch(s){if(sn(s))return{data:null,error:s};throw s}})}exists(e){return Nn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Fk(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(sn(s)&&s instanceof Ky){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),a=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&a.push(l);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&a.push(d);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${s}${f}`)}}}remove(e){return Nn(this,void 0,void 0,function*(){try{return{data:yield aP(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(sn(n))return{data:null,error:n};throw n}})}list(e,n,s){return Nn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Kk),n),{prefix:e||""});return{data:yield di(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(sn(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Xk="2.7.1",Wk={"X-Client-Info":`storage-js/${Xk}`};var Ja=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function h(p){try{f(s.next(p))}catch(y){c(y)}}function d(p){try{f(s.throw(p))}catch(y){c(y)}}function f(p){p.done?l(p.value):a(p.value).then(h,d)}f((s=s.apply(t,e||[])).next())})};class Qk{constructor(e,n={},s){this.url=e,this.headers=Object.assign(Object.assign({},Wk),n),this.fetch=iP(s)}listBuckets(){return Ja(this,void 0,void 0,function*(){try{return{data:yield Gd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(sn(e))return{data:null,error:e};throw e}})}getBucket(e){return Ja(this,void 0,void 0,function*(){try{return{data:yield Gd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(sn(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ja(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(sn(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return Ja(this,void 0,void 0,function*(){try{return{data:yield Gk(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(sn(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Ja(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(sn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ja(this,void 0,void 0,function*(){try{return{data:yield aP(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(sn(n))return{data:null,error:n};throw n}})}}class Jk extends Qk{constructor(e,n={},s){super(e,n,s)}from(e){return new Yk(this.url,this.headers,e,this.fetch)}}const Zk="2.50.0";let du="";typeof Deno<"u"?du="deno":typeof document<"u"?du="web":typeof navigator<"u"&&navigator.product==="ReactNative"?du="react-native":du="node";const eN={"X-Client-Info":`supabase-js-${du}/${Zk}`},tN={headers:eN},nN={schema:"public"},rN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sN={};var iN=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function h(p){try{f(s.next(p))}catch(y){c(y)}}function d(p){try{f(s.throw(p))}catch(y){c(y)}}function f(p){p.done?l(p.value):a(p.value).then(h,d)}f((s=s.apply(t,e||[])).next())})};const aN=t=>{let e;return t?e=t:typeof fetch>"u"?e=XA:e=fetch,(...n)=>e(...n)},oN=()=>typeof Headers>"u"?WA:Headers,lN=(t,e,n)=>{const s=aN(n),a=oN();return(l,c)=>iN(void 0,void 0,void 0,function*(){var h;const d=(h=yield e())!==null&&h!==void 0?h:t;let f=new a(c==null?void 0:c.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),s(l,Object.assign(Object.assign({},c),{headers:f}))})};var uN=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function h(p){try{f(s.next(p))}catch(y){c(y)}}function d(p){try{f(s.throw(p))}catch(y){c(y)}}function f(p){p.done?l(p.value):a(p.value).then(h,d)}f((s=s.apply(t,e||[])).next())})};function cN(t){return t.endsWith("/")?t:t+"/"}function hN(t,e){var n,s;const{db:a,auth:l,realtime:c,global:h}=t,{db:d,auth:f,realtime:p,global:y}=e,v={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},f),l),realtime:Object.assign(Object.assign({},p),c),global:Object.assign(Object.assign(Object.assign({},y),h),{headers:Object.assign(Object.assign({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>uN(this,void 0,void 0,function*(){return""})};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}const oP="2.70.0",mo=30*1e3,Xy=3,Jp=Xy*mo,dN="http://localhost:9999",fN="supabase.auth.token",mN={"X-Client-Info":`gotrue-js/${oP}`},Wy="X-Supabase-Api-Version",lP={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},pN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gN=6e5;class t0 extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function $e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class yN extends t0{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function vN(t){return $e(t)&&t.name==="AuthApiError"}class uP extends t0{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class vi extends t0{constructor(e,n,s,a){super(e,s,a),this.name=n,this.status=s}}class ui extends vi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bN(t){return $e(t)&&t.name==="AuthSessionMissingError"}class Rh extends vi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Oh extends vi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Mh extends vi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function wN(t){return $e(t)&&t.name==="AuthImplicitGrantRedirectError"}class qS extends vi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qy extends vi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Zp(t){return $e(t)&&t.name==="AuthRetryableFetchError"}class HS extends vi{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class xu extends vi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Fd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),VS=` 	
\r=`.split(""),_N=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<VS.length;e+=1)t[VS[e].charCodeAt(0)]=-2;for(let e=0;e<Fd.length;e+=1)t[Fd[e].charCodeAt(0)]=e;return t})();function GS(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Fd[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Fd[s]),e.queuedBits-=6}}function cP(t,e,n){const s=_N[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function FS(t){const e=[],n=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{TN(c,s,n)};for(let c=0;c<t.length;c+=1)cP(t.charCodeAt(c),a,l);return e.join("")}function SN(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function xN(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}SN(s,e)}}function TN(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function EN(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)cP(t.charCodeAt(a),n,s);return new Uint8Array(e)}function AN(t){const e=[];return xN(t,n=>e.push(n)),new Uint8Array(e)}function PN(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>GS(a,n,s)),GS(null,n,s),e.join("")}function CN(t){return Math.round(Date.now()/1e3)+t}function RN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const xr=()=>typeof window<"u"&&typeof document<"u",Vi={tested:!1,writable:!1},Tu=()=>{if(!xr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vi.tested)return Vi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Vi.tested=!0,Vi.writable=!0}catch{Vi.tested=!0,Vi.writable=!1}return Vi.writable};function ON(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return n.searchParams.forEach((s,a)=>{e[a]=s}),e}const hP=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>tc(async()=>{const{default:s}=await Promise.resolve().then(()=>Do);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},MN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",dP=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},jh=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Dh=async(t,e)=>{await t.removeItem(e)};class mf{constructor(){this.promise=new mf.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}mf.promiseConstructor=Promise;function eg(t){const e=t.split(".");if(e.length!==3)throw new xu("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!pN.test(e[s]))throw new xu("JWT not in base64url format");return{header:JSON.parse(FS(e[0])),payload:JSON.parse(FS(e[1])),signature:EN(e[2]),raw:{header:e[0],payload:e[1]}}}async function jN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function DN(t,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function kN(t){return("0"+t.toString(16)).substr(-2)}function NN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let l=0;l<56;l++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,kN).join("")}async function LN(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function $N(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await LN(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Za(t,e,n=!1){const s=NN();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await dP(t,`${e}-code-verifier`,a);const l=await $N(s);return[l,s===l?"plain":"s256"]}const IN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function UN(t){const e=t.headers.get(Wy);if(!e||!e.match(IN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function BN(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function zN(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const qN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function eo(t){if(!qN.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var HN=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};const Qi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),VN=[502,503,504];async function KS(t){var e;if(!MN(t))throw new Qy(Qi(t),0);if(VN.includes(t.status))throw new Qy(Qi(t),t.status);let n;try{n=await t.json()}catch(l){throw new uP(Qi(l),l)}let s;const a=UN(t);if(a&&a.getTime()>=lP["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new HS(Qi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new ui}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new HS(Qi(n),t.status,n.weak_password.reasons);throw new yN(Qi(n),t.status||500,s)}const GN=(t,e,n,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function Fe(t,e,n,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[Wy]||(l[Wy]=lP["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",d=await FN(t,e,n+h,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(d):{data:Object.assign({},d),error:null}}async function FN(t,e,n,s,a,l){const c=GN(e,s,a,l);let h;try{h=await t(n,Object.assign({},c))}catch(d){throw console.error(d),new Qy(Qi(d),0)}if(h.ok||await KS(h),s!=null&&s.noResolveJson)return h;try{return await h.json()}catch(d){await KS(d)}}function xs(t){var e;let n=null;WN(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=CN(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function YS(t){const e=xs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function fi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function KN(t){return{data:t,error:null}}function YN(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:l}=t,c=HN(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:l},d=Object.assign({},c);return{data:{properties:h,user:d},error:null}}function XN(t){return t}function WN(t){return t.access_token&&t.refresh_token&&t.expires_in}const tg=["global","local","others"];var QN=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};class JN{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=hP(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=tg[0]){if(tg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tg.join(", ")}`);try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:fi})}catch(s){if($e(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=QN(e,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:YN,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:fi})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,a,l,c,h,d;try{const f={nextPage:null,lastPage:0,total:0},p=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:XN});if(p.error)throw p.error;const y=await p.json(),v=(c=p.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(d=(h=p.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(S=>{const A=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(S.split(";")[1].split("=")[1]);f[`${w}Page`]=A}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if($e(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){eo(e);try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:fi})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){eo(e);try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:fi})}catch(s){if($e(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){eo(e);try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:fi})}catch(s){if($e(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){eo(e.userId);try{const{data:n,error:s}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){eo(e.userId),eo(e.id);try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}}const ZN={getItem:t=>Tu()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Tu()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Tu()&&globalThis.localStorage.removeItem(t)}};function XS(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function e3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const to={debug:!!(globalThis&&Tu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fP extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class t3 extends fP{}async function n3(t,e,n){to.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),to.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){to.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{to.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw to.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new t3(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(to.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}e3();const r3={url:dN,storageKey:fN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function WS(t,e,n){return await n()}class Iu{constructor(e){var n,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Iu.nextInstanceID,Iu.nextInstanceID+=1,this.instanceID>0&&xr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},r3),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new JN({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=hP(a.fetch),this.lock=a.lock||WS,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:xr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=n3:this.lock=WS,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Tu()?this.storage=ZN:(this.memoryStorage={},this.storage=XS(this.memoryStorage)):(this.memoryStorage={},this.storage=XS(this.memoryStorage)),xr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oP}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=ON(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),xr()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),wN(l)){const d=(e=l.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $e(n)?{error:n}:{error:new uP("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,a;try{const l=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:xs}),{data:c,error:h}=l;if(h||!c)return{data:{user:null,session:null},error:h};const d=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(l){if($e(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var n,s,a;try{let l;if("email"in e){const{email:p,password:y,options:v}=e;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await Za(this.storage,this.storageKey)),l=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:p,password:y,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:b,code_challenge_method:S},xform:xs})}else if("phone"in e){const{phone:p,password:y,options:v}=e;l=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:y,data:(s=v==null?void 0:v.data)!==null&&s!==void 0?s:{},channel:(a=v==null?void 0:v.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:xs})}else throw new Oh("You must provide either an email or phone number and a password");const{data:c,error:h}=l;if(h||!c)return{data:{user:null,session:null},error:h};const d=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(l){if($e(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:c,options:h}=e;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:YS})}else if("phone"in e){const{phone:l,password:c,options:h}=e;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:YS})}else throw new Oh("You must provide either an email or phone number and a password");const{data:s,error:a}=n;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Rh}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,s,a,l,c,h,d,f,p,y,v,b;let S,A;if("message"in e)S=e.message,A=e.signature;else{const{chain:w,wallet:_,statement:x,options:P}=e;let O;if(xr())if(typeof _=="object")O=_;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))O=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(P!=null&&P.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=_}const R=new URL((n=P==null?void 0:P.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const M=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P==null?void 0:P.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),x?{statement:x}:null));let j;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")j=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)j=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)S=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),A=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${R.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(a=(s=P==null?void 0:P.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=P==null?void 0:P.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((c=P==null?void 0:P.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((h=P==null?void 0:P.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((d=P==null?void 0:P.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((f=P==null?void 0:P.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((y=(p=P==null?void 0:P.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||y===void 0)&&y.length?["Resources",...P.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const M=await O.signMessage(new TextEncoder().encode(S),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=M}}try{const{data:w,error:_}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:PN(A)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:xs});if(_)throw _;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Rh}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:_})}catch(w){if($e(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const n=await jh(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{const{data:l,error:c}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:xs});if(await Dh(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Rh}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if($e(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:a,access_token:l,nonce:c}=e,h=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:xs}),{data:d,error:f}=h;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Rh}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,a,l,c;try{if("email"in e){const{email:h,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Za(this.storage,this.storageKey));const{error:y}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:h,options:d}=e,{data:f,error:p}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(l=d==null?void 0:d.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(c=d==null?void 0:d.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p}}throw new Oh("You must provide either an email or phone number.")}catch(h){if($e(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var n,s;try{let a,l;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:h}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:xs});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const d=c.session,f=c.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var n,s,a;try{let l=null,c=null;return this.flowType==="pkce"&&([l,c]=await Za(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:KN})}catch(l){if($e(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new ui;const{error:a}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if($e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:c}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:c,error:h}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h}}throw new Oh("You must provide either an email or phone number and a type")}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await jh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Jp:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,f,p)=>(!c&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,p))})}return{data:{session:e},error:null}}const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:fi}):await this._useSession(async n=>{var s,a,l;const{data:c,error:h}=n;if(h)throw h;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ui}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:fi})})}catch(n){if($e(n))return bN(n)&&(await this._removeSession(),await Dh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new ui;const c=a.session;let h=null,d=null;this.flowType==="pkce"&&e.email!=null&&([h,d]=await Za(this.storage,this.storageKey));const{data:f,error:p}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:d}),jwt:c.access_token,xform:fi});if(p)throw p;return c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(s){if($e(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ui;const n=Date.now()/1e3;let s=n,a=!0,l=null;const{payload:c}=eg(e.access_token);if(c.exp&&(s=c.exp,a=s<=n),a){const{session:h,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:d}=await this._getUser(e.access_token);if(d)throw d;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if($e(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:c,error:h}=n;if(h)throw h;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new ui;const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!xr())throw new Mh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Mh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new qS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mh("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new qS("No code detected.");const{data:x,error:P}=await this._exchangeCodeForSession(e.code);if(P)throw P;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:h,expires_at:d,token_type:f}=e;if(!l||!h||!c||!f)throw new Mh("No session defined in URL");const p=Math.round(Date.now()/1e3),y=parseInt(h);let v=p+y;d&&(v=parseInt(d));const b=v-p;b*1e3<=mo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const S=v-y;p-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,v,p):p-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,v,p);const{data:A,error:w}=await this._getUser(l);if(w)throw w;const _={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:y,expires_at:v,refresh_token:c,token_type:f,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(s){if($e(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await jh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return{error:l};const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(vN(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Dh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=RN(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,a;try{const{data:{session:l},error:c}=n;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Za(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if($e(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:s,error:a}=await this._useSession(async l=>{var c,h,d,f,p;const{data:y,error:v}=l;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(f=y.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(a)throw a;return xr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if($e(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,a;const{data:l,error:c}=n;if(c)throw c;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await DN(async a=>(a>0&&await jN(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:xs})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Zp(l)&&Date.now()+c-s<mo})}catch(s){if(this._debug(n,"error",s),$e(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),xr()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await jh(this.storage,this.storageKey);if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Jp;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Jp}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Zp(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new ui;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new mf;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new ui;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={session:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),$e(l)){const c={session:null,error:l};return Zp(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(d){l.push(d)}});if(await Promise.all(c),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await dP(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Dh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&xr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),mo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/mo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${mo}ms, refresh threshold is ${Xy} ticks`),a<=Xy&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fP)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await Za(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(h.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;return l?{data:null,error:l}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,a;const{data:l,error:c}=n;if(c)return{data:null,error:c};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:f}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return{data:null,error:l};const{data:c,error:h}=await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:h})})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;return l?{data:null,error:l}:await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(e==null?void 0:e.factors)||[],a=s.filter(c=>c.factor_type==="totp"&&c.status==="verified"),l=s.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:s,totp:a,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,s;const{data:{session:a},error:l}=e;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=eg(a.access_token);let h=null;c.aal&&(h=c.aal);let d=h;((s=(n=a.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");const p=c.amr||[];return{data:{currentLevel:h,nextLevel:d,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(c=>c.kid===e);if(s||(s=this.jwks.keys.find(c=>c.kid===e),s&&this.jwks_cached_at+gN>Date.now()))return s;const{data:a,error:l}=await Fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;if(!a.keys||a.keys.length===0)throw new xu("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),s=a.keys.find(c=>c.kid===e),!s)throw new xu("No matching signing key found in JWKS");return s}async getClaims(e,n={keys:[]}){try{let s=e;if(!s){const{data:b,error:S}=await this.getSession();if(S||!b.session)return{data:null,error:S};s=b.session.access_token}const{header:a,payload:l,signature:c,raw:{header:h,payload:d}}=eg(s);if(BN(l.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:l,header:a,signature:c},error:null}}const f=zN(a.alg),p=await this.fetchJwk(a.kid,n),y=await crypto.subtle.importKey("jwk",p,f,!0,["verify"]);if(!await crypto.subtle.verify(f,y,c,AN(`${h}.${d}`)))throw new xu("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}}}Iu.nextInstanceID=0;const s3=Iu;class i3 extends s3{constructor(e){super(e)}}var a3=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function h(p){try{f(s.next(p))}catch(y){c(y)}}function d(p){try{f(s.throw(p))}catch(y){c(y)}}function f(p){p.done?l(p.value):a(p.value).then(h,d)}f((s=s.apply(t,e||[])).next())})};class o3{constructor(e,n,s){var a,l,c;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=cN(e),d=new URL(h);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:nN,realtime:sN,auth:Object.assign(Object.assign({},rN),{storageKey:f}),global:tN},y=hN(s??{},p);this.storageKey=(a=y.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=y.global.headers)!==null&&l!==void 0?l:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=y.auth)!==null&&c!==void 0?c:{},this.headers,y.global.fetch),this.fetch=lN(n,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new Ek(new URL("rest/v1",d).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),y.accessToken||this._listenForAuthEvents()}get functions(){return new fk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Jk(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return a3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,storageKey:l,flowType:c,lock:h,debug:d},f,p){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new i3({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,flowType:c,lock:h,debug:d,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ik(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const l3=(t,e,n)=>new o3(t,e,n),u3="https://sihfbzltlhkerkxozadt.supabase.co",c3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNpaGZiemx0bGhrZXJreG96YWR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAwNzc2NTgsImV4cCI6MjA2NTY1MzY1OH0.5H3eQxQxSfHZnpScO9bGHrSXA3GVuorLgpcTCEIomX4",ht=l3(u3,c3),h3=k.createContext(void 0);function n0(){const t=k.useContext(h3);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function Me(t,e,n,s,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function W(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}let mP=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return mP=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};function Jy(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Zy=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Oe extends Error{}class dn extends Oe{constructor(e,n,s,a){super(`${dn.makeMessage(e,n,s)}`),this.status=e,this.headers=a,this.requestID=a==null?void 0:a.get("x-request-id"),this.error=n;const l=n;this.code=l==null?void 0:l.code,this.param=l==null?void 0:l.param,this.type=l==null?void 0:l.type}static makeMessage(e,n,s){const a=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,s,a){if(!e||!a)return new pf({message:s,cause:Zy(n)});const l=n==null?void 0:n.error;return e===400?new pP(e,l,s,a):e===401?new gP(e,l,s,a):e===403?new yP(e,l,s,a):e===404?new vP(e,l,s,a):e===409?new bP(e,l,s,a):e===422?new wP(e,l,s,a):e===429?new _P(e,l,s,a):e>=500?new SP(e,l,s,a):new dn(e,l,s,a)}}class ur extends dn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class pf extends dn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class r0 extends pf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class pP extends dn{}class gP extends dn{}class yP extends dn{}class vP extends dn{}class bP extends dn{}class wP extends dn{}class _P extends dn{}class SP extends dn{}class xP extends Oe{constructor(){super("Could not parse response content as the length limit was reached")}}class TP extends Oe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}const d3=/^[a-z][a-z0-9+.-]*:/i,f3=t=>d3.test(t);function m3(t){return typeof t!="object"?{}:t??{}}function p3(t){if(!t)return!0;for(const e in t)return!1;return!0}function g3(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ng(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const y3=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Oe(`${t} must be an integer`);if(e<0)throw new Oe(`${t} must be a positive integer`);return e},v3=t=>{try{return JSON.parse(t)}catch{return}},rc=t=>new Promise(e=>setTimeout(e,t)),Kd={off:0,error:200,warn:300,info:400,debug:500},QS=(t,e,n)=>{if(t){if(g3(Kd,t))return t;yn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Kd))}`)}};function fu(){}function kh(t,e,n){return!e||Kd[t]>Kd[n]?fu:e[t].bind(e)}const b3={error:fu,warn:fu,info:fu,debug:fu};let JS=new WeakMap;function yn(t){const e=t.logger,n=t.logLevel??"off";if(!e)return b3;const s=JS.get(e);if(s&&s[0]===n)return s[1];const a={error:kh("error",e,n),warn:kh("warn",e,n),info:kh("info",e,n),debug:kh("debug",e,n)};return JS.set(e,[n,a]),a}const Ji=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t),po="5.3.0",w3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function _3(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const S3=()=>{var n;const t=_3();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":po,"X-Stainless-OS":ex(Deno.build.os),"X-Stainless-Arch":ZS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":po,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":po,"X-Stainless-OS":ex(globalThis.process.platform??"unknown"),"X-Stainless-Arch":ZS(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=x3();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":po,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":po,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function x3(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const a=s[1]||0,l=s[2]||0,c=s[3]||0;return{browser:e,version:`${a}.${l}.${c}`}}}return null}const ZS=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",ex=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let tx;const T3=()=>tx??(tx=S3());function E3(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function EP(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function AP(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return EP({start(){},async pull(n){const{done:s,value:a}=await e.next();s?n.close():n.enqueue(a)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function PP(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function A3(t){var s,a;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((a=(s=t[Symbol.asyncIterator]()).return)==null?void 0:a.call(s));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const P3=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),ev="RFC3986",tv={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},C3="RFC1738",R3=Array.isArray,Ur=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),rg=1024,O3=(t,e,n,s,a)=>{if(t.length===0)return t;let l=t;if(typeof t=="symbol"?l=Symbol.prototype.toString.call(t):typeof t!="string"&&(l=String(t)),n==="iso-8859-1")return escape(l).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});let c="";for(let h=0;h<l.length;h+=rg){const d=l.length>=rg?l.slice(h,h+rg):l,f=[];for(let p=0;p<d.length;++p){let y=d.charCodeAt(p);if(y===45||y===46||y===95||y===126||y>=48&&y<=57||y>=65&&y<=90||y>=97&&y<=122||a===C3&&(y===40||y===41)){f[f.length]=d.charAt(p);continue}if(y<128){f[f.length]=Ur[y];continue}if(y<2048){f[f.length]=Ur[192|y>>6]+Ur[128|y&63];continue}if(y<55296||y>=57344){f[f.length]=Ur[224|y>>12]+Ur[128|y>>6&63]+Ur[128|y&63];continue}p+=1,y=65536+((y&1023)<<10|d.charCodeAt(p)&1023),f[f.length]=Ur[240|y>>18]+Ur[128|y>>12&63]+Ur[128|y>>6&63]+Ur[128|y&63]}c+=f.join("")}return c};function M3(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function nx(t,e){if(R3(t)){const n=[];for(let s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)}const j3=Object.prototype.hasOwnProperty,CP={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},qr=Array.isArray,D3=Array.prototype.push,RP=function(t,e){D3.apply(t,qr(e)?e:[e])},k3=Date.prototype.toISOString,Xt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:O3,encodeValuesOnly:!1,format:ev,formatter:tv[ev],indices:!1,serializeDate(t){return k3.call(t)},skipNulls:!1,strictNullHandling:!1};function N3(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const sg={};function OP(t,e,n,s,a,l,c,h,d,f,p,y,v,b,S,A,w,_){let x=t,P=_,O=0,R=!1;for(;(P=P.get(sg))!==void 0&&!R;){const B=P.get(t);if(O+=1,typeof B<"u"){if(B===O)throw new RangeError("Cyclic object value");R=!0}typeof P.get(sg)>"u"&&(O=0)}if(typeof f=="function"?x=f(e,x):x instanceof Date?x=v==null?void 0:v(x):n==="comma"&&qr(x)&&(x=nx(x,function(B){return B instanceof Date?v==null?void 0:v(B):B})),x===null){if(l)return d&&!A?d(e,Xt.encoder,w,"key",b):e;x=""}if(N3(x)||M3(x)){if(d){const B=A?e:d(e,Xt.encoder,w,"key",b);return[(S==null?void 0:S(B))+"="+(S==null?void 0:S(d(x,Xt.encoder,w,"value",b)))]}return[(S==null?void 0:S(e))+"="+(S==null?void 0:S(String(x)))]}const M=[];if(typeof x>"u")return M;let j;if(n==="comma"&&qr(x))A&&d&&(x=nx(x,d)),j=[{value:x.length>0?x.join(",")||null:void 0}];else if(qr(f))j=f;else{const B=Object.keys(x);j=p?B.sort(p):B}const $=h?String(e).replace(/\./g,"%2E"):String(e),z=s&&qr(x)&&x.length===1?$+"[]":$;if(a&&qr(x)&&x.length===0)return z+"[]";for(let B=0;B<j.length;++B){const te=j[B],Q=typeof te=="object"&&typeof te.value<"u"?te.value:x[te];if(c&&Q===null)continue;const se=y&&h?te.replace(/\./g,"%2E"):te,ae=qr(x)?typeof n=="function"?n(z,se):z:z+(y?"."+se:"["+se+"]");_.set(t,O);const pe=new WeakMap;pe.set(sg,_),RP(M,OP(Q,ae,n,s,a,l,c,h,n==="comma"&&A&&qr(x)?null:d,f,p,y,v,b,S,A,w,pe))}return M}function L3(t=Xt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Xt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=ev;if(typeof t.format<"u"){if(!j3.call(tv,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const s=tv[n];let a=Xt.filter;(typeof t.filter=="function"||qr(t.filter))&&(a=t.filter);let l;if(t.arrayFormat&&t.arrayFormat in CP?l=t.arrayFormat:"indices"in t?l=t.indices?"indices":"repeat":l=Xt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const c=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Xt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Xt.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Xt.allowEmptyArrays,arrayFormat:l,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Xt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Xt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Xt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Xt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Xt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Xt.encodeValuesOnly,filter:a,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Xt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Xt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Xt.strictNullHandling}}function $3(t,e={}){let n=t;const s=L3(e);let a,l;typeof s.filter=="function"?(l=s.filter,n=l("",n)):qr(s.filter)&&(l=s.filter,a=l);const c=[];if(typeof n!="object"||n===null)return"";const h=CP[s.arrayFormat],d=h==="comma"&&s.commaRoundTrip;a||(a=Object.keys(n)),s.sort&&a.sort(s.sort);const f=new WeakMap;for(let v=0;v<a.length;++v){const b=a[v];s.skipNulls&&n[b]===null||RP(c,OP(n[b],b,h,d,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,f))}const p=c.join(s.delimiter);let y=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),p.length>0?y+p:""}function I3(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let s=0;for(const a of t)n.set(a,s),s+=a.length;return n}let rx;function s0(t){let e;return(rx??(e=new globalThis.TextEncoder,rx=e.encode.bind(e)))(t)}let sx;function ix(t){let e;return(sx??(e=new globalThis.TextDecoder,sx=e.decode.bind(e)))(t)}var Fn,Kn;class gf{constructor(){Fn.set(this,void 0),Kn.set(this,void 0),Me(this,Fn,new Uint8Array),Me(this,Kn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?s0(e):e;Me(this,Fn,I3([W(this,Fn,"f"),n]));const s=[];let a;for(;(a=U3(W(this,Fn,"f"),W(this,Kn,"f")))!=null;){if(a.carriage&&W(this,Kn,"f")==null){Me(this,Kn,a.index);continue}if(W(this,Kn,"f")!=null&&(a.index!==W(this,Kn,"f")+1||a.carriage)){s.push(ix(W(this,Fn,"f").subarray(0,W(this,Kn,"f")-1))),Me(this,Fn,W(this,Fn,"f").subarray(W(this,Kn,"f"))),Me(this,Kn,null);continue}const l=W(this,Kn,"f")!==null?a.preceding-1:a.preceding,c=ix(W(this,Fn,"f").subarray(0,l));s.push(c),Me(this,Fn,W(this,Fn,"f").subarray(a.index)),Me(this,Kn,null)}return s}flush(){return W(this,Fn,"f").length?this.decode(`
`):[]}}Fn=new WeakMap,Kn=new WeakMap;gf.NEWLINE_CHARS=new Set([`
`,"\r"]);gf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function U3(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function B3(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}class Gr{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let s=!1;async function*a(){if(s)throw new Oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let l=!1;try{for await(const c of z3(e,n))if(!l){if(c.data.startsWith("[DONE]")){l=!0;continue}if(c.event===null||c.event.startsWith("response.")||c.event.startsWith("transcript.")){let h;try{h=JSON.parse(c.data)}catch(d){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),d}if(h&&h.error)throw new dn(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(c.data)}catch(d){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),d}if(c.event=="error")throw new dn(void 0,h.error,h.message,void 0);yield{event:c.event,data:h}}}l=!0}catch(c){if(Jy(c))return;throw c}finally{l||n.abort()}}return new Gr(a,n)}static fromReadableStream(e,n){let s=!1;async function*a(){const c=new gf,h=PP(e);for await(const d of h)for(const f of c.decode(d))yield f;for(const d of c.flush())yield d}async function*l(){if(s)throw new Oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let c=!1;try{for await(const h of a())c||h&&(yield JSON.parse(h));c=!0}catch(h){if(Jy(h))return;throw h}finally{c||n.abort()}}return new Gr(l,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),a=l=>({next:()=>{if(l.length===0){const c=s.next();e.push(c),n.push(c)}return l.shift()}});return[new Gr(()=>a(e),this.controller),new Gr(()=>a(n),this.controller)]}toReadableStream(){const e=this;let n;return EP({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:l}=await n.next();if(l)return s.close();const c=s0(JSON.stringify(a)+`
`);s.enqueue(c)}catch(a){s.error(a)}},async cancel(){var s;await((s=n.return)==null?void 0:s.call(n))}})}}async function*z3(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Oe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Oe("Attempted to iterate over a response with no body");const n=new H3,s=new gf,a=PP(t.body);for await(const l of q3(a))for(const c of s.decode(l)){const h=n.decode(c);h&&(yield h)}for(const l of s.flush()){const c=n.decode(l);c&&(yield c)}}async function*q3(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?s0(n):n;let a=new Uint8Array(e.length+s.length);a.set(e),a.set(s,e.length),e=a;let l;for(;(l=B3(e))!==-1;)yield e.slice(0,l),e=e.slice(l)}e.length>0&&(yield e)}class H3{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,a]=V3(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function V3(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function MP(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:a,startTime:l}=e,c=await(async()=>{var y;if(e.options.stream)return yn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller):Gr.fromSSEResponse(n,e.controller);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const h=n.headers.get("content-type"),d=(y=h==null?void 0:h.split(";")[0])==null?void 0:y.trim();if((d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))){const v=await n.json();return jP(v,n)}return await n.text()})();return yn(t).debug(`[${s}] response parsed`,Ji({retryOfRequestLogID:a,url:n.url,status:n.status,body:c,durationMs:Date.now()-l})),c}function jP(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var mu;class yf extends Promise{constructor(e,n,s=MP){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=s,mu.set(this,void 0),Me(this,mu,e)}_thenUnwrap(e){return new yf(W(this,mu,"f"),this.responsePromise,async(n,s)=>jP(e(await this.parseResponse(n,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(W(this,mu,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}mu=new WeakMap;var Nh;class DP{constructor(e,n,s,a){Nh.set(this,void 0),Me(this,Nh,e),this.options=a,this.response=n,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Oe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await W(this,Nh,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Nh=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class G3 extends yf{constructor(e,n,s){super(e,n,async(a,l)=>new s(a,l.response,await MP(a,l),l.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class vf extends DP{constructor(e,n,s,a){super(e,n,s,a),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Ht extends DP{constructor(e,n,s,a){super(e,n,s,a),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var s;const e=this.getPaginatedItems(),n=(s=e[e.length-1])==null?void 0:s.id;return n?{...this.options,query:{...m3(this.options.query),after:n}}:null}}const kP=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Eu(t,e,n){return kP(),new File(t,e??"unknown_file",n)}function Ad(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const NP=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",ua=async(t,e)=>({...t,body:await K3(t.body,e)}),ax=new WeakMap;function F3(t){const e=typeof t=="function"?t:t.fetch,n=ax.get(e);if(n)return n;const s=(async()=>{try{const a="Response"in e?e.Response:(await e("data:,")).constructor,l=new FormData;return l.toString()!==await new a(l).text()}catch{return!0}})();return ax.set(e,s),s}const K3=async(t,e)=>{if(!await F3(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([s,a])=>nv(n,s,a))),n},Y3=t=>t instanceof Blob&&"name"in t,nv=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Eu([await n.blob()],Ad(n)));else if(NP(n))t.append(e,Eu([await new Response(AP(n)).blob()],Ad(n)));else if(Y3(n))t.append(e,n,Ad(n));else if(Array.isArray(n))await Promise.all(n.map(s=>nv(t,e+"[]",s)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([s,a])=>nv(t,`${e}[${s}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},LP=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",X3=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&LP(t),W3=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Q3(t,e,n){if(kP(),t=await t,X3(t))return t instanceof File?t:Eu([await t.arrayBuffer()],t.name);if(W3(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Eu(await rv(a),e,n)}const s=await rv(t);if(e||(e=Ad(t)),!(n!=null&&n.type)){const a=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(n={...n,type:a})}return Eu(s,e,n)}async function rv(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(LP(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(NP(t))for await(const s of t)e.push(...await rv(s));else{const s=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${s?`; constructor: ${s}`:""}${J3(t)}`)}return e}function J3(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class De{constructor(e){this._client=e}}function $P(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Z3=(t=$P)=>function(n,...s){if(n.length===1)return n[0];let a=!1;const l=n.reduce((p,y,v)=>(/[?#]/.test(y)&&(a=!0),p+y+(v===s.length?"":(a?encodeURIComponent:t)(String(s[v])))),""),c=l.split(/[?#]/,1)[0],h=[],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=d.exec(c))!==null;)h.push({start:f.index,length:f[0].length});if(h.length>0){let p=0;const y=h.reduce((v,b)=>{const S=" ".repeat(b.start-p),A="^".repeat(b.length);return p=b.start+b.length,v+S+A},"");throw new Oe(`Path parameters result in path with invalid segments:
${l}
${y}`)}return l},ge=Z3($P);let IP=class extends De{list(e,n={},s){return this._client.getAPIList(ge`/chat/completions/${e}/messages`,Ht,{query:n,...s})}};function eL(t){return typeof t.parse=="function"}const Yd=t=>(t==null?void 0:t.role)==="assistant",UP=t=>(t==null?void 0:t.role)==="tool";var sv,Pd,Cd,pu,gu,Rd,yu,Ts,vu,Xd,Wd,go,BP;class i0{constructor(){sv.add(this),this.controller=new AbortController,Pd.set(this,void 0),Cd.set(this,()=>{}),pu.set(this,()=>{}),gu.set(this,void 0),Rd.set(this,()=>{}),yu.set(this,()=>{}),Ts.set(this,{}),vu.set(this,!1),Xd.set(this,!1),Wd.set(this,!1),go.set(this,!1),Me(this,Pd,new Promise((e,n)=>{Me(this,Cd,e,"f"),Me(this,pu,n,"f")})),Me(this,gu,new Promise((e,n)=>{Me(this,Rd,e,"f"),Me(this,yu,n,"f")})),W(this,Pd,"f").catch(()=>{}),W(this,gu,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},W(this,sv,"m",BP).bind(this))},0)}_connected(){this.ended||(W(this,Cd,"f").call(this),this._emit("connect"))}get ended(){return W(this,vu,"f")}get errored(){return W(this,Xd,"f")}get aborted(){return W(this,Wd,"f")}abort(){this.controller.abort()}on(e,n){return(W(this,Ts,"f")[e]||(W(this,Ts,"f")[e]=[])).push({listener:n}),this}off(e,n){const s=W(this,Ts,"f")[e];if(!s)return this;const a=s.findIndex(l=>l.listener===n);return a>=0&&s.splice(a,1),this}once(e,n){return(W(this,Ts,"f")[e]||(W(this,Ts,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,s)=>{Me(this,go,!0),e!=="error"&&this.once("error",s),this.once(e,n)})}async done(){Me(this,go,!0),await W(this,gu,"f")}_emit(e,...n){if(W(this,vu,"f"))return;e==="end"&&(Me(this,vu,!0),W(this,Rd,"f").call(this));const s=W(this,Ts,"f")[e];if(s&&(W(this,Ts,"f")[e]=s.filter(a=>!a.once),s.forEach(({listener:a})=>a(...n))),e==="abort"){const a=n[0];!W(this,go,"f")&&!(s!=null&&s.length)&&Promise.reject(a),W(this,pu,"f").call(this,a),W(this,yu,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=n[0];!W(this,go,"f")&&!(s!=null&&s.length)&&Promise.reject(a),W(this,pu,"f").call(this,a),W(this,yu,"f").call(this,a),this._emit("end")}}_emitFinal(){}}Pd=new WeakMap,Cd=new WeakMap,pu=new WeakMap,gu=new WeakMap,Rd=new WeakMap,yu=new WeakMap,Ts=new WeakMap,vu=new WeakMap,Xd=new WeakMap,Wd=new WeakMap,go=new WeakMap,sv=new WeakSet,BP=function(e){if(Me(this,Xd,!0),e instanceof Error&&e.name==="AbortError"&&(e=new ur),e instanceof ur)return Me(this,Wd,!0),this._emit("abort",e);if(e instanceof Oe)return this._emit("error",e);if(e instanceof Error){const n=new Oe(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Oe(String(e)))};function a0(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function sc(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function tL(t,e){return!e||!zP(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:o0(t,e)}function o0(t,e){const n=t.choices.map(s=>{var a;if(s.finish_reason==="length")throw new xP;if(s.finish_reason==="content_filter")throw new TP;return{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:((a=s.message.tool_calls)==null?void 0:a.map(l=>rL(e,l)))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?nL(e,s.message.content):null}}});return{...t,choices:n}}function nL(t,e){var n,s;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((s=t.response_format)==null?void 0:s.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function rL(t,e){var s;const n=(s=t.tools)==null?void 0:s.find(a=>{var l;return((l=a.function)==null?void 0:l.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:sc(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function sL(t,e){var s;if(!t)return!1;const n=(s=t.tools)==null?void 0:s.find(a=>{var l;return((l=a.function)==null?void 0:l.name)===e.function.name});return sc(n)||(n==null?void 0:n.function.strict)||!1}function zP(t){var e;return a0(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>sc(n)||n.type==="function"&&n.function.strict===!0))??!1}function iL(t){for(const e of t??[]){if(e.type!=="function")throw new Oe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Oe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var En,iv,Qd,av,ov,lv,qP,HP;const aL=10;class VP extends i0{constructor(){super(...arguments),En.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var s;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(s=e.choices[0])==null?void 0:s.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),UP(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Yd(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Oe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),W(this,En,"m",iv).call(this)}async finalMessage(){return await this.done(),W(this,En,"m",Qd).call(this)}async finalFunctionToolCall(){return await this.done(),W(this,En,"m",av).call(this)}async finalFunctionToolCallResult(){return await this.done(),W(this,En,"m",ov).call(this)}async totalUsage(){return await this.done(),W(this,En,"m",lv).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=W(this,En,"m",Qd).call(this);n&&this._emit("finalMessage",n);const s=W(this,En,"m",iv).call(this);s&&this._emit("finalContent",s);const a=W(this,En,"m",av).call(this);a&&this._emit("finalFunctionToolCall",a);const l=W(this,En,"m",ov).call(this);l!=null&&this._emit("finalFunctionToolCallResult",l),this._chatCompletions.some(c=>c.usage)&&this._emit("totalUsage",W(this,En,"m",lv).call(this))}async _createChatCompletion(e,n,s){const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),W(this,En,"m",qP).call(this,n);const l=await e.chat.completions.create({...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(o0(l,n))}async _runChatCompletion(e,n,s){for(const a of n.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,n,s)}async _runTools(e,n,s){var b,S,A;const a="tool",{tool_choice:l="auto",stream:c,...h}=n,d=typeof l!="string"&&((b=l==null?void 0:l.function)==null?void 0:b.name),{maxChatCompletions:f=aL}=s||{},p=n.tools.map(w=>{if(sc(w)){if(!w.$callback)throw new Oe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:w.$callback,name:w.function.name,description:w.function.description||"",parameters:w.function.parameters,parse:w.$parseRaw,strict:!0}}}return w}),y={};for(const w of p)w.type==="function"&&(y[w.function.name||w.function.function.name]=w.function);const v="tools"in n?p.map(w=>w.type==="function"?{type:"function",function:{name:w.function.name||w.function.function.name,parameters:w.function.parameters,description:w.function.description,strict:w.function.strict}}:w):void 0;for(const w of n.messages)this._addMessage(w,!1);for(let w=0;w<f;++w){const x=(S=(await this._createChatCompletion(e,{...h,tool_choice:l,tools:v,messages:[...this.messages]},s)).choices[0])==null?void 0:S.message;if(!x)throw new Oe("missing message in ChatCompletion response");if(!((A=x.tool_calls)!=null&&A.length))return;for(const P of x.tool_calls){if(P.type!=="function")continue;const O=P.id,{name:R,arguments:M}=P.function,j=y[R];if(j){if(d&&d!==R){const te=`Invalid tool_call: ${JSON.stringify(R)}. ${JSON.stringify(d)} requested. Please try again`;this._addMessage({role:a,tool_call_id:O,content:te});continue}}else{const te=`Invalid tool_call: ${JSON.stringify(R)}. Available options are: ${Object.keys(y).map(Q=>JSON.stringify(Q)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:O,content:te});continue}let $;try{$=eL(j)?await j.parse(M):M}catch(te){const Q=te instanceof Error?te.message:String(te);this._addMessage({role:a,tool_call_id:O,content:Q});continue}const z=await j.function($,this),B=W(this,En,"m",HP).call(this,z);if(this._addMessage({role:a,tool_call_id:O,content:B}),d)return}}}}En=new WeakSet,iv=function(){return W(this,En,"m",Qd).call(this).content??null},Qd=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Yd(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Oe("stream ended without producing a ChatCompletionMessage with role=assistant")},av=function(){var e,n;for(let s=this.messages.length-1;s>=0;s--){const a=this.messages[s];if(Yd(a)&&((e=a==null?void 0:a.tool_calls)!=null&&e.length))return(n=a.tool_calls.at(-1))==null?void 0:n.function}},ov=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(UP(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(s=>{var a;return s.role==="assistant"&&((a=s.tool_calls)==null?void 0:a.some(l=>l.type==="function"&&l.id===n.tool_call_id))}))return n.content}},lv=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},qP=function(e){if(e.n!=null&&e.n>1)throw new Oe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},HP=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class l0 extends VP{static runTools(e,n,s){const a=new l0,l={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,l)),a}_addMessage(e,n=!0){super._addMessage(e,n),Yd(e)&&e.content&&this._emit("content",e.content)}}const GP=1,FP=2,KP=4,YP=8,XP=16,WP=32,QP=64,JP=128,ZP=256,eC=JP|ZP,tC=XP|WP|eC|QP,nC=GP|FP|tC,rC=KP|YP,oL=nC|rC,rn={STR:GP,NUM:FP,ARR:KP,OBJ:YP,NULL:XP,BOOL:WP,NAN:QP,INFINITY:JP,MINUS_INFINITY:ZP,INF:eC,SPECIAL:tC,ATOM:nC,COLLECTION:rC,ALL:oL};class lL extends Error{}class uL extends Error{}function cL(t,e=rn.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return hL(t.trim(),e)}const hL=(t,e)=>{const n=t.length;let s=0;const a=v=>{throw new lL(`${v} at position ${s}`)},l=v=>{throw new uL(`${v} at position ${s}`)},c=()=>(y(),s>=n&&a("Unexpected end of input"),t[s]==='"'?h():t[s]==="{"?d():t[s]==="["?f():t.substring(s,s+4)==="null"||rn.NULL&e&&n-s<4&&"null".startsWith(t.substring(s))?(s+=4,null):t.substring(s,s+4)==="true"||rn.BOOL&e&&n-s<4&&"true".startsWith(t.substring(s))?(s+=4,!0):t.substring(s,s+5)==="false"||rn.BOOL&e&&n-s<5&&"false".startsWith(t.substring(s))?(s+=5,!1):t.substring(s,s+8)==="Infinity"||rn.INFINITY&e&&n-s<8&&"Infinity".startsWith(t.substring(s))?(s+=8,1/0):t.substring(s,s+9)==="-Infinity"||rn.MINUS_INFINITY&e&&1<n-s&&n-s<9&&"-Infinity".startsWith(t.substring(s))?(s+=9,-1/0):t.substring(s,s+3)==="NaN"||rn.NAN&e&&n-s<3&&"NaN".startsWith(t.substring(s))?(s+=3,NaN):p()),h=()=>{const v=s;let b=!1;for(s++;s<n&&(t[s]!=='"'||b&&t[s-1]==="\\");)b=t[s]==="\\"?!b:!1,s++;if(t.charAt(s)=='"')try{return JSON.parse(t.substring(v,++s-Number(b)))}catch(S){l(String(S))}else if(rn.STR&e)try{return JSON.parse(t.substring(v,s-Number(b))+'"')}catch{return JSON.parse(t.substring(v,t.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},d=()=>{s++,y();const v={};try{for(;t[s]!=="}";){if(y(),s>=n&&rn.OBJ&e)return v;const b=h();y(),s++;try{const S=c();Object.defineProperty(v,b,{value:S,writable:!0,enumerable:!0,configurable:!0})}catch(S){if(rn.OBJ&e)return v;throw S}y(),t[s]===","&&s++}}catch{if(rn.OBJ&e)return v;a("Expected '}' at end of object")}return s++,v},f=()=>{s++;const v=[];try{for(;t[s]!=="]";)v.push(c()),y(),t[s]===","&&s++}catch{if(rn.ARR&e)return v;a("Expected ']' at end of array")}return s++,v},p=()=>{if(s===0){t==="-"&&rn.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t)}catch(b){if(rn.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}l(String(b))}}const v=s;for(t[s]==="-"&&s++;t[s]&&!",]}".includes(t[s]);)s++;s==n&&!(rn.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(t.substring(v,s))}catch{t.substring(v,s)==="-"&&rn.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t.substring(v,t.lastIndexOf("e")))}catch(S){l(String(S))}}},y=()=>{for(;s<n&&` 
\r	`.includes(t[s]);)s++};return c()},ox=t=>cL(t,rn.ALL^rn.NUM);var Yt,ws,no,ri,ig,Lh,ag,og,lg,$h,ug,lx;class Uu extends VP{constructor(e){super(),Yt.add(this),ws.set(this,void 0),no.set(this,void 0),ri.set(this,void 0),Me(this,ws,e),Me(this,no,[])}get currentChatCompletionSnapshot(){return W(this,ri,"f")}static fromReadableStream(e){const n=new Uu(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,s){const a=new Uu(n);return a._run(()=>a._runChatCompletion(e,{...n,stream:!0},{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,n,s){var c;super._createChatCompletion;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),W(this,Yt,"m",ig).call(this);const l=await e.chat.completions.create({...n,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const h of l)W(this,Yt,"m",ag).call(this,h);if((c=l.controller.signal)!=null&&c.aborted)throw new ur;return this._addChatCompletion(W(this,Yt,"m",$h).call(this))}async _fromReadableStream(e,n){var c;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),W(this,Yt,"m",ig).call(this),this._connected();const a=Gr.fromReadableStream(e,this.controller);let l;for await(const h of a)l&&l!==h.id&&this._addChatCompletion(W(this,Yt,"m",$h).call(this)),W(this,Yt,"m",ag).call(this,h),l=h.id;if((c=a.controller.signal)!=null&&c.aborted)throw new ur;return this._addChatCompletion(W(this,Yt,"m",$h).call(this))}[(ws=new WeakMap,no=new WeakMap,ri=new WeakMap,Yt=new WeakSet,ig=function(){this.ended||Me(this,ri,void 0)},Lh=function(n){let s=W(this,no,"f")[n.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},W(this,no,"f")[n.index]=s,s)},ag=function(n){var a,l,c,h,d,f,p,y,v,b,S,A,w,_,x;if(this.ended)return;const s=W(this,Yt,"m",lx).call(this,n);this._emit("chunk",n,s);for(const P of n.choices){const O=s.choices[P.index];P.delta.content!=null&&((a=O.message)==null?void 0:a.role)==="assistant"&&((l=O.message)!=null&&l.content)&&(this._emit("content",P.delta.content,O.message.content),this._emit("content.delta",{delta:P.delta.content,snapshot:O.message.content,parsed:O.message.parsed})),P.delta.refusal!=null&&((c=O.message)==null?void 0:c.role)==="assistant"&&((h=O.message)!=null&&h.refusal)&&this._emit("refusal.delta",{delta:P.delta.refusal,snapshot:O.message.refusal}),((d=P.logprobs)==null?void 0:d.content)!=null&&((f=O.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(p=P.logprobs)==null?void 0:p.content,snapshot:((y=O.logprobs)==null?void 0:y.content)??[]}),((v=P.logprobs)==null?void 0:v.refusal)!=null&&((b=O.message)==null?void 0:b.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(S=P.logprobs)==null?void 0:S.refusal,snapshot:((A=O.logprobs)==null?void 0:A.refusal)??[]});const R=W(this,Yt,"m",Lh).call(this,O);O.finish_reason&&(W(this,Yt,"m",lg).call(this,O),R.current_tool_call_index!=null&&W(this,Yt,"m",og).call(this,O,R.current_tool_call_index));for(const M of P.delta.tool_calls??[])R.current_tool_call_index!==M.index&&(W(this,Yt,"m",lg).call(this,O),R.current_tool_call_index!=null&&W(this,Yt,"m",og).call(this,O,R.current_tool_call_index)),R.current_tool_call_index=M.index;for(const M of P.delta.tool_calls??[]){const j=(w=O.message.tool_calls)==null?void 0:w[M.index];j!=null&&j.type&&((j==null?void 0:j.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(_=j.function)==null?void 0:_.name,index:M.index,arguments:j.function.arguments,parsed_arguments:j.function.parsed_arguments,arguments_delta:((x=M.function)==null?void 0:x.arguments)??""}):(j==null||j.type,void 0))}}},og=function(n,s){var c,h,d;if(W(this,Yt,"m",Lh).call(this,n).done_tool_calls.has(s))return;const l=(c=n.message.tool_calls)==null?void 0:c[s];if(!l)throw new Error("no tool call snapshot");if(!l.type)throw new Error("tool call snapshot missing `type`");if(l.type==="function"){const f=(d=(h=W(this,ws,"f"))==null?void 0:h.tools)==null?void 0:d.find(p=>p.type==="function"&&p.function.name===l.function.name);this._emit("tool_calls.function.arguments.done",{name:l.function.name,index:s,arguments:l.function.arguments,parsed_arguments:sc(f)?f.$parseRaw(l.function.arguments):f!=null&&f.function.strict?JSON.parse(l.function.arguments):null})}else l.type},lg=function(n){var a,l;const s=W(this,Yt,"m",Lh).call(this,n);if(n.message.content&&!s.content_done){s.content_done=!0;const c=W(this,Yt,"m",ug).call(this);this._emit("content.done",{content:n.message.content,parsed:c?c.$parseRaw(n.message.content):null})}n.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(a=n.logprobs)!=null&&a.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(l=n.logprobs)!=null&&l.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},$h=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");const n=W(this,ri,"f");if(!n)throw new Oe("request ended without sending any chunks");return Me(this,ri,void 0),Me(this,no,[]),dL(n,W(this,ws,"f"))},ug=function(){var s;const n=(s=W(this,ws,"f"))==null?void 0:s.response_format;return a0(n)?n:null},lx=function(n){var s,a,l,c;let h=W(this,ri,"f");const{choices:d,...f}=n;h?Object.assign(h,f):h=Me(this,ri,{...f,choices:[]});for(const{delta:p,finish_reason:y,index:v,logprobs:b=null,...S}of n.choices){let A=h.choices[v];if(A||(A=h.choices[v]={finish_reason:y,index:v,message:{},logprobs:b,...S}),b)if(!A.logprobs)A.logprobs=Object.assign({},b);else{const{content:M,refusal:j,...$}=b;Object.assign(A.logprobs,$),M&&((s=A.logprobs).content??(s.content=[]),A.logprobs.content.push(...M)),j&&((a=A.logprobs).refusal??(a.refusal=[]),A.logprobs.refusal.push(...j))}if(y&&(A.finish_reason=y,W(this,ws,"f")&&zP(W(this,ws,"f")))){if(y==="length")throw new xP;if(y==="content_filter")throw new TP}if(Object.assign(A,S),!p)continue;const{content:w,refusal:_,function_call:x,role:P,tool_calls:O,...R}=p;if(Object.assign(A.message,R),_&&(A.message.refusal=(A.message.refusal||"")+_),P&&(A.message.role=P),x&&(A.message.function_call?(x.name&&(A.message.function_call.name=x.name),x.arguments&&((l=A.message.function_call).arguments??(l.arguments=""),A.message.function_call.arguments+=x.arguments)):A.message.function_call=x),w&&(A.message.content=(A.message.content||"")+w,!A.message.refusal&&W(this,Yt,"m",ug).call(this)&&(A.message.parsed=ox(A.message.content))),O){A.message.tool_calls||(A.message.tool_calls=[]);for(const{index:M,id:j,type:$,function:z,...B}of O){const te=(c=A.message.tool_calls)[M]??(c[M]={});Object.assign(te,B),j&&(te.id=j),$&&(te.type=$),z&&(te.function??(te.function={name:z.name??"",arguments:""})),z!=null&&z.name&&(te.function.name=z.name),z!=null&&z.arguments&&(te.function.arguments+=z.arguments,sL(W(this,ws,"f"),te)&&(te.function.parsed_arguments=ox(te.function.arguments)))}}}return h},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("chunk",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((l,c)=>n.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Gr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function dL(t,e){const{id:n,choices:s,created:a,model:l,system_fingerprint:c,...h}=t,d={...h,id:n,choices:s.map(({message:f,finish_reason:p,index:y,logprobs:v,...b})=>{if(!p)throw new Oe(`missing finish_reason for choice ${y}`);const{content:S=null,function_call:A,tool_calls:w,..._}=f,x=f.role;if(!x)throw new Oe(`missing role for choice ${y}`);if(A){const{arguments:P,name:O}=A;if(P==null)throw new Oe(`missing function_call.arguments for choice ${y}`);if(!O)throw new Oe(`missing function_call.name for choice ${y}`);return{...b,message:{content:S,function_call:{arguments:P,name:O},role:x,refusal:f.refusal??null},finish_reason:p,index:y,logprobs:v}}return w?{...b,index:y,finish_reason:p,logprobs:v,message:{..._,role:x,content:S,refusal:f.refusal??null,tool_calls:w.map((P,O)=>{const{function:R,type:M,id:j,...$}=P,{arguments:z,name:B,...te}=R||{};if(j==null)throw new Oe(`missing choices[${y}].tool_calls[${O}].id
${Ih(t)}`);if(M==null)throw new Oe(`missing choices[${y}].tool_calls[${O}].type
${Ih(t)}`);if(B==null)throw new Oe(`missing choices[${y}].tool_calls[${O}].function.name
${Ih(t)}`);if(z==null)throw new Oe(`missing choices[${y}].tool_calls[${O}].function.arguments
${Ih(t)}`);return{...$,id:j,type:M,function:{...te,name:B,arguments:z}}})}}:{...b,message:{..._,content:S,role:x,refusal:f.refusal??null},finish_reason:p,index:y,logprobs:v}}),created:a,model:l,object:"chat.completion",...c?{system_fingerprint:c}:{}};return tL(d,e)}function Ih(t){return JSON.stringify(t)}class Jd extends Uu{static fromReadableStream(e){const n=new Jd(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,s){const a=new Jd(n),l={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,l)),a}}let u0=class extends De{constructor(){super(...arguments),this.messages=new IP(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(ge`/chat/completions/${e}`,n)}update(e,n,s){return this._client.post(ge`/chat/completions/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/chat/completions",Ht,{query:e,...n})}delete(e,n){return this._client.delete(ge`/chat/completions/${e}`,n)}parse(e,n){return iL(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>o0(s,e))}runTools(e,n){return e.stream?Jd.runTools(this._client,e,n):l0.runTools(this._client,e,n)}stream(e,n){return Uu.createChatCompletion(this._client,e,n)}};u0.Messages=IP;class c0 extends De{constructor(){super(...arguments),this.completions=new u0(this._client)}}c0.Completions=u0;const sC=Symbol("brand.privateNullableHeaders"),ux=Array.isArray;function*fL(t){if(!t)return;if(sC in t){const{values:s,nulls:a}=t;yield*s.entries();for(const l of a)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():ux(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=ux(s[1])?s[1]:[s[1]];let c=!1;for(const h of l)h!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,h])}}const xe=t=>{const e=new Headers,n=new Set;for(const s of t){const a=new Set;for(const[l,c]of fL(s)){const h=l.toLowerCase();a.has(h)||(e.delete(l),a.add(h)),c===null?(e.delete(l),n.add(h)):(e.append(l,c),n.delete(h))}}return{[sC]:!0,values:e,nulls:n}};class iC extends De{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:xe([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class aC extends De{create(e,n){return this._client.post("/audio/transcriptions",ua({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class oC extends De{create(e,n){return this._client.post("/audio/translations",ua({body:e,...n,__metadata:{model:e.model}},this._client))}}class ic extends De{constructor(){super(...arguments),this.transcriptions=new aC(this._client),this.translations=new oC(this._client),this.speech=new iC(this._client)}}ic.Transcriptions=aC;ic.Translations=oC;ic.Speech=iC;class lC extends De{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(ge`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Ht,{query:e,...n})}cancel(e,n){return this._client.post(ge`/batches/${e}/cancel`,n)}}class uC extends De{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(ge`/assistants/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,s){return this._client.post(ge`/assistants/${e}`,{body:n,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Ht,{query:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(ge`/assistants/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let cC=class extends De{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};class hC extends De{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class bf extends De{constructor(){super(...arguments),this.sessions=new cC(this._client),this.transcriptionSessions=new hC(this._client)}}bf.Sessions=cC;bf.TranscriptionSessions=hC;class dC extends De{create(e,n,s){return this._client.post(ge`/threads/${e}/messages`,{body:n,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,n,s){const{thread_id:a}=n;return this._client.get(ge`/threads/${a}/messages/${e}`,{...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,n,s){const{thread_id:a,...l}=n;return this._client.post(ge`/threads/${a}/messages/${e}`,{body:l,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n={},s){return this._client.getAPIList(ge`/threads/${e}/messages`,Ht,{query:n,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,n,s){const{thread_id:a}=n;return this._client.delete(ge`/threads/${a}/messages/${e}`,{...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class fC extends De{retrieve(e,n,s){const{thread_id:a,run_id:l,...c}=n;return this._client.get(ge`/threads/${a}/runs/${l}/steps/${e}`,{query:c,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n,s){const{thread_id:a,...l}=n;return this._client.getAPIList(ge`/threads/${a}/runs/${e}/steps`,Ht,{query:l,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}const mL=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,s=new Uint8Array(n);for(let a=0;a<n;a++)s[a]=e.charCodeAt(a);return Array.from(new Float32Array(s.buffer))}};var cg={};const ql=t=>{var e,n,s,a;if(typeof globalThis.process<"u")return((e=cg==null?void 0:cg[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(a=(s=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:s.call(n,t))==null?void 0:a.trim()};var hn,na,uv,Hr,Od,Er,ra,yo,ta,Zd,Yn,Md,jd,Au,bu,wu,cx,hx,dx,fx,mx,px,gx;class Pu extends i0{constructor(){super(...arguments),hn.add(this),uv.set(this,[]),Hr.set(this,{}),Od.set(this,{}),Er.set(this,void 0),ra.set(this,void 0),yo.set(this,void 0),ta.set(this,void 0),Zd.set(this,void 0),Yn.set(this,void 0),Md.set(this,void 0),jd.set(this,void 0),Au.set(this,void 0)}[(uv=new WeakMap,Hr=new WeakMap,Od=new WeakMap,Er=new WeakMap,ra=new WeakMap,yo=new WeakMap,ta=new WeakMap,Zd=new WeakMap,Yn=new WeakMap,Md=new WeakMap,jd=new WeakMap,Au=new WeakMap,hn=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((l,c)=>n.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new na;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var l;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=Gr.fromReadableStream(e,this.controller);for await(const c of a)W(this,hn,"m",bu).call(this,c);if((l=a.controller.signal)!=null&&l.aborted)throw new ur;return this._addRun(W(this,hn,"m",wu).call(this))}toReadableStream(){return new Gr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,s,a){const l=new na;return l._run(()=>l._runToolAssistantStream(e,n,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),l}async _createToolAssistantStream(e,n,s,a){var d;const l=a==null?void 0:a.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const c={...s,stream:!0},h=await e.submitToolOutputs(n,c,{...a,signal:this.controller.signal});this._connected();for await(const f of h)W(this,hn,"m",bu).call(this,f);if((d=h.controller.signal)!=null&&d.aborted)throw new ur;return this._addRun(W(this,hn,"m",wu).call(this))}static createThreadAssistantStream(e,n,s){const a=new na;return a._run(()=>a._threadAssistantStream(e,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,n,s,a){const l=new na;return l._run(()=>l._runAssistantStream(e,n,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),l}currentEvent(){return W(this,Md,"f")}currentRun(){return W(this,jd,"f")}currentMessageSnapshot(){return W(this,Er,"f")}currentRunStepSnapshot(){return W(this,Au,"f")}async finalRunSteps(){return await this.done(),Object.values(W(this,Hr,"f"))}async finalMessages(){return await this.done(),Object.values(W(this,Od,"f"))}async finalRun(){if(await this.done(),!W(this,ra,"f"))throw Error("Final run was not received.");return W(this,ra,"f")}async _createThreadAssistantStream(e,n,s){var h;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...n,stream:!0},c=await e.createAndRun(l,{...s,signal:this.controller.signal});this._connected();for await(const d of c)W(this,hn,"m",bu).call(this,d);if((h=c.controller.signal)!=null&&h.aborted)throw new ur;return this._addRun(W(this,hn,"m",wu).call(this))}async _createAssistantStream(e,n,s,a){var d;const l=a==null?void 0:a.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const c={...s,stream:!0},h=await e.create(n,c,{...a,signal:this.controller.signal});this._connected();for await(const f of h)W(this,hn,"m",bu).call(this,f);if((d=h.controller.signal)!=null&&d.aborted)throw new ur;return this._addRun(W(this,hn,"m",wu).call(this))}static accumulateDelta(e,n){for(const[s,a]of Object.entries(n)){if(!e.hasOwnProperty(s)){e[s]=a;continue}let l=e[s];if(l==null){e[s]=a;continue}if(s==="index"||s==="type"){e[s]=a;continue}if(typeof l=="string"&&typeof a=="string")l+=a;else if(typeof l=="number"&&typeof a=="number")l+=a;else if(ng(l)&&ng(a))l=this.accumulateDelta(l,a);else if(Array.isArray(l)&&Array.isArray(a)){if(l.every(c=>typeof c=="string"||typeof c=="number")){l.push(...a);continue}for(const c of a){if(!ng(c))throw new Error(`Expected array delta entry to be an object but got: ${c}`);const h=c.index;if(h==null)throw console.error(c),new Error("Expected array delta entry to have an `index` property");if(typeof h!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${h}`);const d=l[h];d==null?l.push(c):l[h]=this.accumulateDelta(d,c)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${a}, accValue: ${l}`);e[s]=l}return e}_addRun(e){return e}async _threadAssistantStream(e,n,s){return await this._createThreadAssistantStream(n,e,s)}async _runAssistantStream(e,n,s,a){return await this._createAssistantStream(n,e,s,a)}async _runToolAssistantStream(e,n,s,a){return await this._createToolAssistantStream(n,e,s,a)}}na=Pu,bu=function(e){if(!this.ended)switch(Me(this,Md,e),W(this,hn,"m",dx).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":W(this,hn,"m",gx).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":W(this,hn,"m",hx).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":W(this,hn,"m",cx).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},wu=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");if(!W(this,ra,"f"))throw Error("Final run has not been received");return W(this,ra,"f")},cx=function(e){const[n,s]=W(this,hn,"m",mx).call(this,e,W(this,Er,"f"));Me(this,Er,n),W(this,Od,"f")[n.id]=n;for(const a of s){const l=n.content[a.index];(l==null?void 0:l.type)=="text"&&this._emit("textCreated",l.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let l=a.text,c=n.content[a.index];if(c&&c.type=="text")this._emit("textDelta",l,c.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=W(this,yo,"f")){if(W(this,ta,"f"))switch(W(this,ta,"f").type){case"text":this._emit("textDone",W(this,ta,"f").text,W(this,Er,"f"));break;case"image_file":this._emit("imageFileDone",W(this,ta,"f").image_file,W(this,Er,"f"));break}Me(this,yo,a.index)}Me(this,ta,n.content[a.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(W(this,yo,"f")!==void 0){const a=e.data.content[W(this,yo,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,W(this,Er,"f"));break;case"text":this._emit("textDone",a.text,W(this,Er,"f"));break}}W(this,Er,"f")&&this._emit("messageDone",e.data),Me(this,Er,void 0)}},hx=function(e){const n=W(this,hn,"m",fx).call(this,e);switch(Me(this,Au,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const l of s.step_details.tool_calls)l.index==W(this,Zd,"f")?this._emit("toolCallDelta",l,n.step_details.tool_calls[l.index]):(W(this,Yn,"f")&&this._emit("toolCallDone",W(this,Yn,"f")),Me(this,Zd,l.index),Me(this,Yn,n.step_details.tool_calls[l.index]),W(this,Yn,"f")&&this._emit("toolCallCreated",W(this,Yn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Me(this,Au,void 0),e.data.step_details.type=="tool_calls"&&W(this,Yn,"f")&&(this._emit("toolCallDone",W(this,Yn,"f")),Me(this,Yn,void 0)),this._emit("runStepDone",e.data,n);break}},dx=function(e){W(this,uv,"f").push(e),this._emit("event",e)},fx=function(e){switch(e.event){case"thread.run.step.created":return W(this,Hr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=W(this,Hr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const a=na.accumulateDelta(n,s.delta);W(this,Hr,"f")[e.data.id]=a}return W(this,Hr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":W(this,Hr,"f")[e.data.id]=e.data;break}if(W(this,Hr,"f")[e.data.id])return W(this,Hr,"f")[e.data.id];throw new Error("No snapshot available")},mx=function(e,n){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const l of a.delta.content)if(l.index in n.content){let c=n.content[l.index];n.content[l.index]=W(this,hn,"m",px).call(this,l,c)}else n.content[l.index]=l,s.push(l);return[n,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},px=function(e,n){return na.accumulateDelta(n,e)},gx=function(e){switch(Me(this,jd,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Me(this,ra,e.data),W(this,Yn,"f")&&(this._emit("toolCallDone",W(this,Yn,"f")),Me(this,Yn,void 0));break}};let h0=class extends De{constructor(){super(...arguments),this.steps=new fC(this._client)}create(e,n,s){const{include:a,...l}=n;return this._client.post(ge`/threads/${e}/runs`,{query:{include:a},body:l,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:n.stream??!1})}retrieve(e,n,s){const{thread_id:a}=n;return this._client.get(ge`/threads/${a}/runs/${e}`,{...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,n,s){const{thread_id:a,...l}=n;return this._client.post(ge`/threads/${a}/runs/${e}`,{body:l,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n={},s){return this._client.getAPIList(ge`/threads/${e}/runs`,Ht,{query:n,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,n,s){const{thread_id:a}=n;return this._client.post(ge`/threads/${a}/runs/${e}/cancel`,{...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n,s);return await this.poll(a.id,{thread_id:e},s)}createAndStream(e,n,s){return Pu.createAssistantStream(e,this._client.beta.threads.runs,n,s)}async poll(e,n,s){var l;const a=xe([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((l=s==null?void 0:s.pollIntervalMs)==null?void 0:l.toString())??void 0}]);for(;;){const{data:c,response:h}=await this.retrieve(e,n,{...s,headers:{...s==null?void 0:s.headers,...a}}).withResponse();switch(c.status){case"queued":case"in_progress":case"cancelling":let d=5e3;if(s!=null&&s.pollIntervalMs)d=s.pollIntervalMs;else{const f=h.headers.get("openai-poll-after-ms");if(f){const p=parseInt(f);isNaN(p)||(d=p)}}await rc(d);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return c}}}stream(e,n,s){return Pu.createAssistantStream(e,this._client.beta.threads.runs,n,s)}submitToolOutputs(e,n,s){const{thread_id:a,...l}=n;return this._client.post(ge`/threads/${a}/runs/${e}/submit_tool_outputs`,{body:l,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,s){const a=await this.submitToolOutputs(e,n,s);return await this.poll(a.id,n,s)}submitToolOutputsStream(e,n,s){return Pu.createToolAssistantStream(e,this._client.beta.threads.runs,n,s)}};h0.Steps=fC;class wf extends De{constructor(){super(...arguments),this.runs=new h0(this._client),this.messages=new dC(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(ge`/threads/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,s){return this._client.post(ge`/threads/${e}`,{body:n,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,n){return this._client.delete(ge`/threads/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const s=await this.createAndRun(e,n);return await this.runs.poll(s.id,{thread_id:s.thread_id},n)}createAndRunStream(e,n){return Pu.createThreadAssistantStream(e,this._client.beta.threads,n)}}wf.Runs=h0;wf.Messages=dC;class ac extends De{constructor(){super(...arguments),this.realtime=new bf(this._client),this.assistants=new uC(this._client),this.threads=new wf(this._client)}}ac.Realtime=bf;ac.Assistants=uC;ac.Threads=wf;class mC extends De{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class pC extends De{retrieve(e,n,s){const{container_id:a}=n;return this._client.get(ge`/containers/${a}/files/${e}/content`,{...s,headers:xe([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}}let d0=class extends De{constructor(){super(...arguments),this.content=new pC(this._client)}create(e,n,s){return this._client.post(ge`/containers/${e}/files`,ua({body:n,...s},this._client))}retrieve(e,n,s){const{container_id:a}=n;return this._client.get(ge`/containers/${a}/files/${e}`,s)}list(e,n={},s){return this._client.getAPIList(ge`/containers/${e}/files`,Ht,{query:n,...s})}delete(e,n,s){const{container_id:a}=n;return this._client.delete(ge`/containers/${a}/files/${e}`,{...s,headers:xe([{Accept:"*/*"},s==null?void 0:s.headers])})}};d0.Content=pC;class f0 extends De{constructor(){super(...arguments),this.files=new d0(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(ge`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Ht,{query:e,...n})}delete(e,n){return this._client.delete(ge`/containers/${e}`,{...n,headers:xe([{Accept:"*/*"},n==null?void 0:n.headers])})}}f0.Files=d0;class gC extends De{create(e,n){const s=!!e.encoding_format;let a=s?e.encoding_format:"base64";s&&yn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const l=this._client.post("/embeddings",{body:{...e,encoding_format:a},...n});return s?l:(yn(this._client).debug("embeddings/decoding base64 embeddings from base64"),l._thenUnwrap(c=>(c&&c.data&&c.data.forEach(h=>{const d=h.embedding;h.embedding=mL(d)}),c)))}}class yC extends De{retrieve(e,n,s){const{eval_id:a,run_id:l}=n;return this._client.get(ge`/evals/${a}/runs/${l}/output_items/${e}`,s)}list(e,n,s){const{eval_id:a,...l}=n;return this._client.getAPIList(ge`/evals/${a}/runs/${e}/output_items`,Ht,{query:l,...s})}}class m0 extends De{constructor(){super(...arguments),this.outputItems=new yC(this._client)}create(e,n,s){return this._client.post(ge`/evals/${e}/runs`,{body:n,...s})}retrieve(e,n,s){const{eval_id:a}=n;return this._client.get(ge`/evals/${a}/runs/${e}`,s)}list(e,n={},s){return this._client.getAPIList(ge`/evals/${e}/runs`,Ht,{query:n,...s})}delete(e,n,s){const{eval_id:a}=n;return this._client.delete(ge`/evals/${a}/runs/${e}`,s)}cancel(e,n,s){const{eval_id:a}=n;return this._client.post(ge`/evals/${a}/runs/${e}`,s)}}m0.OutputItems=yC;class p0 extends De{constructor(){super(...arguments),this.runs=new m0(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(ge`/evals/${e}`,n)}update(e,n,s){return this._client.post(ge`/evals/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/evals",Ht,{query:e,...n})}delete(e,n){return this._client.delete(ge`/evals/${e}`,n)}}p0.Runs=m0;let vC=class extends De{create(e,n){return this._client.post("/files",ua({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ge`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Ht,{query:e,...n})}delete(e,n){return this._client.delete(ge`/files/${e}`,n)}content(e,n){return this._client.get(ge`/files/${e}/content`,{...n,headers:xe([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:s=30*60*1e3}={}){const a=new Set(["processed","error","deleted"]),l=Date.now();let c=await this.retrieve(e);for(;!c.status||!a.has(c.status);)if(await rc(n),c=await this.retrieve(e),Date.now()-l>s)throw new r0({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return c}};class bC extends De{}let wC=class extends De{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class g0 extends De{constructor(){super(...arguments),this.graders=new wC(this._client)}}g0.Graders=wC;class _C extends De{create(e,n,s){return this._client.getAPIList(ge`/fine_tuning/checkpoints/${e}/permissions`,vf,{body:n,method:"post",...s})}retrieve(e,n={},s){return this._client.get(ge`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...s})}delete(e,n,s){const{fine_tuned_model_checkpoint:a}=n;return this._client.delete(ge`/fine_tuning/checkpoints/${a}/permissions/${e}`,s)}}let y0=class extends De{constructor(){super(...arguments),this.permissions=new _C(this._client)}};y0.Permissions=_C;class SC extends De{list(e,n={},s){return this._client.getAPIList(ge`/fine_tuning/jobs/${e}/checkpoints`,Ht,{query:n,...s})}}class v0 extends De{constructor(){super(...arguments),this.checkpoints=new SC(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(ge`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Ht,{query:e,...n})}cancel(e,n){return this._client.post(ge`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},s){return this._client.getAPIList(ge`/fine_tuning/jobs/${e}/events`,Ht,{query:n,...s})}pause(e,n){return this._client.post(ge`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(ge`/fine_tuning/jobs/${e}/resume`,n)}}v0.Checkpoints=SC;class ko extends De{constructor(){super(...arguments),this.methods=new bC(this._client),this.jobs=new v0(this._client),this.checkpoints=new y0(this._client),this.alpha=new g0(this._client)}}ko.Methods=bC;ko.Jobs=v0;ko.Checkpoints=y0;ko.Alpha=g0;class xC extends De{}class b0 extends De{constructor(){super(...arguments),this.graderModels=new xC(this._client)}}b0.GraderModels=xC;class TC extends De{createVariation(e,n){return this._client.post("/images/variations",ua({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",ua({body:e,...n},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class EC extends De{retrieve(e,n){return this._client.get(ge`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",vf,e)}delete(e,n){return this._client.delete(ge`/models/${e}`,n)}}class AC extends De{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function pL(t,e){return!e||!yL(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(s=>({...s,parsed:null}))}:n)}:PC(t,e)}function PC(t,e){const n=t.output.map(a=>{if(a.type==="function_call")return{...a,parsed_arguments:wL(e,a)};if(a.type==="message"){const l=a.content.map(c=>c.type==="output_text"?{...c,parsed:gL(e,c.text)}:c);return{...a,content:l}}return a}),s=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||CC(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const a of s.output)if(a.type==="message"){for(const l of a.content)if(l.type==="output_text"&&l.parsed!==null)return l.parsed}return null}}),s}function gL(t,e){var n,s,a,l;return((s=(n=t.text)==null?void 0:n.format)==null?void 0:s.type)!=="json_schema"?null:"$parseRaw"in((a=t.text)==null?void 0:a.format)?((l=t.text)==null?void 0:l.format).$parseRaw(e):JSON.parse(e)}function yL(t){var e;return!!a0((e=t.text)==null?void 0:e.format)}function vL(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function bL(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function wL(t,e){const n=bL(t.tools??[],e.name);return{...e,...e,parsed_arguments:vL(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function CC(t){const e=[];for(const n of t.output)if(n.type==="message")for(const s of n.content)s.type==="output_text"&&e.push(s.text);t.output_text=e.join("")}var ro,Uh,si,Bh,yx,vx,bx,wx;class w0 extends i0{constructor(e){super(),ro.add(this),Uh.set(this,void 0),si.set(this,void 0),Bh.set(this,void 0),Me(this,Uh,e)}static createResponse(e,n,s){const a=new w0(n);return a._run(()=>a._createOrRetrieveResponse(e,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createOrRetrieveResponse(e,n,s){var h;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),W(this,ro,"m",yx).call(this);let l,c=null;"response_id"in n?(l=await e.responses.retrieve(n.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),c=n.starting_after??null):l=await e.responses.create({...n,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const d of l)W(this,ro,"m",vx).call(this,d,c);if((h=l.controller.signal)!=null&&h.aborted)throw new ur;return W(this,ro,"m",bx).call(this)}[(Uh=new WeakMap,si=new WeakMap,Bh=new WeakMap,ro=new WeakSet,yx=function(){this.ended||Me(this,si,void 0)},vx=function(n,s){if(this.ended)return;const a=(c,h)=>{(s==null||h.sequence_number>s)&&this._emit(c,h)},l=W(this,ro,"m",wx).call(this,n);switch(a("event",n),n.type){case"response.output_text.delta":{const c=l.output[n.output_index];if(!c)throw new Oe(`missing output at index ${n.output_index}`);if(c.type==="message"){const h=c.content[n.content_index];if(!h)throw new Oe(`missing content at index ${n.content_index}`);if(h.type!=="output_text")throw new Oe(`expected content to be 'output_text', got ${h.type}`);a("response.output_text.delta",{...n,snapshot:h.text})}break}case"response.function_call_arguments.delta":{const c=l.output[n.output_index];if(!c)throw new Oe(`missing output at index ${n.output_index}`);c.type==="function_call"&&a("response.function_call_arguments.delta",{...n,snapshot:c.arguments});break}default:a(n.type,n);break}},bx=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");const n=W(this,si,"f");if(!n)throw new Oe("request ended without sending any events");Me(this,si,void 0);const s=_L(n,W(this,Uh,"f"));return Me(this,Bh,s),s},wx=function(n){let s=W(this,si,"f");if(!s){if(n.type!=="response.created")throw new Oe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return s=Me(this,si,n.response),s}switch(n.type){case"response.output_item.added":{s.output.push(n.item);break}case"response.content_part.added":{const a=s.output[n.output_index];if(!a)throw new Oe(`missing output at index ${n.output_index}`);a.type==="message"&&a.content.push(n.part);break}case"response.output_text.delta":{const a=s.output[n.output_index];if(!a)throw new Oe(`missing output at index ${n.output_index}`);if(a.type==="message"){const l=a.content[n.content_index];if(!l)throw new Oe(`missing content at index ${n.content_index}`);if(l.type!=="output_text")throw new Oe(`expected content to be 'output_text', got ${l.type}`);l.text+=n.delta}break}case"response.function_call_arguments.delta":{const a=s.output[n.output_index];if(!a)throw new Oe(`missing output at index ${n.output_index}`);a.type==="function_call"&&(a.arguments+=n.delta);break}case"response.completed":{Me(this,si,n.response);break}}return s},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",a=>{const l=n.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const l of n)l.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((l,c)=>n.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=W(this,Bh,"f");if(!e)throw new Oe("stream ended without producing a ChatCompletion");return e}}function _L(t,e){return pL(t,e)}class RC extends De{list(e,n={},s){return this._client.getAPIList(ge`/responses/${e}/input_items`,Ht,{query:n,...s})}}class _0 extends De{constructor(){super(...arguments),this.inputItems=new RC(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&CC(s),s))}retrieve(e,n={},s){return this._client.get(ge`/responses/${e}`,{query:n,...s,stream:(n==null?void 0:n.stream)??!1})}delete(e,n){return this._client.delete(ge`/responses/${e}`,{...n,headers:xe([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(s=>PC(s,e))}stream(e,n){return w0.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(ge`/responses/${e}/cancel`,n)}}_0.InputItems=RC;class OC extends De{create(e,n,s){return this._client.post(ge`/uploads/${e}/parts`,ua({body:n,...s},this._client))}}class S0 extends De{constructor(){super(...arguments),this.parts=new OC(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(ge`/uploads/${e}/cancel`,n)}complete(e,n,s){return this._client.post(ge`/uploads/${e}/complete`,{body:n,...s})}}S0.Parts=OC;const SL=async t=>{const e=await Promise.allSettled(t),n=e.filter(a=>a.status==="rejected");if(n.length){for(const a of n)console.error(a.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const s=[];for(const a of e)a.status==="fulfilled"&&s.push(a.value);return s};class MC extends De{create(e,n,s){return this._client.post(ge`/vector_stores/${e}/file_batches`,{body:n,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,n,s){const{vector_store_id:a}=n;return this._client.get(ge`/vector_stores/${a}/file_batches/${e}`,{...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,n,s){const{vector_store_id:a}=n;return this._client.post(ge`/vector_stores/${a}/file_batches/${e}/cancel`,{...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n);return await this.poll(e,a.id,s)}listFiles(e,n,s){const{vector_store_id:a,...l}=n;return this._client.getAPIList(ge`/vector_stores/${a}/file_batches/${e}/files`,Ht,{query:l,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async poll(e,n,s){var l;const a=xe([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((l=s==null?void 0:s.pollIntervalMs)==null?void 0:l.toString())??void 0}]);for(;;){const{data:c,response:h}=await this.retrieve(n,{vector_store_id:e},{...s,headers:a}).withResponse();switch(c.status){case"in_progress":let d=5e3;if(s!=null&&s.pollIntervalMs)d=s.pollIntervalMs;else{const f=h.headers.get("openai-poll-after-ms");if(f){const p=parseInt(f);isNaN(p)||(d=p)}}await rc(d);break;case"failed":case"cancelled":case"completed":return c}}}async uploadAndPoll(e,{files:n,fileIds:s=[]},a){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const l=(a==null?void 0:a.maxConcurrency)??5,c=Math.min(l,n.length),h=this._client,d=n.values(),f=[...s];async function p(v){for(let b of v){const S=await h.files.create({file:b,purpose:"assistants"},a);f.push(S.id)}}const y=Array(c).fill(d).map(p);return await SL(y),await this.createAndPoll(e,{file_ids:f})}}let jC=class extends De{create(e,n,s){return this._client.post(ge`/vector_stores/${e}/files`,{body:n,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,n,s){const{vector_store_id:a}=n;return this._client.get(ge`/vector_stores/${a}/files/${e}`,{...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,n,s){const{vector_store_id:a,...l}=n;return this._client.post(ge`/vector_stores/${a}/files/${e}`,{body:l,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n={},s){return this._client.getAPIList(ge`/vector_stores/${e}/files`,Ht,{query:n,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,n,s){const{vector_store_id:a}=n;return this._client.delete(ge`/vector_stores/${a}/files/${e}`,{...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n,s);return await this.poll(e,a.id,s)}async poll(e,n,s){var l;const a=xe([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((l=s==null?void 0:s.pollIntervalMs)==null?void 0:l.toString())??void 0}]);for(;;){const c=await this.retrieve(n,{vector_store_id:e},{...s,headers:a}).withResponse(),h=c.data;switch(h.status){case"in_progress":let d=5e3;if(s!=null&&s.pollIntervalMs)d=s.pollIntervalMs;else{const f=c.response.headers.get("openai-poll-after-ms");if(f){const p=parseInt(f);isNaN(p)||(d=p)}}await rc(d);break;case"failed":case"completed":return h}}}async upload(e,n,s){const a=await this._client.files.create({file:n,purpose:"assistants"},s);return this.create(e,{file_id:a.id},s)}async uploadAndPoll(e,n,s){const a=await this.upload(e,n,s);return await this.poll(e,a.id,s)}content(e,n,s){const{vector_store_id:a}=n;return this._client.getAPIList(ge`/vector_stores/${a}/files/${e}/content`,vf,{...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}};class _f extends De{constructor(){super(...arguments),this.files=new jC(this._client),this.fileBatches=new MC(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(ge`/vector_stores/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,s){return this._client.post(ge`/vector_stores/${e}`,{body:n,...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Ht,{query:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(ge`/vector_stores/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,s){return this._client.getAPIList(ge`/vector_stores/${e}/search`,vf,{body:n,method:"post",...s,headers:xe([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}_f.Files=jC;_f.FileBatches=MC;var x0,Dd;class Ke{constructor({baseURL:e=ql("OPENAI_BASE_URL"),apiKey:n=ql("OPENAI_API_KEY"),organization:s=ql("OPENAI_ORG_ID")??null,project:a=ql("OPENAI_PROJECT_ID")??null,...l}={}){if(Dd.set(this,void 0),this.completions=new mC(this),this.chat=new c0(this),this.embeddings=new gC(this),this.files=new vC(this),this.images=new TC(this),this.audio=new ic(this),this.moderations=new AC(this),this.models=new EC(this),this.fineTuning=new ko(this),this.graders=new b0(this),this.vectorStores=new _f(this),this.beta=new ac(this),this.batches=new lC(this),this.uploads=new S0(this),this.responses=new _0(this),this.evals=new p0(this),this.containers=new f0(this),n===void 0)throw new Oe("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const c={apiKey:n,organization:s,project:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&w3())throw new Oe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??x0.DEFAULT_TIMEOUT,this.logger=c.logger??console;const h="warn";this.logLevel=h,this.logLevel=QS(c.logLevel,"ClientOptions.logLevel",this)??QS(ql("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??h,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??E3(),Me(this,Dd,P3),this._options=c,this.apiKey=n,this.organization=s,this.project=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}authHeaders(e){return xe([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return $3(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${po}`}defaultIdempotencyKey(){return`stainless-node-retry-${mP()}`}makeStatusError(e,n,s,a){return dn.generate(e,n,s,a)}buildURL(e,n){const s=f3(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return p3(a)||(n={...a,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(a=>({method:e,path:n,...a})))}request(e,n=null){return new yf(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var _,x;const a=await e,l=a.maxRetries??this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:h,timeout:d}=this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:h,options:a});const f="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),p=s===void 0?"":`, retryOf: ${s}`,y=Date.now();if(yn(this).debug(`[${f}] sending request`,Ji({retryOfRequestLogID:s,method:a.method,url:h,options:a,headers:c.headers})),(_=a.signal)!=null&&_.aborted)throw new ur;const v=new AbortController,b=await this.fetchWithTimeout(h,c,d,v).catch(Zy),S=Date.now();if(b instanceof Error){const P=`retrying, ${n} attempts remaining`;if((x=a.signal)!=null&&x.aborted)throw new ur;const O=Jy(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return yn(this).info(`[${f}] connection ${O?"timed out":"failed"} - ${P}`),yn(this).debug(`[${f}] connection ${O?"timed out":"failed"} (${P})`,Ji({retryOfRequestLogID:s,url:h,durationMs:S-y,message:b.message})),this.retryRequest(a,n,s??f);throw yn(this).info(`[${f}] connection ${O?"timed out":"failed"} - error; no more retries left`),yn(this).debug(`[${f}] connection ${O?"timed out":"failed"} (error; no more retries left)`,Ji({retryOfRequestLogID:s,url:h,durationMs:S-y,message:b.message})),O?new r0:new pf({cause:b})}const A=[...b.headers.entries()].filter(([P])=>P==="x-request-id").map(([P,O])=>", "+P+": "+JSON.stringify(O)).join(""),w=`[${f}${p}${A}] ${c.method} ${h} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${S-y}ms`;if(!b.ok){const P=this.shouldRetry(b);if(n&&P){const z=`retrying, ${n} attempts remaining`;return await A3(b.body),yn(this).info(`${w} - ${z}`),yn(this).debug(`[${f}] response error (${z})`,Ji({retryOfRequestLogID:s,url:b.url,status:b.status,headers:b.headers,durationMs:S-y})),this.retryRequest(a,n,s??f,b.headers)}const O=P?"error; no more retries left":"error; not retryable";yn(this).info(`${w} - ${O}`);const R=await b.text().catch(z=>Zy(z).message),M=v3(R),j=M?void 0:R;throw yn(this).debug(`[${f}] response error (${O})`,Ji({retryOfRequestLogID:s,url:b.url,status:b.status,headers:b.headers,message:j,durationMs:Date.now()-y})),this.makeStatusError(b.status,M,j,b.headers)}return yn(this).info(w),yn(this).debug(`[${f}] response start`,Ji({retryOfRequestLogID:s,url:b.url,status:b.status,headers:b.headers,durationMs:S-y})),{response:b,options:a,controller:v,requestLogID:f,retryOfRequestLogID:s,startTime:y}}getAPIList(e,n,s){return this.requestAPIList(n,{method:"get",path:e,...s})}requestAPIList(e,n){const s=this.makeRequest(n,null,void 0);return new G3(this,s,e)}async fetchWithTimeout(e,n,s,a){const{signal:l,method:c,...h}=n||{};l&&l.addEventListener("abort",()=>a.abort());const d=setTimeout(()=>a.abort(),s),f=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,p={signal:a.signal,...f?{duplex:"half"}:{},method:"GET",...h};c&&(p.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(d)}}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,a){let l;const c=a==null?void 0:a.get("retry-after-ms");if(c){const d=parseFloat(c);Number.isNaN(d)||(l=d)}const h=a==null?void 0:a.get("retry-after");if(h&&!l){const d=parseFloat(h);Number.isNaN(d)?l=Date.parse(h)-Date.now():l=d*1e3}if(!(l&&0<=l&&l<60*1e3)){const d=e.maxRetries??this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,d)}return await rc(l),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,c=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return c*h*1e3}buildRequest(e,{retryCount:n=0}={}){const s={...e},{method:a,path:l,query:c}=s,h=this.buildURL(l,c);"timeout"in s&&y3("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:d,body:f}=this.buildBody({options:s}),p=this.buildHeaders({options:e,method:a,bodyHeaders:d,retryCount:n});return{req:{method:a,headers:p,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...s.fetchOptions??{}},url:h,timeout:s.timeout}}buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:a}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=xe([l,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...T3(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=xe([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:AP(e)}:W(this,Dd,"f").call(this,{body:e,headers:s})}}x0=Ke,Dd=new WeakMap;Ke.OpenAI=x0;Ke.DEFAULT_TIMEOUT=6e5;Ke.OpenAIError=Oe;Ke.APIError=dn;Ke.APIConnectionError=pf;Ke.APIConnectionTimeoutError=r0;Ke.APIUserAbortError=ur;Ke.NotFoundError=vP;Ke.ConflictError=bP;Ke.RateLimitError=_P;Ke.BadRequestError=pP;Ke.AuthenticationError=gP;Ke.InternalServerError=SP;Ke.PermissionDeniedError=yP;Ke.UnprocessableEntityError=wP;Ke.toFile=Q3;Ke.Completions=mC;Ke.Chat=c0;Ke.Embeddings=gC;Ke.Files=vC;Ke.Images=TC;Ke.Audio=ic;Ke.Moderations=AC;Ke.Models=EC;Ke.FineTuning=ko;Ke.Graders=b0;Ke.VectorStores=_f;Ke.Beta=ac;Ke.Batches=lC;Ke.Uploads=S0;Ke.Responses=_0;Ke.Evals=p0;Ke.Containers=f0;const DC="PLACEHOLDER_KEY",T0=!!DC,_x=T0?new Ke({apiKey:DC,dangerouslyAllowBrowser:!0}):null;T0||console.warn("[OpenAI] No API key detected. Chat features will return placeholder responses.  Provide VITE_OPENAI_API_KEY in your .env file to enable.");function xL(t){return t.filter(e=>e.role!=="system").map(e=>({role:e.role,content:e.content}))}async function TL(t,e,n,s){var a,l;if(!T0||!_x){s("(Streaming is unavailable because no OpenAI API key is configured.)");return}try{const h=[{role:"system",content:`You are ${t}, ${e}. 
      Respond to the user's messages in first person, as if you are truly ${t}.
      Draw from biblical knowledge, historical context, and the character's known personality traits.
      Keep responses concise (under 150 words) but meaningful and in the authentic voice of ${t}.
      Never break character or refer to yourself as an AI.`},...n],d=await _x.chat.completions.create({model:"gpt-4",messages:h,temperature:.7,max_tokens:300,top_p:1,frequency_penalty:.2,presence_penalty:.6,stream:!0});for await(const f of d){const p=((l=(a=f.choices[0])==null?void 0:a.delta)==null?void 0:l.content)||"";p&&s(p)}}catch(c){throw console.error("Error streaming character response:",c),new Error("Failed to generate character response. Please try again.")}}const hg=t=>`https://ui-avatars.com/api/?name=${encodeURIComponent(t)}&background=random`,ii=(t,e)=>{if(!e)return hg(t);try{const{hostname:n}=new URL(e);return n==="example.com"||n.endsWith(".example.com")||n==="localhost"?hg(t):e}catch{return hg(t)}},kd={sanitizeCharacter(t){if(!t)return t;const e={...t};return e.avatar_url&&(e.avatar_url=ii(e.name,e.avatar_url)),e.feature_image_url&&(e.feature_image_url=ii(e.name,e.feature_image_url)),e},sanitizeCharacters(t){return t.map(e=>this.sanitizeCharacter(e))},async getAll(t=!1){try{const{data:e,error:n}=await ht.from("characters").select("*").modify(s=>{t||s.or("is_visible.is.null,is_visible.eq.true")}).order("name");if(n)throw n;return this.sanitizeCharacters(e)}catch(e){throw console.error("Failed to fetch characters:",e),new Error("Failed to fetch characters. Please try again later.")}},async getById(t){try{const{data:e,error:n}=await ht.from("characters").select("*").eq("id",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return this.sanitizeCharacter(e)}catch(e){throw console.error(`Failed to fetch character with ID ${t}:`,e),new Error("Failed to fetch character. Please try again later.")}},async getByName(t){try{const{data:e,error:n}=await ht.from("characters").select("*").ilike("name",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return this.sanitizeCharacter(e)}catch(e){throw console.error(`Failed to fetch character with name ${t}:`,e),new Error("Failed to fetch character. Please try again later.")}},async search(t,e=!1){try{const{data:n,error:s}=await ht.from("characters").select("*").ilike("name",`%${t}%`).modify(a=>{e||a.or("is_visible.is.null,is_visible.eq.true")}).order("name");if(s)throw s;return this.sanitizeCharacters(n)}catch(n){throw console.error(`Failed to search characters with query ${t}:`,n),new Error("Failed to search characters. Please try again later.")}},async createCharacter(t){try{const e={...t,avatar_url:t.avatar_url?ii(t.name,t.avatar_url):t.avatar_url,feature_image_url:t.feature_image_url?ii(t.name,t.feature_image_url):t.feature_image_url},{data:n,error:s}=await ht.from("characters").insert(e).select("*").single();if(s)throw s;return this.sanitizeCharacter(n)}catch(e){throw console.error("Failed to create character:",e),new Error("Failed to create character. Please try again later.")}},async updateCharacter(t,e){try{const n={...e};e.avatar_url&&e.name&&(n.avatar_url=ii(e.name,e.avatar_url)),e.feature_image_url&&e.name&&(n.feature_image_url=ii(e.name,e.feature_image_url));const{data:s,error:a}=await ht.from("characters").update({...n,updated_at:new Date().toISOString()}).eq("id",t).select("*").single();if(a)throw a;return this.sanitizeCharacter(s)}catch(n){throw console.error(`Failed to update character ${t}:`,n),new Error("Failed to update character. Please try again later.")}},async deleteCharacter(t){try{const{error:e}=await ht.from("characters").delete().eq("id",t);if(e)throw e}catch(e){throw console.error(`Failed to delete character ${t}:`,e),new Error("Failed to delete character. Please try again later.")}},async bulkCreateCharacters(t){if(t.length===0)return[];try{const e=t.map(a=>({...a,avatar_url:a.avatar_url?ii(a.name,a.avatar_url):a.avatar_url,feature_image_url:a.feature_image_url?ii(a.name,a.feature_image_url):a.feature_image_url})),{data:n,error:s}=await ht.from("characters").insert(e).select("*");if(s)throw s;return this.sanitizeCharacters(n)}catch(e){throw console.error("Failed to bulk create characters:",e),new Error("Failed to bulk create characters. Please try again later.")}}},_r={async createChat(t,e,n){try{const s={user_id:t,character_id:e,title:n||`Chat ${new Date().toLocaleString()}`,is_favorite:!1},{data:a,error:l}=await ht.from("chats").insert(s).select().single();if(l)throw l;return a}catch(s){throw console.error("Failed to create chat:",s),new Error("Failed to create chat. Please try again later.")}},async addMessage(t,e,n){try{const s={chat_id:t,content:e,role:n},{data:a,error:l}=await ht.from("chat_messages").insert(s).select().single();if(l)throw l;return await ht.from("chats").update({updated_at:new Date().toISOString()}).eq("id",t),a}catch(s){throw console.error("Failed to add message:",s),new Error("Failed to add message. Please try again later.")}},async getChatMessages(t){try{const{data:e,error:n}=await ht.from("chat_messages").select("*").eq("chat_id",t).order("created_at");if(n)throw n;return e}catch(e){throw console.error(`Failed to fetch messages for chat ${t}:`,e),new Error("Failed to fetch chat messages. Please try again later.")}},async getChatById(t){try{const{data:e,error:n}=await ht.from("chats").select("*").eq("id",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return e}catch(e){throw console.error(`Failed to fetch chat with ID ${t}:`,e),new Error("Failed to fetch chat. Please try again later.")}},async getUserChats(t){try{const{data:e,error:n}=await ht.from("chats").select("*").eq("user_id",t).order("updated_at",{ascending:!1});if(n)throw n;return e}catch(e){throw console.error(`Failed to fetch chats for user ${t}:`,e),new Error("Failed to fetch user chats. Please try again later.")}},async updateChat(t,e){try{const n={...e,updated_at:new Date().toISOString()},{data:s,error:a}=await ht.from("chats").update(n).eq("id",t).select().single();if(a)throw a;return s}catch(n){throw console.error(`Failed to update chat ${t}:`,n),new Error("Failed to update chat. Please try again later.")}},async toggleFavorite(t,e){return this.updateChat(t,{is_favorite:e})},async deleteChat(t){try{const{error:e}=await ht.from("chat_messages").delete().eq("chat_id",t);if(e)throw e;const{error:n}=await ht.from("chats").delete().eq("id",t);if(n)throw n}catch(e){throw console.error(`Failed to delete chat ${t}:`,e),new Error("Failed to delete chat. Please try again later.")}}},kC=k.createContext(void 0);function EL({children:t}){const[e,n]=k.useState(null),[s,a]=k.useState([]),[l,c]=k.useState(!1),[h,d]=k.useState(null),[f,p]=k.useState(null),[y,v]=k.useState(!1),[,b]=k.useState(""),[S,A]=k.useState(!1),{user:w}=n0(),_=k.useCallback(async Q=>{try{c(!0),d(null);const se=await kd.getById(Q);if(!se)throw new Error("Character not found");if(n(se),a([]),w){const ae=await _r.createChat(w.id,Q,`Chat with ${se.name}`);if(p(ae.id),A(ae.is_favorite??!1),se.opening_line){const pe=await _r.addMessage(ae.id,se.opening_line,"assistant");a([pe])}}else if(se.opening_line){const ae={id:"local-opening",chat_id:"local-chat",content:se.opening_line,role:"assistant",created_at:new Date().toISOString()};a([ae])}}catch(se){console.error("Error selecting character:",se),d(se instanceof Error?se.message:"Failed to select character")}finally{c(!1)}},[w]),x=k.useCallback(async Q=>{try{c(!0),d(null);const se=await _r.getChatById(Q);if(!se)throw new Error("Chat not found");const ae=await kd.getById(se.character_id);if(!ae)throw new Error("Character not found");const pe=await _r.getChatMessages(Q);n(ae),a(pe),p(se.id),A(se.is_favorite??!1)}catch(se){console.error("Error loading chat:",se),d(se instanceof Error?se.message:"Failed to load chat")}finally{c(!1)}},[]),P=k.useCallback(async Q=>{if(!e){d("Please select a character first");return}try{v(!0),d(null);const se={id:`local-${Date.now()}`,chat_id:f||"local-chat",content:Q,role:"user",created_at:new Date().toISOString()};a(K=>[...K,se]);let ae=se;w&&f&&(ae=await _r.addMessage(f,Q,"user"));const pe={id:`local-response-${Date.now()}`,chat_id:f||"local-chat",content:"",role:"assistant",created_at:new Date().toISOString()};a(K=>[...K,pe]),b("");const V=xL(s.concat(ae));await TL(e.name,e.persona_prompt,V,K=>{b(fe=>fe+K),a(fe=>{const N=[...fe],J=N.length-1;return N[J]={...N[J],content:N[J].content+K},N})});const ne=s[s.length-1].content;w&&f&&await _r.addMessage(f,ne,"assistant")}catch(se){console.error("Error sending message:",se),d(se instanceof Error?se.message:"Failed to send message"),a(ae=>ae.slice(0,-1))}finally{v(!1),b("")}},[e,s,f,w]),O=k.useCallback(()=>{n(null),a([]),p(null),d(null),c(!1),v(!1),b(""),A(!1)},[]);k.useEffect(()=>{},[O]);const R=k.useCallback(async()=>{if(s.length<2)return;const Q=[...s].reverse().findIndex(ae=>ae.role==="user");if(Q===-1)return;const se=s[s.length-1-Q];s[s.length-1].role==="assistant"&&a(ae=>ae.slice(0,-1)),await P(se.content)},[s,P]),M=k.useCallback(async Q=>{if(!(!f||!w))try{await _r.updateChat(f,{title:Q})}catch(se){console.error("Error saving chat title:",se),d(se instanceof Error?se.message:"Failed to save chat title")}},[f,w]),j=k.useCallback(async Q=>{if(!(!f||!w))try{await _r.toggleFavorite(f,Q),A(Q)}catch(se){console.error("Error toggling favorite status:",se),d(se instanceof Error?se.message:"Failed to update favorite status")}},[f,w]),$=k.useCallback(async(Q="Untitled Chat")=>{if(!f)try{if(w){const se=await _r.createChat(w.id,e.id,Q);p(se.id),A(se.is_favorite??!1);for(const ae of s)await _r.addMessage(se.id,ae.content,ae.role)}else{const se=JSON.parse(localStorage.getItem("savedChats")||"[]");se.push({id:`local-${Date.now()}`,character_name:e==null?void 0:e.name,conversation_title:Q,messages:s.map(({id:ae,role:pe,content:V,created_at:ne})=>({id:ae,role:pe,content:V,created_at:ne})),timestamp:new Date().toISOString(),is_favorite:!1}),localStorage.setItem("savedChats",JSON.stringify(se))}}catch(se){console.error("Error saving chat:",se),d(se instanceof Error?se.message:"Failed to save chat")}},[f,w,e,s]),z=k.useCallback(async()=>{if(!f)return O();try{w&&await _r.deleteChat(f),O()}catch(Q){console.error("Error deleting chat:",Q),d(Q instanceof Error?Q.message:"Failed to delete chat")}},[f,w,O]),B=k.useCallback(async Q=>{try{c(!0),d(null);const se=localStorage.getItem("savedChats");if(!se)return d("No saved conversations found in local storage."),!1;const pe=JSON.parse(se).find(fe=>fe.id===Q);if(!pe)return d(`Conversation with ID ${Q} not found.`),!1;const ne=(await kd.getAll()).find(fe=>fe.name===pe.character_name);if(!ne)return d(`Character "${pe.character_name}" not found.`),!1;n(ne);const K=pe.messages.map((fe,N)=>"id"in fe&&"created_at"in fe?{...fe,chat_id:Q}:{id:`local-${Q}-${N}`,chat_id:Q,content:fe.content,role:fe.role,created_at:new Date(pe.timestamp).toISOString()});return a(K),p(Q),A(pe.is_favorite||!1),console.info(`[ChatContext] Successfully resumed local chat: ${pe.conversation_title}`),!0}catch(se){return console.error("Error resuming local chat:",se),d(se instanceof Error?se.message:"Failed to resume conversation"),!1}finally{c(!1)}},[]),te={character:e,messages:s,isLoading:l,error:h,chatId:f,isTyping:y,isChatSaved:f!==null,isFavorite:S,selectCharacter:_,sendMessage:P,resetChat:O,retryLastMessage:R,saveChatTitle:M,toggleFavorite:j,saveChat:$,deleteCurrentChat:z,loadChat:x,resumeLocalChat:B};return T.jsx(kC.Provider,{value:te,children:t})}function oc(){const t=k.useContext(kC);if(t===void 0)throw new Error("useChat must be used within a ChatProvider");return t}const Sf=0,bi=1,No=2,NC=4;function Sx(t){return()=>t}function AL(t){t()}function PL(t,e){return n=>t(e(n))}function xx(t,e){return()=>t(e)}function CL(t,e){return n=>t(e,n)}function E0(t){return t!==void 0}function RL(...t){return()=>{t.map(AL)}}function lc(){}function xf(t,e){return e(t),t}function OL(t,e){return e(t)}function vt(...t){return t}function it(t,e){return t(bi,e)}function ze(t,e){t(Sf,e)}function A0(t){t(No)}function an(t){return t(NC)}function Se(t,e){return it(t,CL(e,Sf))}function Wr(t,e){const n=t(bi,s=>{n(),e(s)});return n}function Tx(t){let e,n;return s=>a=>{e=a,n&&clearTimeout(n),n=setTimeout(()=>{s(e)},t)}}function LC(t,e){return t===e}function yt(t=LC){let e;return n=>s=>{t(e,s)||(e=s,n(s))}}function je(t){return e=>n=>{t(n)&&e(n)}}function ye(t){return e=>PL(e,t)}function Vr(t){return e=>()=>{e(t)}}function ce(t,...e){const n=ML(...e);return(s,a)=>{switch(s){case No:A0(t);return;case bi:return it(t,n(a))}}}function Fr(t,e){return n=>s=>{n(e=t(e,s))}}function Po(t){return e=>n=>{t>0?t--:e(n)}}function mi(t){let e=null,n;return s=>a=>{e=a,!n&&(n=setTimeout(()=>{n=void 0,s(e)},t))}}function He(...t){const e=new Array(t.length);let n=0,s=null;const a=Math.pow(2,t.length)-1;return t.forEach((l,c)=>{const h=Math.pow(2,c);it(l,d=>{const f=n;n=n|h,e[c]=d,f!==a&&n===a&&s&&(s(),s=null)})}),l=>c=>{const h=()=>{l([c].concat(e))};n===a?h():s=h}}function ML(...t){return e=>t.reduceRight(OL,e)}function jL(t){let e,n;const s=()=>e==null?void 0:e();return function(a,l){switch(a){case bi:return l?n===l?void 0:(s(),n=l,e=it(t,l),e):(s(),lc);case No:s(),n=null;return}}}function de(t){let e=t;const n=We();return(s,a)=>{switch(s){case Sf:e=a;break;case bi:{a(e);break}case NC:return e}return n(s,a)}}function vn(t,e){return xf(de(e),n=>Se(t,n))}function We(){const t=[];return(e,n)=>{switch(e){case Sf:t.slice().forEach(s=>{s(n)});return;case No:t.splice(0,t.length);return;case bi:return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}}}function Wn(t){return xf(We(),e=>Se(t,e))}function tt(t,e=[],{singleton:n}={singleton:!0}){return{constructor:t,dependencies:e,id:DL(),singleton:n}}const DL=()=>Symbol();function kL(t){const e=new Map,n=({constructor:s,dependencies:a,id:l,singleton:c})=>{if(c&&e.has(l))return e.get(l);const h=s(a.map(d=>n(d)));return c&&e.set(l,h),h};return n(t)}function Qt(...t){const e=We(),n=new Array(t.length);let s=0;const a=Math.pow(2,t.length)-1;return t.forEach((l,c)=>{const h=Math.pow(2,c);it(l,d=>{n[c]=d,s=s|h,s===a&&ze(e,n)})}),function(l,c){switch(l){case No:{A0(e);return}case bi:return s===a&&c(n),it(e,c)}}}function ke(t,e=LC){return ce(t,yt(e))}function Ex(...t){return function(e,n){switch(e){case No:return;case bi:return RL(...t.map(s=>it(s,n)))}}}var dr=(t=>(t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t))(dr||{});const NL={0:"debug",3:"error",1:"log",2:"warn"},LL=()=>typeof globalThis>"u"?window:globalThis,wi=tt(()=>{const t=de(3);return{log:de((e,n,s=1)=>{var a;const l=(a=LL().VIRTUOSO_LOG_LEVEL)!=null?a:an(t);s>=l&&console[NL[s]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",e,n)}),logLevel:t}},[],{singleton:!0});function Tf(t,e,n){return $C(t,e,n).callbackRef}function $C(t,e,n){const s=Pe.useRef(null);let a=c=>{};const l=Pe.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(c=>{requestAnimationFrame(()=>{const d=c[0].target;d.offsetParent!==null&&t(d)})}):null,[t,n]);return a=c=>{c&&e?(l==null||l.observe(c),s.current=c):(s.current&&(l==null||l.unobserve(s.current)),s.current=null)},{callbackRef:a,ref:s}}function $L(t,e,n){const s=Pe.useRef(null),a=Pe.useCallback(d=>{if(!(d!=null&&d.offsetParent))return;const f=d.getBoundingClientRect(),p=f.width;let y,v;if(e){const b=e.getBoundingClientRect(),S=f.top-b.top;v=b.height-Math.max(0,S),y=S+e.scrollTop}else{const b=c.current.ownerDocument.defaultView;v=b.innerHeight-Math.max(0,f.top),y=f.top+b.scrollY}s.current={offsetTop:y,visibleHeight:v,visibleWidth:p},t(s.current)},[t,e]),{callbackRef:l,ref:c}=$C(a,!0,n),h=Pe.useCallback(()=>{a(c.current)},[a,c]);return Pe.useEffect(()=>{var d;if(e){e.addEventListener("scroll",h);const f=new ResizeObserver(()=>{requestAnimationFrame(h)});return f.observe(e),()=>{e.removeEventListener("scroll",h),f.unobserve(e)}}else{const f=(d=c.current)==null?void 0:d.ownerDocument.defaultView;return f==null||f.addEventListener("scroll",h),f==null||f.addEventListener("resize",h),()=>{f==null||f.removeEventListener("scroll",h),f==null||f.removeEventListener("resize",h)}}},[h,e,c]),l}const Pn=tt(()=>{const t=We(),e=We(),n=de(0),s=We(),a=de(0),l=We(),c=We(),h=de(0),d=de(0),f=de(0),p=de(0),y=We(),v=We(),b=de(!1),S=de(!1),A=de(!1);return Se(ce(t,ye(({scrollTop:w})=>w)),e),Se(ce(t,ye(({scrollHeight:w})=>w)),c),Se(e,a),{deviation:n,fixedFooterHeight:f,fixedHeaderHeight:d,footerHeight:p,headerHeight:h,horizontalDirection:S,scrollBy:v,scrollContainerState:t,scrollHeight:c,scrollingInProgress:b,scrollTo:y,scrollTop:e,skipAnimationFrameInResizeObserver:A,smoothScrollTargetReached:s,statefulScrollTop:a,viewportHeight:l}},[],{singleton:!0}),Bu={lvl:0};function IC(t,e){const n=t.length;if(n===0)return[];let{index:s,value:a}=e(t[0]);const l=[];for(let c=1;c<n;c++){const{index:h,value:d}=e(t[c]);l.push({end:h-1,start:s,value:a}),s=h,a=d}return l.push({end:1/0,start:s,value:a}),l}function ft(t){return t===Bu}function zu(t,e){if(!ft(t))return e===t.k?t.v:e<t.k?zu(t.l,e):zu(t.r,e)}function Cr(t,e,n="k"){if(ft(t))return[-1/0,void 0];if(Number(t[n])===e)return[t.k,t.v];if(Number(t[n])<e){const s=Cr(t.r,e,n);return s[0]===-1/0?[t.k,t.v]:s}return Cr(t.l,e,n)}function Xn(t,e,n){return ft(t)?zC(e,n,1):e===t.k?Wt(t,{k:e,v:n}):e<t.k?Ax(Wt(t,{l:Xn(t.l,e,n)})):Ax(Wt(t,{r:Xn(t.r,e,n)}))}function To(){return Bu}function Ef(t,e,n){if(ft(t))return[];const s=Cr(t,e)[0];return IL(hv(t,s,n))}function cv(t,e){if(ft(t))return Bu;const{k:n,l:s,r:a}=t;if(e===n){if(ft(s))return a;if(ft(a))return s;{const[l,c]=BC(s);return Nd(Wt(t,{k:l,l:UC(s),v:c}))}}else return e<n?Nd(Wt(t,{l:cv(s,e)})):Nd(Wt(t,{r:cv(a,e)}))}function sa(t){return ft(t)?[]:[...sa(t.l),{k:t.k,v:t.v},...sa(t.r)]}function hv(t,e,n){if(ft(t))return[];const{k:s,l:a,r:l,v:c}=t;let h=[];return s>e&&(h=h.concat(hv(a,e,n))),s>=e&&s<=n&&h.push({k:s,v:c}),s<=n&&(h=h.concat(hv(l,e,n))),h}function Nd(t){const{l:e,lvl:n,r:s}=t;if(s.lvl>=n-1&&e.lvl>=n-1)return t;if(n>s.lvl+1){if(dg(e))return qC(Wt(t,{lvl:n-1}));if(!ft(e)&&!ft(e.r))return Wt(e.r,{l:Wt(e,{r:e.r.l}),lvl:n,r:Wt(t,{l:e.r.r,lvl:n-1})});throw new Error("Unexpected empty nodes")}else{if(dg(t))return dv(Wt(t,{lvl:n-1}));if(!ft(s)&&!ft(s.l)){const a=s.l,l=dg(a)?s.lvl-1:s.lvl;return Wt(a,{l:Wt(t,{lvl:n-1,r:a.l}),lvl:a.lvl+1,r:dv(Wt(s,{l:a.r,lvl:l}))})}else throw new Error("Unexpected empty nodes")}}function Wt(t,e){return zC(e.k!==void 0?e.k:t.k,e.v!==void 0?e.v:t.v,e.lvl!==void 0?e.lvl:t.lvl,e.l!==void 0?e.l:t.l,e.r!==void 0?e.r:t.r)}function UC(t){return ft(t.r)?t.l:Nd(Wt(t,{r:UC(t.r)}))}function dg(t){return ft(t)||t.lvl>t.r.lvl}function BC(t){return ft(t.r)?[t.k,t.v]:BC(t.r)}function zC(t,e,n,s=Bu,a=Bu){return{k:t,l:s,lvl:n,r:a,v:e}}function Ax(t){return dv(qC(t))}function qC(t){const{l:e}=t;return!ft(e)&&e.lvl===t.lvl?Wt(e,{r:Wt(t,{l:e.r})}):t}function dv(t){const{lvl:e,r:n}=t;return!ft(n)&&!ft(n.r)&&n.lvl===e&&n.r.lvl===e?Wt(n,{l:Wt(t,{r:n.l}),lvl:e+1}):t}function IL(t){return IC(t,({k:e,v:n})=>({index:e,value:n}))}function HC(t,e){return!!(t&&t.startIndex===e.startIndex&&t.endIndex===e.endIndex)}function qu(t,e){return!!(t&&t[0]===e[0]&&t[1]===e[1])}const P0=tt(()=>({recalcInProgress:de(!1)}),[],{singleton:!0});function VC(t,e,n){return t[ef(t,e,n)]}function ef(t,e,n,s=0){let a=t.length-1;for(;s<=a;){const l=Math.floor((s+a)/2),c=t[l],h=n(c,e);if(h===0)return l;if(h===-1){if(a-s<2)return l-1;a=l-1}else{if(a===s)return l;s=l+1}}throw new Error(`Failed binary finding record in array - ${t.join(",")}, searched for ${e}`)}function UL(t,e,n,s){const a=ef(t,e,s),l=ef(t,n,s,a);return t.slice(a,l+1)}function Hu(t,e){return Math.round(t.getBoundingClientRect()[e])}function Af(t){return!ft(t.groupOffsetTree)}function C0({index:t},e){return e===t?0:e<t?-1:1}function BL(){return{groupIndices:[],groupOffsetTree:To(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:To()}}function zL(t,e){let n=ft(t)?0:1/0;for(const s of e){const{endIndex:a,size:l,startIndex:c}=s;if(n=Math.min(n,c),ft(t)){t=Xn(t,0,l);continue}const h=Ef(t,c-1,a+1);if(h.some(YL(s)))continue;let d=!1,f=!1;for(const{end:p,start:y,value:v}of h)d?(a>=y||l===v)&&(t=cv(t,y)):(f=v!==l,d=!0),p>a&&a>=y&&v!==l&&(t=Xn(t,a+1,v));f&&(t=Xn(t,c,l))}return[t,n]}function qL(t){return typeof t.groupIndex<"u"}function HL({offset:t},e){return e===t?0:e<t?-1:1}function Vu(t,e,n){if(e.length===0)return 0;const{index:s,offset:a,size:l}=VC(e,t,C0),c=t-s,h=l*c+(c-1)*n+a;return h>0?h+n:h}function GC(t,e){if(!Af(e))return t;let n=0;for(;e.groupIndices[n]<=t+n;)n++;return t+n}function FC(t,e,n){if(qL(t))return e.groupIndices[t.groupIndex]+1;{const s=t.index==="LAST"?n:t.index;let a=GC(s,e);return a=Math.max(0,a,Math.min(n,a)),a}}function VL(t,e,n,s=0){return s>0&&(e=Math.max(e,VC(t,s,C0).offset)),IC(UL(t,e,n,HL),KL)}function GL(t,[e,n,s,a]){e.length>0&&s("received item sizes",e,dr.DEBUG);const l=t.sizeTree;let c=l,h=0;if(n.length>0&&ft(l)&&e.length===2){const v=e[0].size,b=e[1].size;c=n.reduce((S,A)=>Xn(Xn(S,A,v),A+1,b),c)}else[c,h]=zL(c,e);if(c===l)return t;const{lastIndex:d,lastOffset:f,lastSize:p,offsetTree:y}=fv(t.offsetTree,h,c,a);return{groupIndices:n,groupOffsetTree:n.reduce((v,b)=>Xn(v,b,Vu(b,y,a)),To()),lastIndex:d,lastOffset:f,lastSize:p,offsetTree:y,sizeTree:c}}function FL(t){return sa(t).map(({k:e,v:n},s,a)=>{const l=a[s+1];return{endIndex:l?l.k-1:1/0,size:n,startIndex:e}})}function Px(t,e){let n=0,s=0;for(;n<t;)n+=e[s+1]-e[s]-1,s++;return s-(n===t?0:1)}function fv(t,e,n,s){let a=t,l=0,c=0,h=0,d=0;if(e!==0){d=ef(a,e-1,C0),h=a[d].offset;const f=Cr(n,e-1);l=f[0],c=f[1],a.length&&a[d].size===Cr(n,e)[1]&&(d-=1),a=a.slice(0,d+1)}else a=[];for(const{start:f,value:p}of Ef(n,e,1/0)){const y=f-l,v=y*c+h+y*s;a.push({index:f,offset:v,size:p}),l=f,h=v,c=p}return{lastIndex:l,lastOffset:h,lastSize:c,offsetTree:a}}function KL(t){return{index:t.index,value:t}}function YL(t){const{endIndex:e,size:n,startIndex:s}=t;return a=>a.start===s&&(a.end===e||a.end===1/0)&&a.value===n}const XL={offsetHeight:"height",offsetWidth:"width"},Zr=tt(([{log:t},{recalcInProgress:e}])=>{const n=We(),s=We(),a=vn(s,0),l=We(),c=We(),h=de(0),d=de([]),f=de(void 0),p=de(void 0),y=de((R,M)=>Hu(R,XL[M])),v=de(void 0),b=de(0),S=BL(),A=vn(ce(n,He(d,t,b),Fr(GL,S),yt()),S),w=vn(ce(d,yt(),Fr((R,M)=>({current:M,prev:R.current}),{current:[],prev:[]}),ye(({prev:R})=>R)),[]);Se(ce(d,je(R=>R.length>0),He(A,b),ye(([R,M,j])=>{const $=R.reduce((z,B,te)=>Xn(z,B,Vu(B,M.offsetTree,j)||te),To());return{...M,groupIndices:R,groupOffsetTree:$}})),A),Se(ce(s,He(A),je(([R,{lastIndex:M}])=>R<M),ye(([R,{lastIndex:M,lastSize:j}])=>[{endIndex:M,size:j,startIndex:R}])),n),Se(f,p);const _=vn(ce(f,ye(R=>R===void 0)),!0);Se(ce(p,je(R=>R!==void 0&&ft(an(A).sizeTree)),ye(R=>[{endIndex:0,size:R,startIndex:0}])),n);const x=Wn(ce(n,He(A),Fr(({sizes:R},[M,j])=>({changed:j!==R,sizes:j}),{changed:!1,sizes:S}),ye(R=>R.changed)));it(ce(h,Fr((R,M)=>({diff:R.prev-M,prev:M}),{diff:0,prev:0}),ye(R=>R.diff)),R=>{const{groupIndices:M}=an(A);if(R>0)ze(e,!0),ze(l,R+Px(R,M));else if(R<0){const j=an(w);j.length>0&&(R-=Px(-R,j)),ze(c,R)}}),it(ce(h,He(t)),([R,M])=>{R<0&&M("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:h},dr.ERROR)});const P=Wn(l);Se(ce(l,He(A),ye(([R,M])=>{const j=M.groupIndices.length>0,$=[],z=M.lastSize;if(j){const B=zu(M.sizeTree,0);let te=0,Q=0;for(;te<R;){const ae=M.groupIndices[Q],pe=M.groupIndices.length===Q+1?1/0:M.groupIndices[Q+1]-ae-1;$.push({endIndex:ae,size:B,startIndex:ae}),$.push({endIndex:ae+1+pe-1,size:z,startIndex:ae+1}),Q++,te+=pe+1}const se=sa(M.sizeTree);return te!==R&&se.shift(),se.reduce((ae,{k:pe,v:V})=>{let ne=ae.ranges;return ae.prevSize!==0&&(ne=[...ae.ranges,{endIndex:pe+R-1,size:ae.prevSize,startIndex:ae.prevIndex}]),{prevIndex:pe+R,prevSize:V,ranges:ne}},{prevIndex:R,prevSize:0,ranges:$}).ranges}return sa(M.sizeTree).reduce((B,{k:te,v:Q})=>({prevIndex:te+R,prevSize:Q,ranges:[...B.ranges,{endIndex:te+R-1,size:B.prevSize,startIndex:B.prevIndex}]}),{prevIndex:0,prevSize:z,ranges:[]}).ranges})),n);const O=Wn(ce(c,He(A,b),ye(([R,{offsetTree:M},j])=>{const $=-R;return Vu($,M,j)})));return Se(ce(c,He(A,b),ye(([R,M,j])=>{if(M.groupIndices.length>0){if(ft(M.sizeTree))return M;let $=To();const z=an(w);let B=0,te=0,Q=0;for(;B<-R;){Q=z[te];const se=z[te+1]-Q-1;te++,B+=se+1}if($=sa(M.sizeTree).reduce((se,{k:ae,v:pe})=>Xn(se,Math.max(0,ae+R),pe),$),B!==-R){const se=zu(M.sizeTree,Q);$=Xn($,0,se);const ae=Cr(M.sizeTree,-R+1)[1];$=Xn($,1,ae)}return{...M,sizeTree:$,...fv(M.offsetTree,0,$,j)}}else{const $=sa(M.sizeTree).reduce((z,{k:B,v:te})=>Xn(z,Math.max(0,B+R),te),To());return{...M,sizeTree:$,...fv(M.offsetTree,0,$,j)}}})),A),{beforeUnshiftWith:P,data:v,defaultItemSize:p,firstItemIndex:h,fixedItemSize:f,gap:b,groupIndices:d,itemSize:y,listRefresh:x,shiftWith:c,shiftWithOffset:O,sizeRanges:n,sizes:A,statefulTotalCount:a,totalCount:s,trackItemSizes:_,unshiftWith:l}},vt(wi,P0),{singleton:!0});function WL(t){return t.reduce((e,n)=>(e.groupIndices.push(e.totalCount),e.totalCount+=n+1,e),{groupIndices:[],totalCount:0})}const KC=tt(([{groupIndices:t,sizes:e,totalCount:n},{headerHeight:s,scrollTop:a}])=>{const l=We(),c=We(),h=Wn(ce(l,ye(WL)));return Se(ce(h,ye(d=>d.totalCount)),n),Se(ce(h,ye(d=>d.groupIndices)),t),Se(ce(Qt(a,e,s),je(([d,f])=>Af(f)),ye(([d,f,p])=>Cr(f.groupOffsetTree,Math.max(d-p,0),"v")[0]),yt(),ye(d=>[d])),c),{groupCounts:l,topItemsIndexes:c}},vt(Zr,Pn)),_i=tt(([{log:t}])=>{const e=de(!1),n=Wn(ce(e,je(s=>s),yt()));return it(e,s=>{s&&an(t)("props updated",{},dr.DEBUG)}),{didMount:n,propsReady:e}},vt(wi),{singleton:!0}),QL=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function YC(t){const e=typeof t=="number"?{index:t}:t;return e.align||(e.align="start"),(!e.behavior||!QL)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const uc=tt(([{gap:t,listRefresh:e,sizes:n,totalCount:s},{fixedFooterHeight:a,fixedHeaderHeight:l,footerHeight:c,headerHeight:h,scrollingInProgress:d,scrollTo:f,smoothScrollTargetReached:p,viewportHeight:y},{log:v}])=>{const b=We(),S=We(),A=de(0);let w=null,_=null,x=null;function P(){w&&(w(),w=null),x&&(x(),x=null),_&&(clearTimeout(_),_=null),ze(d,!1)}return Se(ce(b,He(n,y,s,A,h,c,v),He(t,l,a),ye(([[O,R,M,j,$,z,B,te],Q,se,ae])=>{const pe=YC(O),{align:V,behavior:ne,offset:K}=pe,fe=j-1,N=FC(pe,R,fe);let J=Vu(N,R.offsetTree,Q)+z;V==="end"?(J+=se+Cr(R.sizeTree,N)[1]-M+ae,N===fe&&(J+=B)):V==="center"?J+=(se+Cr(R.sizeTree,N)[1]-M+ae)/2:J-=$,K&&(J+=K);const he=ue=>{P(),ue?(te("retrying to scroll to",{location:O},dr.DEBUG),ze(b,O)):(ze(S,!0),te("list did not change, scroll successful",{},dr.DEBUG))};if(P(),ne==="smooth"){let ue=!1;x=it(e,Z=>{ue=ue||Z}),w=Wr(p,()=>{he(ue)})}else w=Wr(ce(e,JL(150)),he);return _=setTimeout(()=>{P()},1200),ze(d,!0),te("scrolling from index to",{behavior:ne,index:N,top:J},dr.DEBUG),{behavior:ne,top:J}})),f),{scrollTargetReached:S,scrollToIndex:b,topListHeight:A}},vt(Zr,Pn,wi),{singleton:!0});function JL(t){return e=>{const n=setTimeout(()=>{e(!1)},t);return s=>{s&&(e(!0),clearTimeout(n))}}}function R0(t,e){t==0?e():requestAnimationFrame(()=>{R0(t-1,e)})}function O0(t,e){const n=e-1;return typeof t=="number"?t:t.index==="LAST"?n:t.index}const cc=tt(([{defaultItemSize:t,listRefresh:e,sizes:n},{scrollTop:s},{scrollTargetReached:a,scrollToIndex:l},{didMount:c}])=>{const h=de(!0),d=de(0),f=de(!0);return Se(ce(c,He(d),je(([p,y])=>!!y),Vr(!1)),h),Se(ce(c,He(d),je(([p,y])=>!!y),Vr(!1)),f),it(ce(Qt(e,c),He(h,n,t,f),je(([[,p],y,{sizeTree:v},b,S])=>p&&(!ft(v)||E0(b))&&!y&&!S),He(d)),([,p])=>{Wr(a,()=>{ze(f,!0)}),R0(4,()=>{Wr(s,()=>{ze(h,!0)}),ze(l,p)})}),{initialItemFinalLocationReached:f,initialTopMostItemIndex:d,scrolledToInitialItem:h}},vt(Zr,Pn,uc,_i),{singleton:!0});function XC(t,e){return Math.abs(t-e)<1.01}const Gu="up",Cu="down",ZL="none",e4={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},t4=0,hc=tt(([{footerHeight:t,headerHeight:e,scrollBy:n,scrollContainerState:s,scrollTop:a,viewportHeight:l}])=>{const c=de(!1),h=de(!0),d=We(),f=We(),p=de(4),y=de(t4),v=vn(ce(Ex(ce(ke(a),Po(1),Vr(!0)),ce(ke(a),Po(1),Vr(!1),Tx(100))),yt()),!1),b=vn(ce(Ex(ce(n,Vr(!0)),ce(n,Vr(!1),Tx(200))),yt()),!1);Se(ce(Qt(ke(a),ke(y)),ye(([x,P])=>x<=P),yt()),h),Se(ce(h,mi(50)),f);const S=Wn(ce(Qt(s,ke(l),ke(e),ke(t),ke(p)),Fr((x,[{scrollHeight:P,scrollTop:O},R,M,j,$])=>{const z=O+R-P>-$,B={scrollHeight:P,scrollTop:O,viewportHeight:R};if(z){let Q,se;return O>x.state.scrollTop?(Q="SCROLLED_DOWN",se=x.state.scrollTop-O):(Q="SIZE_DECREASED",se=x.state.scrollTop-O||x.scrollTopDelta),{atBottom:!0,atBottomBecause:Q,scrollTopDelta:se,state:B}}let te;return B.scrollHeight>x.state.scrollHeight?te="SIZE_INCREASED":R<x.state.viewportHeight?te="VIEWPORT_HEIGHT_DECREASING":O<x.state.scrollTop?te="SCROLLING_UPWARDS":te="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:te,state:B}},e4),yt((x,P)=>x&&x.atBottom===P.atBottom))),A=vn(ce(s,Fr((x,{scrollHeight:P,scrollTop:O,viewportHeight:R})=>{if(XC(x.scrollHeight,P))return{changed:!1,jump:0,scrollHeight:P,scrollTop:O};{const M=P-(O+R)<1;return x.scrollTop!==O&&M?{changed:!0,jump:x.scrollTop-O,scrollHeight:P,scrollTop:O}:{changed:!0,jump:0,scrollHeight:P,scrollTop:O}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),je(x=>x.changed),ye(x=>x.jump)),0);Se(ce(S,ye(x=>x.atBottom)),c),Se(ce(c,mi(50)),d);const w=de(Cu);Se(ce(s,ye(({scrollTop:x})=>x),yt(),Fr((x,P)=>an(b)?{direction:x.direction,prevScrollTop:P}:{direction:P<x.prevScrollTop?Gu:Cu,prevScrollTop:P},{direction:Cu,prevScrollTop:0}),ye(x=>x.direction)),w),Se(ce(s,mi(50),Vr(ZL)),w);const _=de(0);return Se(ce(v,je(x=>!x),Vr(0)),_),Se(ce(a,mi(100),He(v),je(([x,P])=>!!P),Fr(([x,P],[O])=>[P,O],[0,0]),ye(([x,P])=>P-x)),_),{atBottomState:S,atBottomStateChange:d,atBottomThreshold:p,atTopStateChange:f,atTopThreshold:y,isAtBottom:c,isAtTop:h,isScrolling:v,lastJumpDueToItemResize:A,scrollDirection:w,scrollVelocity:_}},vt(Pn)),tf="top",nf="bottom",Cx="none";function Rx(t,e,n){return typeof t=="number"?n===Gu&&e===tf||n===Cu&&e===nf?t:0:n===Gu?e===tf?t.main:t.reverse:e===nf?t.main:t.reverse}function Ox(t,e){var n;return typeof t=="number"?t:(n=t[e])!=null?n:0}const M0=tt(([{deviation:t,fixedHeaderHeight:e,headerHeight:n,scrollTop:s,viewportHeight:a}])=>{const l=We(),c=de(0),h=de(0),d=de(0),f=vn(ce(Qt(ke(s),ke(a),ke(n),ke(l,qu),ke(d),ke(c),ke(e),ke(t),ke(h)),ye(([p,y,v,[b,S],A,w,_,x,P])=>{const O=p-x,R=w+_,M=Math.max(v-O,0);let j=Cx;const $=Ox(P,tf),z=Ox(P,nf);return b-=x,b+=v+_,S+=v+_,S-=x,b>p+R-$&&(j=Gu),S<p-M+y+z&&(j=Cu),j!==Cx?[Math.max(O-v-Rx(A,tf,j)-$,0),O-M-_+y+Rx(A,nf,j)+z]:null}),je(p=>p!=null),yt(qu)),[0,0]);return{increaseViewportBy:h,listBoundary:l,overscan:d,topListHeight:c,visibleRange:f}},vt(Pn),{singleton:!0});function n4(t,e,n){if(Af(e)){const s=GC(t,e);return[{index:Cr(e.groupOffsetTree,s)[0],offset:0,size:0},{data:n==null?void 0:n[0],index:s,offset:0,size:0}]}return[{data:n==null?void 0:n[0],index:t,offset:0,size:0}]}const fg={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function Ld(t,e,n,s,a,l){const{lastIndex:c,lastOffset:h,lastSize:d}=a;let f=0,p=0;if(t.length>0){f=t[0].offset;const A=t[t.length-1];p=A.offset+A.size}const y=n-c,v=h+y*d+(y-1)*s,b=f,S=v-p;return{bottom:p,firstItemIndex:l,items:Mx(t,a,l),offsetBottom:S,offsetTop:f,top:b,topItems:Mx(e,a,l),topListHeight:e.reduce((A,w)=>w.size+A,0),totalCount:n}}function WC(t,e,n,s,a,l){let c=0;if(n.groupIndices.length>0)for(const p of n.groupIndices){if(p-c>=t)break;c++}const h=t+c,d=O0(e,h),f=Array.from({length:h}).map((p,y)=>({data:l[y+d],index:y+d,offset:0,size:0}));return Ld(f,[],h,a,n,s)}function Mx(t,e,n){if(t.length===0)return[];if(!Af(e))return t.map(f=>({...f,index:f.index+n,originalIndex:f.index}));const s=t[0].index,a=t[t.length-1].index,l=[],c=Ef(e.groupOffsetTree,s,a);let h,d=0;for(const f of t){(!h||h.end<f.index)&&(h=c.shift(),d=e.groupIndices.indexOf(h.start));let p;f.index===h.start?p={index:d,type:"group"}:p={groupIndex:d,index:f.index-(d+1)+n},l.push({...p,data:f.data,offset:f.offset,originalIndex:f.index,size:f.size})}return l}const ha=tt(([{data:t,firstItemIndex:e,gap:n,sizes:s,totalCount:a},l,{listBoundary:c,topListHeight:h,visibleRange:d},{initialTopMostItemIndex:f,scrolledToInitialItem:p},{topListHeight:y},v,{didMount:b},{recalcInProgress:S}])=>{const A=de([]),w=de(0),_=We();Se(l.topItemsIndexes,A);const x=vn(ce(Qt(b,S,ke(d,qu),ke(a),ke(s),ke(f),p,ke(A),ke(e),ke(n),t),je(([M,j,,$,,,,,,,z])=>{const B=z&&z.length!==$;return M&&!j&&!B}),ye(([,,[M,j],$,z,B,te,Q,se,ae,pe])=>{const V=z,{offsetTree:ne,sizeTree:K}=V,fe=an(w);if($===0)return{...fg,totalCount:$};if(M===0&&j===0)return fe===0?{...fg,totalCount:$}:WC(fe,B,z,se,ae,pe||[]);if(ft(K))return fe>0?null:Ld(n4(O0(B,$),V,pe),[],$,ae,V,se);const N=[];if(Q.length>0){const le=Q[0],me=Q[Q.length-1];let Ie=0;for(const ee of Ef(K,le,me)){const ve=ee.value,we=Math.max(ee.start,le),Ne=Math.min(ee.end,me);for(let Te=we;Te<=Ne;Te++)N.push({data:pe==null?void 0:pe[Te],index:Te,offset:Ie,size:ve}),Ie+=ve}}if(!te)return Ld([],N,$,ae,V,se);const J=Q.length>0?Q[Q.length-1]+1:0,he=VL(ne,M,j,J);if(he.length===0)return null;const ue=$-1,Z=xf([],le=>{for(const me of he){const Ie=me.value;let ee=Ie.offset,ve=me.start;const we=Ie.size;if(Ie.offset<M){ve+=Math.floor((M-Ie.offset+ae)/(we+ae));const Te=ve-me.start;ee+=Te*we+Te*ae}ve<J&&(ee+=(J-ve)*we,ve=J);const Ne=Math.min(me.end,ue);for(let Te=ve;Te<=Ne&&!(ee>=j);Te++)le.push({data:pe==null?void 0:pe[Te],index:Te,offset:ee,size:we}),ee+=we+ae}});return Ld(Z,N,$,ae,V,se)}),je(M=>M!==null),yt()),fg);Se(ce(t,je(E0),ye(M=>M==null?void 0:M.length)),a),Se(ce(x,ye(M=>M.topListHeight)),y),Se(y,h),Se(ce(x,ye(M=>[M.top,M.bottom])),c),Se(ce(x,ye(M=>M.items)),_);const P=Wn(ce(x,je(({items:M})=>M.length>0),He(a,t),je(([{items:M},j])=>M[M.length-1].originalIndex===j-1),ye(([,M,j])=>[M-1,j]),yt(qu),ye(([M])=>M))),O=Wn(ce(x,mi(200),je(({items:M,topItems:j})=>M.length>0&&M[0].originalIndex===j.length),ye(({items:M})=>M[0].index),yt())),R=Wn(ce(x,je(({items:M})=>M.length>0),ye(({items:M})=>{let j=0,$=M.length-1;for(;M[j].type==="group"&&j<$;)j++;for(;M[$].type==="group"&&$>j;)$--;return{endIndex:M[$].index,startIndex:M[j].index}}),yt(HC)));return{endReached:P,initialItemCount:w,itemsRendered:_,listState:x,rangeChanged:R,startReached:O,topItemsIndexes:A,...v}},vt(Zr,KC,M0,cc,uc,hc,_i,P0),{singleton:!0}),QC=tt(([{fixedFooterHeight:t,fixedHeaderHeight:e,footerHeight:n,headerHeight:s},{listState:a}])=>{const l=We(),c=vn(ce(Qt(n,t,s,e,a),ye(([h,d,f,p,y])=>h+d+f+p+y.offsetBottom+y.bottom)),0);return Se(ke(c),l),{totalListHeight:c,totalListHeightChanged:l}},vt(Pn,ha),{singleton:!0}),r4=tt(([{viewportHeight:t},{totalListHeight:e}])=>{const n=de(!1),s=vn(ce(Qt(n,t,e),je(([a])=>a),ye(([,a,l])=>Math.max(0,a-l)),mi(0),yt()),0);return{alignToBottom:n,paddingTopAddition:s}},vt(Pn,QC),{singleton:!0});function jx(t){return t?t==="smooth"?"smooth":"auto":!1}const s4=(t,e)=>typeof t=="function"?jx(t(e)):e&&jx(t),i4=tt(([{listRefresh:t,totalCount:e,fixedItemSize:n},{atBottomState:s,isAtBottom:a},{scrollToIndex:l},{scrolledToInitialItem:c},{didMount:h,propsReady:d},{log:f},{scrollingInProgress:p}])=>{const y=de(!1),v=We();let b=null;function S(w){ze(l,{align:"end",behavior:w,index:"LAST"})}it(ce(Qt(ce(ke(e),Po(1)),h),He(ke(y),a,c,p),ye(([[w,_],x,P,O,R])=>{let M=_&&O,j="auto";return M&&(j=s4(x,P||R),M=M&&!!j),{followOutputBehavior:j,shouldFollow:M,totalCount:w}}),je(({shouldFollow:w})=>w)),({followOutputBehavior:w,totalCount:_})=>{b&&(b(),b=null),an(n)?requestAnimationFrame(()=>{an(f)("following output to ",{totalCount:_},dr.DEBUG),S(w)}):b=Wr(t,()=>{an(f)("following output to ",{totalCount:_},dr.DEBUG),S(w),b=null})});function A(w){const _=Wr(s,x=>{w&&!x.atBottom&&x.notAtBottomBecause==="SIZE_INCREASED"&&!b&&(an(f)("scrolling to bottom due to increased size",{},dr.DEBUG),S("auto"))});setTimeout(_,100)}return it(ce(Qt(ke(y),e,d),je(([w,,_])=>w&&_),Fr(({value:w},[,_])=>({refreshed:w===_,value:_}),{refreshed:!1,value:0}),je(({refreshed:w})=>w),He(y,e)),([,w])=>{an(c)&&A(w!==!1)}),it(v,()=>{A(an(y)!==!1)}),it(Qt(ke(y),s),([w,_])=>{w&&!_.atBottom&&_.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&S("auto")}),{autoscrollToBottom:v,followOutput:y}},vt(Zr,hc,uc,cc,_i,wi,Pn)),a4=tt(([{data:t,firstItemIndex:e,gap:n,sizes:s},{initialTopMostItemIndex:a},{initialItemCount:l,listState:c},{didMount:h}])=>(Se(ce(h,He(l),je(([,d])=>d!==0),He(a,s,e,n,t),ye(([[,d],f,p,y,v,b=[]])=>WC(d,f,p,y,v,b))),c),{}),vt(Zr,cc,ha,_i),{singleton:!0}),o4=tt(([{didMount:t},{scrollTo:e},{listState:n}])=>{const s=de(0);return it(ce(t,He(s),je(([,a])=>a!==0),ye(([,a])=>({top:a}))),a=>{Wr(ce(n,Po(1),je(l=>l.items.length>1)),()=>{requestAnimationFrame(()=>{ze(e,a)})})}),{initialScrollTop:s}},vt(_i,Pn,ha),{singleton:!0}),l4=({itemBottom:t,itemTop:e,locationParams:{align:n,behavior:s,...a},viewportBottom:l,viewportTop:c})=>e<c?{...a,align:n??"start",behavior:s}:t>l?{...a,align:n??"end",behavior:s}:null,u4=tt(([{gap:t,sizes:e,totalCount:n},{fixedFooterHeight:s,fixedHeaderHeight:a,headerHeight:l,scrollingInProgress:c,scrollTop:h,viewportHeight:d},{scrollToIndex:f}])=>{const p=We();return Se(ce(p,He(e,d,n,l,a,s,h),He(t),ye(([[y,v,b,S,A,w,_,x],P])=>{const{align:O,behavior:R,calculateViewLocation:M=l4,done:j,...$}=y,z=FC(y,v,S-1),B=Vu(z,v.offsetTree,P)+A+w,te=B+Cr(v.sizeTree,z)[1],Q=x+w,se=x+b-_,ae=M({itemBottom:te,itemTop:B,locationParams:{align:O,behavior:R,...$},viewportBottom:se,viewportTop:Q});return ae?j&&Wr(ce(c,je(pe=>!pe),Po(an(c)?1:2)),j):j&&j(),ae}),je(y=>y!==null)),f),{scrollIntoView:p}},vt(Zr,Pn,uc,ha,wi),{singleton:!0}),JC=tt(([{scrollVelocity:t}])=>{const e=de(!1),n=We(),s=de(!1);return Se(ce(t,He(s,e,n),je(([a,l])=>!!l),ye(([a,l,c,h])=>{const{enter:d,exit:f}=l;if(c){if(f(a,h))return!1}else if(d(a,h))return!0;return c}),yt()),e),it(ce(Qt(e,t,n),He(s)),([[a,l,c],h])=>{a&&h&&h.change&&h.change(l,c)}),{isSeeking:e,scrollSeekConfiguration:s,scrollSeekRangeChanged:n,scrollVelocity:t}},vt(hc),{singleton:!0}),j0=tt(([{scrollContainerState:t,scrollTo:e}])=>{const n=We(),s=We(),a=We(),l=de(!1),c=de(void 0);return Se(ce(Qt(n,s),ye(([{scrollHeight:h,scrollTop:d,viewportHeight:f},{offsetTop:p}])=>({scrollHeight:h,scrollTop:Math.max(0,d-p),viewportHeight:f}))),t),Se(ce(e,He(s),ye(([h,{offsetTop:d}])=>({...h,top:h.top+d}))),a),{customScrollParent:c,useWindowScroll:l,windowScrollContainerState:n,windowScrollTo:a,windowViewportRect:s}},vt(Pn)),c4=tt(([{sizeRanges:t,sizes:e},{headerHeight:n,scrollTop:s},{initialTopMostItemIndex:a},{didMount:l},{useWindowScroll:c,windowScrollContainerState:h,windowViewportRect:d}])=>{const f=We(),p=de(void 0),y=de(null),v=de(null);return Se(h,y),Se(d,v),it(ce(f,He(e,s,c,y,v,n)),([b,S,A,w,_,x,P])=>{const O=FL(S.sizeTree);w&&_!==null&&x!==null&&(A=_.scrollTop-x.offsetTop),A-=P,b({ranges:O,scrollTop:A})}),Se(ce(p,je(E0),ye(h4)),a),Se(ce(l,He(p),je(([,b])=>b!==void 0),yt(),ye(([,b])=>b.ranges)),t),{getState:f,restoreStateFrom:p}},vt(Zr,Pn,cc,_i,j0));function h4(t){return{align:"start",index:0,offset:t.scrollTop}}const d4=tt(([{topItemsIndexes:t}])=>{const e=de(0);return Se(ce(e,je(n=>n>=0),ye(n=>Array.from({length:n}).map((s,a)=>a))),t),{topItemCount:e}},vt(ha));function ZC(t){let e=!1,n;return()=>(e||(e=!0,n=t()),n)}const f4=ZC(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),m4=tt(([{deviation:t,scrollBy:e,scrollingInProgress:n,scrollTop:s},{isAtBottom:a,isScrolling:l,lastJumpDueToItemResize:c,scrollDirection:h},{listState:d},{beforeUnshiftWith:f,gap:p,shiftWithOffset:y,sizes:v},{log:b},{recalcInProgress:S}])=>{const A=Wn(ce(d,He(c),Fr(([,_,x,P],[{bottom:O,items:R,offsetBottom:M,totalCount:j},$])=>{const z=O+M;let B=0;return x===j&&_.length>0&&R.length>0&&(R[0].originalIndex===0&&_[0].originalIndex===0||(B=z-P,B!==0&&(B+=$))),[B,R,j,z]},[0,[],0,0]),je(([_])=>_!==0),He(s,h,n,a,b,S),je(([,_,x,P,,,O])=>!O&&!P&&_!==0&&x===Gu),ye(([[_],,,,,x])=>(x("Upward scrolling compensation",{amount:_},dr.DEBUG),_))));function w(_){_>0?(ze(e,{behavior:"auto",top:-_}),ze(t,0)):(ze(t,0),ze(e,{behavior:"auto",top:-_}))}return it(ce(A,He(t,l)),([_,x,P])=>{P&&f4()?ze(t,x-_):w(-_)}),it(ce(Qt(vn(l,!1),t,S),je(([_,x,P])=>!_&&!P&&x!==0),ye(([_,x])=>x),mi(1)),w),Se(ce(y,ye(_=>({top:-_}))),e),it(ce(f,He(v,p),ye(([_,{groupIndices:x,lastSize:P,sizeTree:O},R])=>{function M(j){return j*(P+R)}if(x.length===0)return M(_);{let j=0;const $=zu(O,0);let z=0,B=0;for(;z<_;){z++,j+=$;let te=x.length===B+1?1/0:x[B+1]-x[B]-1;z+te>_&&(j-=$,te=_-z+1),z+=te,j+=M(te),B++}return j}})),_=>{ze(t,_),requestAnimationFrame(()=>{ze(e,{top:_}),requestAnimationFrame(()=>{ze(t,0),ze(S,!1)})})}),{deviation:t}},vt(Pn,hc,ha,Zr,wi,P0)),p4=tt(([t,e,n,s,a,l,c,h,d,f])=>({...t,...e,...n,...s,...a,...l,...c,...h,...d,...f}),vt(M0,a4,_i,JC,QC,o4,r4,j0,u4,wi)),eR=tt(([{data:t,defaultItemSize:e,firstItemIndex:n,fixedItemSize:s,gap:a,groupIndices:l,itemSize:c,sizeRanges:h,sizes:d,statefulTotalCount:f,totalCount:p,trackItemSizes:y},{initialItemFinalLocationReached:v,initialTopMostItemIndex:b,scrolledToInitialItem:S},A,w,_,{listState:x,topItemsIndexes:P,...O},{scrollToIndex:R},M,{topItemCount:j},{groupCounts:$},z])=>(Se(O.rangeChanged,z.scrollSeekRangeChanged),Se(ce(z.windowViewportRect,ye(B=>B.visibleHeight)),A.viewportHeight),{data:t,defaultItemHeight:e,firstItemIndex:n,fixedItemHeight:s,gap:a,groupCounts:$,initialItemFinalLocationReached:v,initialTopMostItemIndex:b,scrolledToInitialItem:S,sizeRanges:h,topItemCount:j,topItemsIndexes:P,totalCount:p,..._,groupIndices:l,itemSize:c,listState:x,scrollToIndex:R,statefulTotalCount:f,trackItemSizes:y,...O,...z,...A,sizes:d,...w}),vt(Zr,cc,Pn,c4,i4,ha,uc,m4,d4,KC,p4));function g4(t,e){const n={},s={};let a=0;const l=t.length;for(;a<l;)s[t[a]]=1,a+=1;for(const c in e)Object.hasOwn(s,c)||(n[c]=e[c]);return n}const zh=typeof document<"u"?Pe.useLayoutEffect:Pe.useEffect;function y4(t,e,n){const s=Object.keys(e.required||{}),a=Object.keys(e.optional||{}),l=Object.keys(e.methods||{}),c=Object.keys(e.events||{}),h=Pe.createContext({});function d(w,_){w.propsReady&&ze(w.propsReady,!1);for(const x of s){const P=w[e.required[x]];ze(P,_[x])}for(const x of a)if(x in _){const P=w[e.optional[x]];ze(P,_[x])}w.propsReady&&ze(w.propsReady,!0)}function f(w){return l.reduce((_,x)=>(_[x]=P=>{const O=w[e.methods[x]];ze(O,P)},_),{})}function p(w){return c.reduce((_,x)=>(_[x]=jL(w[e.events[x]]),_),{})}const y=Pe.forwardRef((w,_)=>{const{children:x,...P}=w,[O]=Pe.useState(()=>xf(kL(t),j=>{d(j,P)})),[R]=Pe.useState(xx(p,O));zh(()=>{for(const j of c)j in P&&it(R[j],P[j]);return()=>{Object.values(R).map(A0)}},[P,R,O]),zh(()=>{d(O,P)}),Pe.useImperativeHandle(_,Sx(f(O)));const M=n;return T.jsx(h.Provider,{value:O,children:n?T.jsx(M,{...g4([...s,...a,...c],P),children:x}):x})}),v=w=>{const _=Pe.useContext(h);return Pe.useCallback(x=>{ze(_[w],x)},[_,w])},b=w=>{const _=Pe.useContext(h)[w],x=Pe.useCallback(P=>it(_,P),[_]);return Pe.useSyncExternalStore(x,()=>an(_),()=>an(_))},S=w=>{const _=Pe.useContext(h)[w],[x,P]=Pe.useState(xx(an,_));return zh(()=>it(_,O=>{O!==x&&P(Sx(O))}),[_,x]),x},A=Pe.version.startsWith("18")?b:S;return{Component:y,useEmitter:(w,_)=>{const x=Pe.useContext(h)[w];zh(()=>it(x,_),[_,x])},useEmitterValue:A,usePublisher:v}}Pe.createContext(void 0);const tR=Pe.createContext(void 0),nR=typeof document<"u"?Pe.useLayoutEffect:Pe.useEffect;function mg(t){return"self"in t}function v4(t){return"body"in t}function rR(t,e,n,s=lc,a,l){const c=Pe.useRef(null),h=Pe.useRef(null),d=Pe.useRef(null),f=Pe.useCallback(v=>{let b,S,A;const w=v.target;if(v4(w)||mg(w)){const x=mg(w)?w:w.defaultView;A=l?x.scrollX:x.scrollY,b=l?x.document.documentElement.scrollWidth:x.document.documentElement.scrollHeight,S=l?x.innerWidth:x.innerHeight}else A=l?w.scrollLeft:w.scrollTop,b=l?w.scrollWidth:w.scrollHeight,S=l?w.offsetWidth:w.offsetHeight;const _=()=>{t({scrollHeight:b,scrollTop:Math.max(A,0),viewportHeight:S})};v.suppressFlushSync?_():ik.flushSync(_),h.current!==null&&(A===h.current||A<=0||A===b-S)&&(h.current=null,e(!0),d.current&&(clearTimeout(d.current),d.current=null))},[t,e,l]);Pe.useEffect(()=>{const v=a||c.current;return s(a||c.current),f({suppressFlushSync:!0,target:v}),v.addEventListener("scroll",f,{passive:!0}),()=>{s(null),v.removeEventListener("scroll",f)}},[c,f,n,s,a]);function p(v){const b=c.current;if(!b||(l?"offsetWidth"in b&&b.offsetWidth===0:"offsetHeight"in b&&b.offsetHeight===0))return;const S=v.behavior==="smooth";let A,w,_;mg(b)?(w=Math.max(Hu(b.document.documentElement,l?"width":"height"),l?b.document.documentElement.scrollWidth:b.document.documentElement.scrollHeight),A=l?b.innerWidth:b.innerHeight,_=l?window.scrollX:window.scrollY):(w=b[l?"scrollWidth":"scrollHeight"],A=Hu(b,l?"width":"height"),_=b[l?"scrollLeft":"scrollTop"]);const x=w-A;if(v.top=Math.ceil(Math.max(Math.min(x,v.top),0)),XC(A,w)||v.top===_){t({scrollHeight:w,scrollTop:_,viewportHeight:A}),S&&e(!0);return}S?(h.current=v.top,d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{d.current=null,h.current=null,e(!0)},1e3)):h.current=null,l&&(v={behavior:v.behavior,left:v.top}),b.scrollTo(v)}function y(v){l&&(v={behavior:v.behavior,left:v.top}),c.current.scrollBy(v)}return{scrollByCallback:y,scrollerRef:c,scrollToCallback:p}}const pg="-webkit-sticky",Dx="sticky",D0=ZC(()=>{if(typeof document>"u")return Dx;const t=document.createElement("div");return t.style.position=pg,t.style.position===pg?pg:Dx});function k0(t){return t}const b4=tt(()=>{const t=de(d=>`Item ${d}`),e=de(null),n=de(d=>`Group ${d}`),s=de({}),a=de(k0),l=de("div"),c=de(lc),h=(d,f=null)=>vn(ce(s,ye(p=>p[d]),yt()),f);return{components:s,computeItemKey:a,context:e,EmptyPlaceholder:h("EmptyPlaceholder"),FooterComponent:h("Footer"),GroupComponent:h("Group","div"),groupContent:n,HeaderComponent:h("Header"),HeaderFooterTag:l,ItemComponent:h("Item","div"),itemContent:t,ListComponent:h("List","div"),ScrollerComponent:h("Scroller","div"),scrollerRef:c,ScrollSeekPlaceholder:h("ScrollSeekPlaceholder"),TopItemListComponent:h("TopItemList")}});vt(eR,b4);D0();const w4={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},_4={outline:"none",overflowX:"auto",position:"relative"},sR=t=>({height:"100%",position:"absolute",top:0,width:"100%"});D0();function pi(t,e){if(typeof t!="string")return{context:e}}function S4({useEmitter:t,useEmitterValue:e,usePublisher:n}){return Pe.memo(function({children:s,style:a,...l}){const c=n("scrollContainerState"),h=e("ScrollerComponent"),d=n("smoothScrollTargetReached"),f=e("scrollerRef"),p=e("context"),y=e("horizontalDirection")||!1,{scrollByCallback:v,scrollerRef:b,scrollToCallback:S}=rR(c,d,h,f,void 0,y);return t("scrollTo",S),t("scrollBy",v),T.jsx(h,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:b,style:{...y?_4:w4,...a},tabIndex:0,...l,...pi(h,p),children:s})})}function x4({useEmitter:t,useEmitterValue:e,usePublisher:n}){return Pe.memo(function({children:s,style:a,...l}){const c=n("windowScrollContainerState"),h=e("ScrollerComponent"),d=n("smoothScrollTargetReached"),f=e("totalListHeight"),p=e("deviation"),y=e("customScrollParent"),v=e("context"),b=Pe.useRef(null),S=e("scrollerRef"),{scrollByCallback:A,scrollerRef:w,scrollToCallback:_}=rR(c,d,h,S,y);return nR(()=>{var x;return w.current=y||((x=b.current)==null?void 0:x.ownerDocument.defaultView),()=>{w.current=null}},[w,y]),t("windowScrollTo",_),t("scrollBy",A),T.jsx(h,{ref:b,"data-virtuoso-scroller":!0,style:{position:"relative",...a,...f!==0?{height:f+p}:{}},...l,...pi(h,v),children:s})})}const T4=tt(()=>{const t=de(f=>T.jsxs("td",{children:["Item $",f]})),e=de(null),n=de(f=>T.jsxs("td",{colSpan:1e3,children:["Group ",f]})),s=de(null),a=de(null),l=de({}),c=de(k0),h=de(lc),d=(f,p=null)=>vn(ce(l,ye(y=>y[f]),yt()),p);return{components:l,computeItemKey:c,context:e,EmptyPlaceholder:d("EmptyPlaceholder"),FillerRow:d("FillerRow"),fixedFooterContent:a,fixedHeaderContent:s,itemContent:t,groupContent:n,ScrollerComponent:d("Scroller","div"),scrollerRef:h,ScrollSeekPlaceholder:d("ScrollSeekPlaceholder"),TableBodyComponent:d("TableBody","tbody"),TableComponent:d("Table","table"),TableFooterComponent:d("TableFoot","tfoot"),TableHeadComponent:d("TableHead","thead"),TableRowComponent:d("TableRow","tr"),GroupComponent:d("Group","tr")}});vt(eR,T4);D0();const kx={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},E4={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:Nx,floor:rf,max:Ru,min:gg,round:Lx}=Math;function $x(t,e,n){return Array.from({length:e-t+1}).map((s,a)=>({data:n===null?null:n[a+t],index:a+t}))}function A4(t){return{...E4,items:t}}function qh(t,e){return t&&t.width===e.width&&t.height===e.height}function P4(t,e){return t&&t.column===e.column&&t.row===e.row}const C4=tt(([{increaseViewportBy:t,listBoundary:e,overscan:n,visibleRange:s},{footerHeight:a,headerHeight:l,scrollBy:c,scrollContainerState:h,scrollTo:d,scrollTop:f,smoothScrollTargetReached:p,viewportHeight:y},v,b,{didMount:S,propsReady:A},{customScrollParent:w,useWindowScroll:_,windowScrollContainerState:x,windowScrollTo:P,windowViewportRect:O},R])=>{const M=de(0),j=de(0),$=de(kx),z=de({height:0,width:0}),B=de({height:0,width:0}),te=We(),Q=We(),se=de(0),ae=de(null),pe=de({column:0,row:0}),V=We(),ne=We(),K=de(!1),fe=de(0),N=de(!0),J=de(!1),he=de(!1);it(ce(S,He(fe),je(([ee,ve])=>!!ve)),()=>{ze(N,!1)}),it(ce(Qt(S,N,B,z,fe,J),je(([ee,ve,we,Ne,,Te])=>ee&&!ve&&we.height!==0&&Ne.height!==0&&!Te)),([,,,,ee])=>{ze(J,!0),R0(1,()=>{ze(te,ee)}),Wr(ce(f),()=>{ze(e,[0,0]),ze(N,!0)})}),Se(ce(ne,je(ee=>ee!=null&&ee.scrollTop>0),Vr(0)),j),it(ce(S,He(ne),je(([,ee])=>ee!=null)),([,ee])=>{ee&&(ze(z,ee.viewport),ze(B,ee.item),ze(pe,ee.gap),ee.scrollTop>0&&(ze(K,!0),Wr(ce(f,Po(1)),ve=>{ze(K,!1)}),ze(d,{top:ee.scrollTop})))}),Se(ce(z,ye(({height:ee})=>ee)),y),Se(ce(Qt(ke(z,qh),ke(B,qh),ke(pe,(ee,ve)=>ee&&ee.column===ve.column&&ee.row===ve.row),ke(f)),ye(([ee,ve,we,Ne])=>({gap:we,item:ve,scrollTop:Ne,viewport:ee}))),V),Se(ce(Qt(ke(M),s,ke(pe,P4),ke(B,qh),ke(z,qh),ke(ae),ke(j),ke(K),ke(N),ke(fe)),je(([,,,,,,,ee])=>!ee),ye(([ee,[ve,we],Ne,Te,Ze,mt,kt,,St,Ye])=>{const{column:xt,row:_n}=Ne,{height:fn,width:It}=Te,{width:mr}=Ze;if(kt===0&&(ee===0||mr===0))return kx;if(It===0){const Ti=O0(Ye,ee),Bo=Ti+Math.max(kt-1,0);return A4($x(Ti,Bo,mt))}const Cn=iR(mr,It,xt);let Sn,pr;St?ve===0&&we===0&&kt>0?(Sn=0,pr=kt-1):(Sn=Cn*rf((ve+_n)/(fn+_n)),pr=Cn*Nx((we+_n)/(fn+_n))-1,pr=gg(ee-1,Ru(pr,Cn-1)),Sn=gg(pr,Ru(0,Sn))):(Sn=0,pr=-1);const Or=$x(Sn,pr,mt),{bottom:Vt,top:$n}=Ix(Ze,Ne,Te,Or),Ct=Nx(ee/Cn),xi=Ct*fn+(Ct-1)*_n-Vt;return{bottom:Vt,itemHeight:fn,items:Or,itemWidth:It,offsetBottom:xi,offsetTop:$n,top:$n}})),$),Se(ce(ae,je(ee=>ee!==null),ye(ee=>ee.length)),M),Se(ce(Qt(z,B,$,pe),je(([ee,ve,{items:we}])=>we.length>0&&ve.height!==0&&ee.height!==0),ye(([ee,ve,{items:we},Ne])=>{const{bottom:Te,top:Ze}=Ix(ee,Ne,ve,we);return[Ze,Te]}),yt(qu)),e);const ue=de(!1);Se(ce(f,He(ue),ye(([ee,ve])=>ve||ee!==0)),ue);const Z=Wn(ce(Qt($,M),je(([{items:ee}])=>ee.length>0),He(ue),je(([[ee,ve],we])=>{const Ne=ee.items[ee.items.length-1].index===ve-1;return(we||ee.bottom>0&&ee.itemHeight>0&&ee.offsetBottom===0&&ee.items.length===ve)&&Ne}),ye(([[,ee]])=>ee-1),yt())),le=Wn(ce(ke($),je(({items:ee})=>ee.length>0&&ee[0].index===0),Vr(0),yt())),me=Wn(ce(ke($),He(K),je(([{items:ee},ve])=>ee.length>0&&!ve),ye(([{items:ee}])=>({endIndex:ee[ee.length-1].index,startIndex:ee[0].index})),yt(HC),mi(0)));Se(me,b.scrollSeekRangeChanged),Se(ce(te,He(z,B,M,pe),ye(([ee,ve,we,Ne,Te])=>{const Ze=YC(ee),{align:mt,behavior:kt,offset:St}=Ze;let Ye=Ze.index;Ye==="LAST"&&(Ye=Ne-1),Ye=Ru(0,Ye,gg(Ne-1,Ye));let xt=mv(ve,Te,we,Ye);return mt==="end"?xt=Lx(xt-ve.height+we.height):mt==="center"&&(xt=Lx(xt-ve.height/2+we.height/2)),St&&(xt+=St),{behavior:kt,top:xt}})),d);const Ie=vn(ce($,ye(ee=>ee.offsetBottom+ee.bottom)),0);return Se(ce(O,ye(ee=>({height:ee.visibleHeight,width:ee.visibleWidth}))),z),{customScrollParent:w,data:ae,deviation:se,footerHeight:a,gap:pe,headerHeight:l,increaseViewportBy:t,initialItemCount:j,itemDimensions:B,overscan:n,restoreStateFrom:ne,scrollBy:c,scrollContainerState:h,scrollHeight:Q,scrollTo:d,scrollToIndex:te,scrollTop:f,smoothScrollTargetReached:p,totalCount:M,useWindowScroll:_,viewportDimensions:z,windowScrollContainerState:x,windowScrollTo:P,windowViewportRect:O,...b,gridState:$,horizontalDirection:he,initialTopMostItemIndex:fe,totalListHeight:Ie,...v,endReached:Z,propsReady:A,rangeChanged:me,startReached:le,stateChanged:V,stateRestoreInProgress:K,...R}},vt(M0,Pn,hc,JC,_i,j0,wi));function iR(t,e,n){return Ru(1,rf((t+n)/(rf(e)+n)))}function Ix(t,e,n,s){const{height:a}=n;if(a===void 0||s.length===0)return{bottom:0,top:0};const l=mv(t,e,n,s[0].index);return{bottom:mv(t,e,n,s[s.length-1].index)+a,top:l}}function mv(t,e,n,s){const a=iR(t.width,n.width,e.column),l=rf(s/a),c=l*n.height+Ru(0,l-1)*e.row;return c>0?c+e.row:c}const R4=tt(()=>{const t=de(y=>`Item ${y}`),e=de({}),n=de(null),s=de("virtuoso-grid-item"),a=de("virtuoso-grid-list"),l=de(k0),c=de("div"),h=de(lc),d=(y,v=null)=>vn(ce(e,ye(b=>b[y]),yt()),v),f=de(!1),p=de(!1);return Se(ke(p),f),{components:e,computeItemKey:l,context:n,FooterComponent:d("Footer"),HeaderComponent:d("Header"),headerFooterTag:c,itemClassName:s,ItemComponent:d("Item","div"),itemContent:t,listClassName:a,ListComponent:d("List","div"),readyStateChanged:f,reportReadyState:p,ScrollerComponent:d("Scroller","div"),scrollerRef:h,ScrollSeekPlaceholder:d("ScrollSeekPlaceholder","div")}}),O4=tt(([t,e])=>({...t,...e}),vt(C4,R4)),M4=Pe.memo(function(){const t=wt("gridState"),e=wt("listClassName"),n=wt("itemClassName"),s=wt("itemContent"),a=wt("computeItemKey"),l=wt("isSeeking"),c=cr("scrollHeight"),h=wt("ItemComponent"),d=wt("ListComponent"),f=wt("ScrollSeekPlaceholder"),p=wt("context"),y=cr("itemDimensions"),v=cr("gap"),b=wt("log"),S=wt("stateRestoreInProgress"),A=cr("reportReadyState"),w=Tf(Pe.useMemo(()=>_=>{const x=_.parentElement.parentElement.scrollHeight;c(x);const P=_.firstChild;if(P){const{height:O,width:R}=P.getBoundingClientRect();y({height:O,width:R})}v({column:Ux("column-gap",getComputedStyle(_).columnGap,b),row:Ux("row-gap",getComputedStyle(_).rowGap,b)})},[c,y,v,b]),!0,!1);return nR(()=>{t.itemHeight>0&&t.itemWidth>0&&A(!0)},[t]),S?null:T.jsx(d,{className:e,ref:w,...pi(d,p),"data-testid":"virtuoso-item-list",style:{paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},children:t.items.map(_=>{const x=a(_.index,_.data,p);return l?T.jsx(f,{...pi(f,p),height:t.itemHeight,index:_.index,width:t.itemWidth},x):k.createElement(h,{...pi(h,p),className:n,"data-index":_.index,key:x},s(_.index,_.data,p))})})}),j4=Pe.memo(function(){const t=wt("HeaderComponent"),e=cr("headerHeight"),n=wt("headerFooterTag"),s=Tf(Pe.useMemo(()=>l=>{e(Hu(l,"height"))},[e]),!0,!1),a=wt("context");return t?T.jsx(n,{ref:s,children:T.jsx(t,{...pi(t,a)})}):null}),D4=Pe.memo(function(){const t=wt("FooterComponent"),e=cr("footerHeight"),n=wt("headerFooterTag"),s=Tf(Pe.useMemo(()=>l=>{e(Hu(l,"height"))},[e]),!0,!1),a=wt("context");return t?T.jsx(n,{ref:s,children:T.jsx(t,{...pi(t,a)})}):null}),k4=({children:t})=>{const e=Pe.useContext(tR),n=cr("itemDimensions"),s=cr("viewportDimensions"),a=Tf(Pe.useMemo(()=>l=>{s(l.getBoundingClientRect())},[s]),!0,!1);return Pe.useEffect(()=>{e&&(s({height:e.viewportHeight,width:e.viewportWidth}),n({height:e.itemHeight,width:e.itemWidth}))},[e,s,n]),T.jsx("div",{ref:a,style:sR(),children:t})},N4=({children:t})=>{const e=Pe.useContext(tR),n=cr("windowViewportRect"),s=cr("itemDimensions"),a=wt("customScrollParent"),l=$L(n,a,!1);return Pe.useEffect(()=>{e&&(s({height:e.itemHeight,width:e.itemWidth}),n({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,n,s]),T.jsx("div",{ref:l,style:sR(),children:t})},L4=Pe.memo(function({...t}){const e=wt("useWindowScroll"),n=wt("customScrollParent"),s=n||e?U4:I4,a=n||e?N4:k4,l=wt("context");return T.jsx(s,{...t,...pi(s,l),children:T.jsxs(a,{children:[T.jsx(j4,{}),T.jsx(M4,{}),T.jsx(D4,{})]})})}),{Component:$4,useEmitter:aR,useEmitterValue:wt,usePublisher:cr}=y4(O4,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},L4),I4=S4({useEmitter:aR,useEmitterValue:wt,usePublisher:cr}),U4=x4({useEmitter:aR,useEmitterValue:wt,usePublisher:cr});function Ux(t,e,n){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&n(`${t} was not resolved to pixel value correctly`,e,dr.WARN),e==="normal"?0:parseInt(e??"0",10)}const B4=$4,z4={async createGroup(t){try{const{data:e,error:n}=await ht.from("character_groups").insert(t).select("*").single();if(n)throw n;return e}catch(e){throw console.error("Failed to create character group:",e),new Error("Failed to create character group. Please try again.")}},async getAllGroups(){try{const{data:t,error:e}=await ht.from("character_groups").select("*").order("sort_order").order("name");if(e)throw e;return t}catch(t){throw console.error("Failed to fetch character groups:",t),new Error("Failed to load character groups. Please try again.")}},async getGroupById(t){try{const{data:e,error:n}=await ht.from("character_groups").select("*").eq("id",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return e}catch(e){throw console.error(`Failed to fetch group with ID ${t}:`,e),new Error("Failed to fetch group. Please try again.")}},async updateGroup(t,e){try{const{data:n,error:s}=await ht.from("character_groups").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select("*").single();if(s)throw s;return n}catch(n){throw console.error(`Failed to update group ${t}:`,n),new Error("Failed to update group. Please try again.")}},async deleteGroup(t){try{const{error:e}=await ht.from("character_groups").delete().eq("id",t);if(e)throw e}catch(e){throw console.error(`Failed to delete group ${t}:`,e),new Error("Failed to delete group. Please try again.")}},async addCharacterToGroup(t,e,n=0){try{const{data:s,error:a}=await ht.from("character_group_mappings").insert({group_id:t,character_id:e,sort_order:n}).select("*").single();if(a)throw a;return s}catch(s){throw console.error("Failed to add character to group:",s),new Error("Failed to add character to group. Please try again.")}},async removeCharacterFromGroup(t){try{const{error:e}=await ht.from("character_group_mappings").delete().eq("id",t);if(e)throw e}catch(e){throw console.error(`Failed to remove character mapping ${t}:`,e),new Error("Failed to remove character from group. Please try again.")}},async getCharactersInGroup(t){try{const{data:e,error:n}=await ht.from("character_group_mappings").select("*, character:characters(*)").eq("group_id",t).order("sort_order");if(n)throw n;return e}catch(e){throw console.error(`Failed to fetch characters in group ${t}:`,e),new Error("Failed to load characters in group. Please try again.")}},async getGroupsForCharacter(t){try{const{data:e,error:n}=await ht.from("character_group_mappings").select("*").eq("character_id",t);if(n)throw n;return e}catch(e){throw console.error(`Failed to fetch groups for character ${t}:`,e),new Error("Failed to load groups for character. Please try again.")}},async updateCharacterMappingSortOrder(t,e){try{const{data:n,error:s}=await ht.from("character_group_mappings").update({sort_order:e,updated_at:new Date().toISOString()}).eq("id",t).select("*").single();if(s)throw s;return n}catch(n){throw console.error(`Failed to update mapping sort order ${t}:`,n),new Error("Failed to update character order in group. Please try again.")}}},N0=k.createContext({});function L0(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const $0=typeof window<"u",oR=$0?k.useLayoutEffect:k.useEffect,Pf=k.createContext(null);function I0(t,e){t.indexOf(e)===-1&&t.push(e)}function U0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Cs=(t,e,n)=>n>e?e:n<t?t:n;let B0=()=>{};const Rs={},lR=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function uR(t){return typeof t=="object"&&t!==null}const cR=t=>/^0[^.\s]+$/u.test(t);function z0(t){let e;return()=>(e===void 0&&(e=t()),e)}const fr=t=>t,q4=(t,e)=>n=>e(t(n)),dc=(...t)=>t.reduce(q4),Fu=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class q0{constructor(){this.subscriptions=[]}add(e){return I0(this.subscriptions,e),()=>U0(this.subscriptions,e)}notify(e,n,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,s);else for(let l=0;l<a;l++){const c=this.subscriptions[l];c&&c(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Kr=t=>t*1e3,Yr=t=>t/1e3;function hR(t,e){return e?t*(1e3/e):0}const dR=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,H4=1e-7,V4=12;function G4(t,e,n,s,a){let l,c,h=0;do c=e+(n-e)/2,l=dR(c,s,a)-t,l>0?n=c:e=c;while(Math.abs(l)>H4&&++h<V4);return c}function fc(t,e,n,s){if(t===e&&n===s)return fr;const a=l=>G4(l,0,1,t,n);return l=>l===0||l===1?l:dR(a(l),e,s)}const fR=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,mR=t=>e=>1-t(1-e),pR=fc(.33,1.53,.69,.99),H0=mR(pR),gR=fR(H0),yR=t=>(t*=2)<1?.5*H0(t):.5*(2-Math.pow(2,-10*(t-1))),V0=t=>1-Math.sin(Math.acos(t)),vR=mR(V0),bR=fR(V0),F4=fc(.42,0,1,1),K4=fc(0,0,.58,1),wR=fc(.42,0,.58,1),Y4=t=>Array.isArray(t)&&typeof t[0]!="number",_R=t=>Array.isArray(t)&&typeof t[0]=="number",X4={linear:fr,easeIn:F4,easeInOut:wR,easeOut:K4,circIn:V0,circInOut:bR,circOut:vR,backIn:H0,backInOut:gR,backOut:pR,anticipate:yR},W4=t=>typeof t=="string",Bx=t=>{if(_R(t)){B0(t.length===4);const[e,n,s,a]=t;return fc(e,n,s,a)}else if(W4(t))return X4[t];return t},Hh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],zx={value:null};function Q4(t,e){let n=new Set,s=new Set,a=!1,l=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1},d=0;function f(y){c.has(y)&&(p.schedule(y),t()),d++,y(h)}const p={schedule:(y,v=!1,b=!1)=>{const A=b&&a?n:s;return v&&c.add(y),A.has(y)||A.add(y),y},cancel:y=>{s.delete(y),c.delete(y)},process:y=>{if(h=y,a){l=!0;return}a=!0,[n,s]=[s,n],n.forEach(f),e&&zx.value&&zx.value.frameloop[e].push(d),d=0,n.clear(),a=!1,l&&(l=!1,p.process(y))}};return p}const J4=40;function SR(t,e){let n=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,c=Hh.reduce((P,O)=>(P[O]=Q4(l,e?O:void 0),P),{}),{setup:h,read:d,resolveKeyframes:f,preUpdate:p,update:y,preRender:v,render:b,postRender:S}=c,A=()=>{const P=Rs.useManualTiming?a.timestamp:performance.now();n=!1,Rs.useManualTiming||(a.delta=s?1e3/60:Math.max(Math.min(P-a.timestamp,J4),1)),a.timestamp=P,a.isProcessing=!0,h.process(a),d.process(a),f.process(a),p.process(a),y.process(a),v.process(a),b.process(a),S.process(a),a.isProcessing=!1,n&&e&&(s=!1,t(A))},w=()=>{n=!0,s=!0,a.isProcessing||t(A)};return{schedule:Hh.reduce((P,O)=>{const R=c[O];return P[O]=(M,j=!1,$=!1)=>(n||w(),R.schedule(M,j,$)),P},{}),cancel:P=>{for(let O=0;O<Hh.length;O++)c[Hh[O]].cancel(P)},state:a,steps:c}}const{schedule:Pt,cancel:gi,state:cn,steps:yg}=SR(typeof requestAnimationFrame<"u"?requestAnimationFrame:fr,!0);let $d;function Z4(){$d=void 0}const Ln={now:()=>($d===void 0&&Ln.set(cn.isProcessing||Rs.useManualTiming?cn.timestamp:performance.now()),$d),set:t=>{$d=t,queueMicrotask(Z4)}},xR=t=>e=>typeof e=="string"&&e.startsWith(t),G0=xR("--"),e$=xR("var(--"),F0=t=>e$(t)?t$.test(t.split("/*")[0].trim()):!1,t$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Lo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ku={...Lo,transform:t=>Cs(0,1,t)},Vh={...Lo,default:1},Ou=t=>Math.round(t*1e5)/1e5,K0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function n$(t){return t==null}const r$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Y0=(t,e)=>n=>!!(typeof n=="string"&&r$.test(n)&&n.startsWith(t)||e&&!n$(n)&&Object.prototype.hasOwnProperty.call(n,e)),TR=(t,e,n)=>s=>{if(typeof s!="string")return s;const[a,l,c,h]=s.match(K0);return{[t]:parseFloat(a),[e]:parseFloat(l),[n]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},s$=t=>Cs(0,255,t),vg={...Lo,transform:t=>Math.round(s$(t))},ia={test:Y0("rgb","red"),parse:TR("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+vg.transform(t)+", "+vg.transform(e)+", "+vg.transform(n)+", "+Ou(Ku.transform(s))+")"};function i$(t){let e="",n="",s="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const pv={test:Y0("#"),parse:i$,transform:ia.transform},mc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ci=mc("deg"),Xr=mc("%"),Re=mc("px"),a$=mc("vh"),o$=mc("vw"),qx={...Xr,parse:t=>Xr.parse(t)/100,transform:t=>Xr.transform(t*100)},vo={test:Y0("hsl","hue"),parse:TR("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Xr.transform(Ou(e))+", "+Xr.transform(Ou(n))+", "+Ou(Ku.transform(s))+")"},qt={test:t=>ia.test(t)||pv.test(t)||vo.test(t),parse:t=>ia.test(t)?ia.parse(t):vo.test(t)?vo.parse(t):pv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ia.transform(t):vo.transform(t),getAnimatableNone:t=>{const e=qt.parse(t);return e.alpha=0,qt.transform(e)}},l$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function u$(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(K0))==null?void 0:e.length)||0)+(((n=t.match(l$))==null?void 0:n.length)||0)>0}const ER="number",AR="color",c$="var",h$="var(",Hx="${}",d$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Yu(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},a=[];let l=0;const h=e.replace(d$,d=>(qt.test(d)?(s.color.push(l),a.push(AR),n.push(qt.parse(d))):d.startsWith(h$)?(s.var.push(l),a.push(c$),n.push(d)):(s.number.push(l),a.push(ER),n.push(parseFloat(d))),++l,Hx)).split(Hx);return{values:n,split:h,indexes:s,types:a}}function PR(t){return Yu(t).values}function CR(t){const{split:e,types:n}=Yu(t),s=e.length;return a=>{let l="";for(let c=0;c<s;c++)if(l+=e[c],a[c]!==void 0){const h=n[c];h===ER?l+=Ou(a[c]):h===AR?l+=qt.transform(a[c]):l+=a[c]}return l}}const f$=t=>typeof t=="number"?0:qt.test(t)?qt.getAnimatableNone(t):t;function m$(t){const e=PR(t);return CR(t)(e.map(f$))}const yi={test:u$,parse:PR,createTransformer:CR,getAnimatableNone:m$};function bg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function p$({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let a=0,l=0,c=0;if(!e)a=l=c=n;else{const h=n<.5?n*(1+e):n+e-n*e,d=2*n-h;a=bg(d,h,t+1/3),l=bg(d,h,t),c=bg(d,h,t-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:s}}function sf(t,e){return n=>n>0?e:t}const Et=(t,e,n)=>t+(e-t)*n,wg=(t,e,n)=>{const s=t*t,a=n*(e*e-s)+s;return a<0?0:Math.sqrt(a)},g$=[pv,ia,vo],y$=t=>g$.find(e=>e.test(t));function Vx(t){const e=y$(t);if(!e)return!1;let n=e.parse(t);return e===vo&&(n=p$(n)),n}const Gx=(t,e)=>{const n=Vx(t),s=Vx(e);if(!n||!s)return sf(t,e);const a={...n};return l=>(a.red=wg(n.red,s.red,l),a.green=wg(n.green,s.green,l),a.blue=wg(n.blue,s.blue,l),a.alpha=Et(n.alpha,s.alpha,l),ia.transform(a))},gv=new Set(["none","hidden"]);function v$(t,e){return gv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function b$(t,e){return n=>Et(t,e,n)}function X0(t){return typeof t=="number"?b$:typeof t=="string"?F0(t)?sf:qt.test(t)?Gx:S$:Array.isArray(t)?RR:typeof t=="object"?qt.test(t)?Gx:w$:sf}function RR(t,e){const n=[...t],s=n.length,a=t.map((l,c)=>X0(l)(l,e[c]));return l=>{for(let c=0;c<s;c++)n[c]=a[c](l);return n}}function w$(t,e){const n={...t,...e},s={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(s[a]=X0(t[a])(t[a],e[a]));return a=>{for(const l in s)n[l]=s[l](a);return n}}function _$(t,e){const n=[],s={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],c=t.indexes[l][s[l]],h=t.values[c]??0;n[a]=h,s[l]++}return n}const S$=(t,e)=>{const n=yi.createTransformer(e),s=Yu(t),a=Yu(e);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?gv.has(t)&&!a.values.length||gv.has(e)&&!s.values.length?v$(t,e):dc(RR(_$(s,a),a.values),n):sf(t,e)};function OR(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Et(t,e,n):X0(t)(t,e)}const x$=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Pt.update(e,n),stop:()=>gi(e),now:()=>cn.isProcessing?cn.timestamp:Ln.now()}},MR=(t,e,n=10)=>{let s="";const a=Math.max(Math.round(e/n),2);for(let l=0;l<a;l++)s+=Math.round(t(l/(a-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},af=2e4;function W0(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<af;)e+=n,s=t.next(e);return e>=af?1/0:e}function T$(t,e=100,n){const s=n({...t,keyframes:[0,e]}),a=Math.min(W0(s),af);return{type:"keyframes",ease:l=>s.next(a*l).value/e,duration:Yr(a)}}const E$=5;function jR(t,e,n){const s=Math.max(e-E$,0);return hR(n-t(s),e-s)}const Dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_g=.001;function A$({duration:t=Dt.duration,bounce:e=Dt.bounce,velocity:n=Dt.velocity,mass:s=Dt.mass}){let a,l,c=1-e;c=Cs(Dt.minDamping,Dt.maxDamping,c),t=Cs(Dt.minDuration,Dt.maxDuration,Yr(t)),c<1?(a=f=>{const p=f*c,y=p*t,v=p-n,b=yv(f,c),S=Math.exp(-y);return _g-v/b*S},l=f=>{const y=f*c*t,v=y*n+n,b=Math.pow(c,2)*Math.pow(f,2)*t,S=Math.exp(-y),A=yv(Math.pow(f,2),c);return(-a(f)+_g>0?-1:1)*((v-b)*S)/A}):(a=f=>{const p=Math.exp(-f*t),y=(f-n)*t+1;return-_g+p*y},l=f=>{const p=Math.exp(-f*t),y=(n-f)*(t*t);return p*y});const h=5/t,d=C$(a,l,h);if(t=Kr(t),isNaN(d))return{stiffness:Dt.stiffness,damping:Dt.damping,duration:t};{const f=Math.pow(d,2)*s;return{stiffness:f,damping:c*2*Math.sqrt(s*f),duration:t}}}const P$=12;function C$(t,e,n){let s=n;for(let a=1;a<P$;a++)s=s-t(s)/e(s);return s}function yv(t,e){return t*Math.sqrt(1-e*e)}const R$=["duration","bounce"],O$=["stiffness","damping","mass"];function Fx(t,e){return e.some(n=>t[n]!==void 0)}function M$(t){let e={velocity:Dt.velocity,stiffness:Dt.stiffness,damping:Dt.damping,mass:Dt.mass,isResolvedFromDuration:!1,...t};if(!Fx(t,O$)&&Fx(t,R$))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),a=s*s,l=2*Cs(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Dt.mass,stiffness:a,damping:l}}else{const n=A$(t);e={...e,...n,mass:Dt.mass},e.isResolvedFromDuration=!0}return e}function of(t=Dt.visualDuration,e=Dt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:a}=n;const l=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],h={done:!1,value:l},{stiffness:d,damping:f,mass:p,duration:y,velocity:v,isResolvedFromDuration:b}=M$({...n,velocity:-Yr(n.velocity||0)}),S=v||0,A=f/(2*Math.sqrt(d*p)),w=c-l,_=Yr(Math.sqrt(d/p)),x=Math.abs(w)<5;s||(s=x?Dt.restSpeed.granular:Dt.restSpeed.default),a||(a=x?Dt.restDelta.granular:Dt.restDelta.default);let P;if(A<1){const R=yv(_,A);P=M=>{const j=Math.exp(-A*_*M);return c-j*((S+A*_*w)/R*Math.sin(R*M)+w*Math.cos(R*M))}}else if(A===1)P=R=>c-Math.exp(-_*R)*(w+(S+_*w)*R);else{const R=_*Math.sqrt(A*A-1);P=M=>{const j=Math.exp(-A*_*M),$=Math.min(R*M,300);return c-j*((S+A*_*w)*Math.sinh($)+R*w*Math.cosh($))/R}}const O={calculatedDuration:b&&y||null,next:R=>{const M=P(R);if(b)h.done=R>=y;else{let j=R===0?S:0;A<1&&(j=R===0?Kr(S):jR(P,R,M));const $=Math.abs(j)<=s,z=Math.abs(c-M)<=a;h.done=$&&z}return h.value=h.done?c:M,h},toString:()=>{const R=Math.min(W0(O),af),M=MR(j=>O.next(R*j).value,R,30);return R+"ms "+M},toTransition:()=>{}};return O}of.applyToOptions=t=>{const e=T$(t,100,of);return t.ease=e.ease,t.duration=Kr(e.duration),t.type="keyframes",t};function vv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:c,min:h,max:d,restDelta:f=.5,restSpeed:p}){const y=t[0],v={done:!1,value:y},b=$=>h!==void 0&&$<h||d!==void 0&&$>d,S=$=>h===void 0?d:d===void 0||Math.abs(h-$)<Math.abs(d-$)?h:d;let A=n*e;const w=y+A,_=c===void 0?w:c(w);_!==w&&(A=_-y);const x=$=>-A*Math.exp(-$/s),P=$=>_+x($),O=$=>{const z=x($),B=P($);v.done=Math.abs(z)<=f,v.value=v.done?_:B};let R,M;const j=$=>{b(v.value)&&(R=$,M=of({keyframes:[v.value,S(v.value)],velocity:jR(P,$,v.value),damping:a,stiffness:l,restDelta:f,restSpeed:p}))};return j(0),{calculatedDuration:null,next:$=>{let z=!1;return!M&&R===void 0&&(z=!0,O($),j($)),R!==void 0&&$>=R?M.next($-R):(!z&&O($),v)}}}function j$(t,e,n){const s=[],a=n||Rs.mix||OR,l=t.length-1;for(let c=0;c<l;c++){let h=a(t[c],t[c+1]);if(e){const d=Array.isArray(e)?e[c]||fr:e;h=dc(d,h)}s.push(h)}return s}function D$(t,e,{clamp:n=!0,ease:s,mixer:a}={}){const l=t.length;if(B0(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=j$(e,s,a),d=h.length,f=p=>{if(c&&p<t[0])return e[0];let y=0;if(d>1)for(;y<t.length-2&&!(p<t[y+1]);y++);const v=Fu(t[y],t[y+1],p);return h[y](v)};return n?p=>f(Cs(t[0],t[l-1],p)):f}function k$(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const a=Fu(0,e,s);t.push(Et(n,1,a))}}function N$(t){const e=[0];return k$(e,t.length-1),e}function L$(t,e){return t.map(n=>n*e)}function $$(t,e){return t.map(()=>e||wR).splice(0,t.length-1)}function Mu({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const a=Y4(s)?s.map(Bx):Bx(s),l={done:!1,value:e[0]},c=L$(n&&n.length===e.length?n:N$(e),t),h=D$(c,e,{ease:Array.isArray(a)?a:$$(e,a)});return{calculatedDuration:t,next:d=>(l.value=h(d),l.done=d>=t,l)}}const I$=t=>t!==null;function Q0(t,{repeat:e,repeatType:n="loop"},s,a=1){const l=t.filter(I$),h=a<0||e&&n!=="loop"&&e%2===1?0:l.length-1;return!h||s===void 0?l[h]:s}const U$={decay:vv,inertia:vv,tween:Mu,keyframes:Mu,spring:of};function DR(t){typeof t.type=="string"&&(t.type=U$[t.type])}class J0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const B$=t=>t/100;class Z0 extends J0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,a;const{motionValue:n}=this.options;n&&n.updatedAt!==Ln.now()&&this.tick(Ln.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(s=this.options).onStop)==null||a.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;DR(e);const{type:n=Mu,repeat:s=0,repeatDelay:a=0,repeatType:l,velocity:c=0}=e;let{keyframes:h}=e;const d=n||Mu;d!==Mu&&typeof h[0]!="number"&&(this.mixKeyframes=dc(B$,OR(h[0],h[1])),h=[0,100]);const f=d({...e,keyframes:h});l==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...h].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=W0(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+a,this.totalDuration=this.resolvedDuration*(s+1)-a,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:a,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return s.next(0);const{delay:f=0,keyframes:p,repeat:y,repeatType:v,repeatDelay:b,type:S,onUpdate:A,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const _=this.currentTime-f*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?_<0:_>a;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let P=this.currentTime,O=s;if(y){const $=Math.min(this.currentTime,a)/h;let z=Math.floor($),B=$%1;!B&&$>=1&&(B=1),B===1&&z--,z=Math.min(z,y+1),!!(z%2)&&(v==="reverse"?(B=1-B,b&&(B-=b/h)):v==="mirror"&&(O=c)),P=Cs(0,1,B)*h}const R=x?{done:!1,value:p[0]}:O.next(P);l&&(R.value=l(R.value));let{done:M}=R;!x&&d!==null&&(M=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return j&&S!==vv&&(R.value=Q0(p,this.options,w,this.speed)),A&&A(R.value),j&&this.finish(),R}then(e,n){return this.finished.then(e,n)}get duration(){return Yr(this.calculatedDuration)}get time(){return Yr(this.currentTime)}set time(e){var n;e=Kr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ln.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Yr(this.currentTime))}play(){var a,l;if(this.isStopped)return;const{driver:e=x$,startTime:n}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(l=(a=this.options).onPlay)==null||l.call(a);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ln.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function z$(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const aa=t=>t*180/Math.PI,bv=t=>{const e=aa(Math.atan2(t[1],t[0]));return wv(e)},q$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:bv,rotateZ:bv,skewX:t=>aa(Math.atan(t[1])),skewY:t=>aa(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},wv=t=>(t=t%360,t<0&&(t+=360),t),Kx=bv,Yx=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Xx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),H$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Yx,scaleY:Xx,scale:t=>(Yx(t)+Xx(t))/2,rotateX:t=>wv(aa(Math.atan2(t[6],t[5]))),rotateY:t=>wv(aa(Math.atan2(-t[2],t[0]))),rotateZ:Kx,rotate:Kx,skewX:t=>aa(Math.atan(t[4])),skewY:t=>aa(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function _v(t){return t.includes("scale")?1:0}function Sv(t,e){if(!t||t==="none")return _v(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,a;if(n)s=H$,a=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=q$,a=h}if(!a)return _v(e);const l=s[e],c=a[1].split(",").map(G$);return typeof l=="function"?l(c):c[l]}const V$=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Sv(n,e)};function G$(t){return parseFloat(t.trim())}const $o=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Io=new Set($o),Wx=t=>t===Lo||t===Re,F$=new Set(["x","y","z"]),K$=$o.filter(t=>!F$.has(t));function Y$(t){const e=[];return K$.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const oa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Sv(e,"x"),y:(t,{transform:e})=>Sv(e,"y")};oa.translateX=oa.x;oa.translateY=oa.y;const la=new Set;let xv=!1,Tv=!1,Ev=!1;function kR(){if(Tv){const t=Array.from(la).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const a=Y$(s);a.length&&(n.set(s,a),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const a=n.get(s);a&&a.forEach(([l,c])=>{var h;(h=s.getValue(l))==null||h.set(c)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Tv=!1,xv=!1,la.forEach(t=>t.complete(Ev)),la.clear()}function NR(){la.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Tv=!0)})}function X$(){Ev=!0,NR(),kR(),Ev=!1}class eb{constructor(e,n,s,a,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=a,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(la.add(this),xv||(xv=!0,Pt.read(NR),Pt.resolveKeyframes(kR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:a}=this;if(e[0]===null){const l=a==null?void 0:a.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&n){const h=s.readValue(n,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),a&&l===void 0&&a.set(e[0])}z$(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),la.delete(this)}cancel(){this.state==="scheduled"&&(la.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const W$=t=>t.startsWith("--");function Q$(t,e,n){W$(e)?t.style.setProperty(e,n):t.style[e]=n}const J$=z0(()=>window.ScrollTimeline!==void 0),Z$={};function eI(t,e){const n=z0(t);return()=>Z$[e]??n()}const LR=eI(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_u=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,Qx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_u([0,.65,.55,1]),circOut:_u([.55,0,1,.45]),backIn:_u([.31,.01,.66,-.59]),backOut:_u([.33,1.53,.69,.99])};function $R(t,e){if(t)return typeof t=="function"?LR()?MR(t,e):"ease-out":_R(t)?_u(t):Array.isArray(t)?t.map(n=>$R(n,e)||Qx.easeOut):Qx[t]}function tI(t,e,n,{delay:s=0,duration:a=300,repeat:l=0,repeatType:c="loop",ease:h="easeOut",times:d}={},f=void 0){const p={[e]:n};d&&(p.offset=d);const y=$R(h,a);Array.isArray(y)&&(p.easing=y);const v={delay:s,duration:a,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),t.animate(p,v)}function IR(t){return typeof t=="function"&&"applyToOptions"in t}function nI({type:t,...e}){return IR(t)&&LR()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class rI extends J0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:a,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:h,onComplete:d}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,B0(typeof e.type!="string");const f=nI(e);this.animation=tI(n,s,a,f,l),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const p=Q0(a,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(p):Q$(n,s,p),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return Yr(Number(e))}get time(){return Yr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Kr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&J$()?(this.animation.timeline=e,fr):n(this)}}const UR={anticipate:yR,backInOut:gR,circInOut:bR};function sI(t){return t in UR}function iI(t){typeof t.ease=="string"&&sI(t.ease)&&(t.ease=UR[t.ease])}const Jx=10;class aI extends rI{constructor(e){iI(e),DR(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:a,element:l,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const h=new Z0({...c,autoplay:!1}),d=Kr(this.finishedTime??this.time);n.setWithVelocity(h.sample(d-Jx).value,h.sample(d).value,Jx),h.stop()}}const Zx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(yi.test(t)||t==="0")&&!t.startsWith("url("));function oI(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function lI(t,e,n,s){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],c=Zx(a,e),h=Zx(l,e);return!c||!h?!1:oI(t)||(n==="spring"||IR(n))&&s}function tb(t){return uR(t)&&"offsetHeight"in t}const uI=new Set(["opacity","clipPath","filter","transform"]),cI=z0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hI(t){var f;const{motionValue:e,name:n,repeatDelay:s,repeatType:a,damping:l,type:c}=t;if(!tb((f=e==null?void 0:e.owner)==null?void 0:f.current))return!1;const{onUpdate:h,transformTemplate:d}=e.owner.getProps();return cI()&&n&&uI.has(n)&&(n!=="transform"||!d)&&!h&&!s&&a!=="mirror"&&l!==0&&c!=="inertia"}const dI=40;class fI extends J0{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:c="loop",keyframes:h,name:d,motionValue:f,element:p,...y}){var S;super(),this.stop=()=>{var A,w;this._animation&&(this._animation.stop(),(A=this.stopTimeline)==null||A.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=Ln.now();const v={autoplay:e,delay:n,type:s,repeat:a,repeatDelay:l,repeatType:c,name:d,motionValue:f,element:p,...y},b=(p==null?void 0:p.KeyframeResolver)||eb;this.keyframeResolver=new b(h,(A,w,_)=>this.onKeyframesResolved(A,w,v,!_),d,f,p),(S=this.keyframeResolver)==null||S.scheduleResolve()}onKeyframesResolved(e,n,s,a){this.keyframeResolver=void 0;const{name:l,type:c,velocity:h,delay:d,isHandoff:f,onUpdate:p}=s;this.resolvedAt=Ln.now(),lI(e,l,c,h)||((Rs.instantAnimations||!d)&&(p==null||p(Q0(e,s,n))),e[0]=e[e.length-1],s.duration=0,s.repeat=0);const v={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>dI?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},b=!f&&hI(v)?new aI({...v,element:v.motionValue.owner.current}):new Z0(v);b.finished.then(()=>this.notifyFinished()).catch(fr),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),X$()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const mI=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pI(t){const e=mI.exec(t);if(!e)return[,];const[,n,s,a]=e;return[`--${n??s}`,a]}function BR(t,e,n=1){const[s,a]=pI(t);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const c=l.trim();return lR(c)?parseFloat(c):c}return F0(a)?BR(a,e,n+1):a}function nb(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const zR=new Set(["width","height","top","left","right","bottom",...$o]),gI={test:t=>t==="auto",parse:t=>t},qR=t=>e=>e.test(t),HR=[Lo,Re,Xr,ci,o$,a$,gI],eT=t=>HR.find(qR(t));function yI(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||cR(t):!0}const vI=new Set(["brightness","contrast","saturate","opacity"]);function bI(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(K0)||[];if(!s)return t;const a=n.replace(s,"");let l=vI.has(e)?1:0;return s!==n&&(l*=100),e+"("+l+a+")"}const wI=/\b([a-z-]*)\(.*?\)/gu,Av={...yi,getAnimatableNone:t=>{const e=t.match(wI);return e?e.map(bI).join(" "):t}},tT={...Lo,transform:Math.round},_I={rotate:ci,rotateX:ci,rotateY:ci,rotateZ:ci,scale:Vh,scaleX:Vh,scaleY:Vh,scaleZ:Vh,skew:ci,skewX:ci,skewY:ci,distance:Re,translateX:Re,translateY:Re,translateZ:Re,x:Re,y:Re,z:Re,perspective:Re,transformPerspective:Re,opacity:Ku,originX:qx,originY:qx,originZ:Re},rb={borderWidth:Re,borderTopWidth:Re,borderRightWidth:Re,borderBottomWidth:Re,borderLeftWidth:Re,borderRadius:Re,radius:Re,borderTopLeftRadius:Re,borderTopRightRadius:Re,borderBottomRightRadius:Re,borderBottomLeftRadius:Re,width:Re,maxWidth:Re,height:Re,maxHeight:Re,top:Re,right:Re,bottom:Re,left:Re,padding:Re,paddingTop:Re,paddingRight:Re,paddingBottom:Re,paddingLeft:Re,margin:Re,marginTop:Re,marginRight:Re,marginBottom:Re,marginLeft:Re,backgroundPositionX:Re,backgroundPositionY:Re,..._I,zIndex:tT,fillOpacity:Ku,strokeOpacity:Ku,numOctaves:tT},SI={...rb,color:qt,backgroundColor:qt,outlineColor:qt,fill:qt,stroke:qt,borderColor:qt,borderTopColor:qt,borderRightColor:qt,borderBottomColor:qt,borderLeftColor:qt,filter:Av,WebkitFilter:Av},VR=t=>SI[t];function GR(t,e){let n=VR(t);return n!==Av&&(n=yi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const xI=new Set(["auto","none","0"]);function TI(t,e,n){let s=0,a;for(;s<t.length&&!a;){const l=t[s];typeof l=="string"&&!xI.has(l)&&Yu(l).values.length&&(a=t[s]),s++}if(a&&n)for(const l of e)t[l]=GR(n,a)}class EI extends eb{constructor(e,n,s,a,l){super(e,n,s,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),F0(f))){const p=BR(f,n.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!zR.has(s)||e.length!==2)return;const[a,l]=e,c=eT(a),h=eT(l);if(c!==h)if(Wx(c)&&Wx(h))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else oa[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let a=0;a<e.length;a++)(e[a]===null||yI(e[a]))&&s.push(a);s.length&&TI(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=oa[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(s,a).jump(a,!1)}measureEndState(){var h;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const a=e.getValue(n);a&&a.jump(this.measuredOrigin,!1);const l=s.length-1,c=s[l];s[l]=oa[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([d,f])=>{e.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function AI(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const a=(n==null?void 0:n[t])??s.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const FR=(t,e)=>e&&typeof t=="number"?e.transform(t):t,nT=30,PI=t=>!isNaN(parseFloat(t));class CI{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,a=!0)=>{var c,h;const l=Ln.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();a&&((h=this.events.renderRequest)==null||h.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ln.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=PI(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new q0);const s=this.events[e].add(n);return e==="change"?()=>{s(),Pt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ln.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>nT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,nT);return hR(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Co(t,e){return new CI(t,e)}const{schedule:sb}=SR(queueMicrotask,!1),Tr={x:!1,y:!1};function KR(){return Tr.x||Tr.y}function RI(t){return t==="x"||t==="y"?Tr[t]?null:(Tr[t]=!0,()=>{Tr[t]=!1}):Tr.x||Tr.y?null:(Tr.x=Tr.y=!0,()=>{Tr.x=Tr.y=!1})}function YR(t,e){const n=AI(t),s=new AbortController,a={passive:!0,...e,signal:s.signal};return[n,a,()=>s.abort()]}function rT(t){return!(t.pointerType==="touch"||KR())}function OI(t,e,n={}){const[s,a,l]=YR(t,n),c=h=>{if(!rT(h))return;const{target:d}=h,f=e(d,h);if(typeof f!="function"||!d)return;const p=y=>{rT(y)&&(f(y),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,a)};return s.forEach(h=>{h.addEventListener("pointerenter",c,a)}),l}const XR=(t,e)=>e?t===e?!0:XR(t,e.parentElement):!1,ib=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,MI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jI(t){return MI.has(t.tagName)||t.tabIndex!==-1}const Id=new WeakSet;function sT(t){return e=>{e.key==="Enter"&&t(e)}}function Sg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const DI=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=sT(()=>{if(Id.has(n))return;Sg(n,"down");const a=sT(()=>{Sg(n,"up")}),l=()=>Sg(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function iT(t){return ib(t)&&!KR()}function kI(t,e,n={}){const[s,a,l]=YR(t,n),c=h=>{const d=h.currentTarget;if(!iT(h))return;Id.add(d);const f=e(d,h),p=(b,S)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),Id.has(d)&&Id.delete(d),iT(b)&&typeof f=="function"&&f(b,{success:S})},y=b=>{p(b,d===window||d===document||n.useGlobalTarget||XR(d,b.target))},v=b=>{p(b,!1)};window.addEventListener("pointerup",y,a),window.addEventListener("pointercancel",v,a)};return s.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",c,a),tb(h)&&(h.addEventListener("focus",f=>DI(f,a)),!jI(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function WR(t){return uR(t)&&"ownerSVGElement"in t}function NI(t){return WR(t)&&t.tagName==="svg"}const bn=t=>!!(t&&t.getVelocity),LI=[...HR,qt,yi],$I=t=>LI.find(qR(t)),ab=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class II extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,a=tb(s)&&s.offsetWidth||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=a-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function UI({children:t,isPresent:e,anchorX:n}){const s=k.useId(),a=k.useRef(null),l=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=k.useContext(ab);return k.useInsertionEffect(()=>{const{width:h,height:d,top:f,left:p,right:y}=l.current;if(e||!a.current||!h||!d)return;const v=n==="left"?`left: ${p}`:`right: ${y}`;a.current.dataset.motionPopId=s;const b=document.createElement("style");return c&&(b.nonce=c),document.head.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${d}px !important;
            ${v}px !important;
            top: ${f}px !important;
          }
        `),()=>{document.head.contains(b)&&document.head.removeChild(b)}},[e]),T.jsx(II,{isPresent:e,childRef:a,sizeRef:l,children:k.cloneElement(t,{ref:a})})}const BI=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:a,presenceAffectsLayout:l,mode:c,anchorX:h})=>{const d=L0(zI),f=k.useId();let p=!0,y=k.useMemo(()=>(p=!1,{id:f,initial:e,isPresent:n,custom:a,onExitComplete:v=>{d.set(v,!0);for(const b of d.values())if(!b)return;s&&s()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[n,d,s]);return l&&p&&(y={...y}),k.useMemo(()=>{d.forEach((v,b)=>d.set(b,!1))},[n]),k.useEffect(()=>{!n&&!d.size&&s&&s()},[n]),c==="popLayout"&&(t=T.jsx(UI,{isPresent:n,anchorX:h,children:t})),T.jsx(Pf.Provider,{value:y,children:t})};function zI(){return new Map}function QR(t=!0){const e=k.useContext(Pf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:a}=e,l=k.useId();k.useEffect(()=>{if(t)return a(l)},[t]);const c=k.useCallback(()=>t&&s&&s(l),[l,s,t]);return!n&&s?[!1,c]:[!0]}const Gh=t=>t.key||"";function aT(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const qI=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:l="sync",propagate:c=!1,anchorX:h="left"})=>{const[d,f]=QR(c),p=k.useMemo(()=>aT(t),[t]),y=c&&!d?[]:p.map(Gh),v=k.useRef(!0),b=k.useRef(p),S=L0(()=>new Map),[A,w]=k.useState(p),[_,x]=k.useState(p);oR(()=>{v.current=!1,b.current=p;for(let R=0;R<_.length;R++){const M=Gh(_[R]);y.includes(M)?S.delete(M):S.get(M)!==!0&&S.set(M,!1)}},[_,y.length,y.join("-")]);const P=[];if(p!==A){let R=[...p];for(let M=0;M<_.length;M++){const j=_[M],$=Gh(j);y.includes($)||(R.splice(M,0,j),P.push(j))}return l==="wait"&&P.length&&(R=P),x(aT(R)),w(p),null}const{forceRender:O}=k.useContext(N0);return T.jsx(T.Fragment,{children:_.map(R=>{const M=Gh(R),j=c&&!d?!1:p===_||y.includes(M),$=()=>{if(S.has(M))S.set(M,!0);else return;let z=!0;S.forEach(B=>{B||(z=!1)}),z&&(O==null||O(),x(b.current),c&&(f==null||f()),s&&s())};return T.jsx(BI,{isPresent:j,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:a,mode:l,onExitComplete:j?void 0:$,anchorX:h,children:R},M)})})},JR=k.createContext({strict:!1}),oT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ro={};for(const t in oT)Ro[t]={isEnabled:e=>oT[t].some(n=>!!e[n])};function HI(t){for(const e in t)Ro[e]={...Ro[e],...t[e]}}const VI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function lf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||VI.has(t)}let ZR=t=>!lf(t);function GI(t){typeof t=="function"&&(ZR=e=>e.startsWith("on")?!lf(e):t(e))}try{GI(require("@emotion/is-prop-valid").default)}catch{}function FI(t,e,n){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(ZR(a)||n===!0&&lf(a)||!e&&!lf(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}function KI(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,a)=>a==="create"?t:(e.has(a)||e.set(a,t(a)),e.get(a))})}const Cf=k.createContext({});function Rf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Xu(t){return typeof t=="string"||Array.isArray(t)}const ob=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],lb=["initial",...ob];function Of(t){return Rf(t.animate)||lb.some(e=>Xu(t[e]))}function eO(t){return!!(Of(t)||t.variants)}function YI(t,e){if(Of(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Xu(n)?n:void 0,animate:Xu(s)?s:void 0}}return t.inherit!==!1?e:{}}function XI(t){const{initial:e,animate:n}=YI(t,k.useContext(Cf));return k.useMemo(()=>({initial:e,animate:n}),[lT(e),lT(n)])}function lT(t){return Array.isArray(t)?t.join(" "):t}const WI=Symbol.for("motionComponentSymbol");function bo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function QI(t,e,n){return k.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):bo(n)&&(n.current=s))},[e])}const ub=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),JI="framerAppearId",tO="data-"+ub(JI),nO=k.createContext({});function ZI(t,e,n,s,a){var A,w;const{visualElement:l}=k.useContext(Cf),c=k.useContext(JR),h=k.useContext(Pf),d=k.useContext(ab).reducedMotion,f=k.useRef(null);s=s||c.renderer,!f.current&&s&&(f.current=s(t,{visualState:e,parent:l,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,y=k.useContext(nO);p&&!p.projection&&a&&(p.type==="html"||p.type==="svg")&&eU(f.current,n,a,y);const v=k.useRef(!1);k.useInsertionEffect(()=>{p&&v.current&&p.update(n,h)});const b=n[tO],S=k.useRef(!!b&&!((A=window.MotionHandoffIsComplete)!=null&&A.call(window,b))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,b)));return oR(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),sb.render(p.render),S.current&&p.animationState&&p.animationState.animateChanges())}),k.useEffect(()=>{p&&(!S.current&&p.animationState&&p.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,b)}),S.current=!1))}),p}function eU(t,e,n,s){const{layoutId:a,layout:l,drag:c,dragConstraints:h,layoutScroll:d,layoutRoot:f,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:rO(t.parent)),t.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!c||h&&bo(h),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:p,layoutScroll:d,layoutRoot:f})}function rO(t){if(t)return t.options.allowProjection!==!1?t.projection:rO(t.parent)}function tU({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:a}){t&&HI(t);function l(h,d){let f;const p={...k.useContext(ab),...h,layoutId:nU(h)},{isStatic:y}=p,v=XI(h),b=s(h,y);if(!y&&$0){rU();const S=sU(p);f=S.MeasureLayout,v.visualElement=ZI(a,b,p,e,S.ProjectionNode)}return T.jsxs(Cf.Provider,{value:v,children:[f&&v.visualElement?T.jsx(f,{visualElement:v.visualElement,...p}):null,n(a,h,QI(b,v.visualElement,d),b,y,v.visualElement)]})}l.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const c=k.forwardRef(l);return c[WI]=a,c}function nU({layoutId:t}){const e=k.useContext(N0).id;return e&&t!==void 0?e+"-"+t:t}function rU(t,e){k.useContext(JR).strict}function sU(t){const{drag:e,layout:n}=Ro;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const Wu={};function iU(t){for(const e in t)Wu[e]=t[e],G0(e)&&(Wu[e].isCSSVariable=!0)}function sO(t,{layout:e,layoutId:n}){return Io.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Wu[t]||t==="opacity")}const aU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oU=$o.length;function lU(t,e,n){let s="",a=!0;for(let l=0;l<oU;l++){const c=$o[l],h=t[c];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(c.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||n){const f=FR(h,rb[c]);if(!d){a=!1;const p=aU[c]||c;s+=`${p}(${f}) `}n&&(e[c]=f)}}return s=s.trim(),n?s=n(e,a?"":s):a&&(s="none"),s}function cb(t,e,n){const{style:s,vars:a,transformOrigin:l}=t;let c=!1,h=!1;for(const d in e){const f=e[d];if(Io.has(d)){c=!0;continue}else if(G0(d)){a[d]=f;continue}else{const p=FR(f,rb[d]);d.startsWith("origin")?(h=!0,l[d]=p):s[d]=p}}if(e.transform||(c||n?s.transform=lU(e,t.transform,n):s.transform&&(s.transform="none")),h){const{originX:d="50%",originY:f="50%",originZ:p=0}=l;s.transformOrigin=`${d} ${f} ${p}`}}const hb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function iO(t,e,n){for(const s in e)!bn(e[s])&&!sO(s,n)&&(t[s]=e[s])}function uU({transformTemplate:t},e){return k.useMemo(()=>{const n=hb();return cb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function cU(t,e){const n=t.style||{},s={};return iO(s,n,t),Object.assign(s,uU(t,e)),s}function hU(t,e){const n={},s=cU(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const dU={offset:"stroke-dashoffset",array:"stroke-dasharray"},fU={offset:"strokeDashoffset",array:"strokeDasharray"};function mU(t,e,n=1,s=0,a=!0){t.pathLength=1;const l=a?dU:fU;t[l.offset]=Re.transform(-s);const c=Re.transform(e),h=Re.transform(n);t[l.array]=`${c} ${h}`}function aO(t,{attrX:e,attrY:n,attrScale:s,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...h},d,f,p){if(cb(t,h,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:v}=t;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),s!==void 0&&(y.scale=s),a!==void 0&&mU(y,a,l,c,!1)}const oO=()=>({...hb(),attrs:{}}),lO=t=>typeof t=="string"&&t.toLowerCase()==="svg";function pU(t,e,n,s){const a=k.useMemo(()=>{const l=oO();return aO(l,e,lO(s),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};iO(l,t.style,t),a.style={...l,...a.style}}return a}const gU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function db(t){return typeof t!="string"||t.includes("-")?!1:!!(gU.indexOf(t)>-1||/[A-Z]/u.test(t))}function yU(t=!1){return(n,s,a,{latestValues:l},c)=>{const d=(db(n)?pU:hU)(s,l,c,n),f=FI(s,typeof n=="string",t),p=n!==k.Fragment?{...f,...d,ref:a}:{},{children:y}=s,v=k.useMemo(()=>bn(y)?y.get():y,[y]);return k.createElement(n,{...p,children:v})}}function uT(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function fb(t,e,n,s){if(typeof e=="function"){const[a,l]=uT(s);e=e(n!==void 0?n:t.custom,a,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,l]=uT(s);e=e(n!==void 0?n:t.custom,a,l)}return e}function Ud(t){return bn(t)?t.get():t}function vU({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,a){return{latestValues:bU(n,s,a,t),renderState:e()}}const uO=t=>(e,n)=>{const s=k.useContext(Cf),a=k.useContext(Pf),l=()=>vU(t,e,s,a);return n?l():L0(l)};function bU(t,e,n,s){const a={},l=s(t,{});for(const v in l)a[v]=Ud(l[v]);let{initial:c,animate:h}=t;const d=Of(t),f=eO(t);e&&f&&!d&&t.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let p=n?n.initial===!1:!1;p=p||c===!1;const y=p?h:c;if(y&&typeof y!="boolean"&&!Rf(y)){const v=Array.isArray(y)?y:[y];for(let b=0;b<v.length;b++){const S=fb(t,v[b]);if(S){const{transitionEnd:A,transition:w,..._}=S;for(const x in _){let P=_[x];if(Array.isArray(P)){const O=p?P.length-1:0;P=P[O]}P!==null&&(a[x]=P)}for(const x in A)a[x]=A[x]}}}return a}function mb(t,e,n){var l;const{style:s}=t,a={};for(const c in s)(bn(s[c])||e.style&&bn(e.style[c])||sO(c,t)||((l=n==null?void 0:n.getValue(c))==null?void 0:l.liveStyle)!==void 0)&&(a[c]=s[c]);return a}const wU={useVisualState:uO({scrapeMotionValuesFromProps:mb,createRenderState:hb})};function cO(t,e,n){const s=mb(t,e,n);for(const a in t)if(bn(t[a])||bn(e[a])){const l=$o.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[l]=t[a]}return s}const _U={useVisualState:uO({scrapeMotionValuesFromProps:cO,createRenderState:oO})};function SU(t,e){return function(s,{forwardMotionProps:a}={forwardMotionProps:!1}){const c={...db(s)?_U:wU,preloadedFeatures:t,useRender:yU(a),createVisualElement:e,Component:s};return tU(c)}}function Qu(t,e,n){const s=t.getProps();return fb(s,e,n!==void 0?n:s.custom,t)}const Pv=t=>Array.isArray(t);function xU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Co(n))}function TU(t){return Pv(t)?t[t.length-1]||0:t}function EU(t,e){const n=Qu(t,e);let{transitionEnd:s={},transition:a={},...l}=n||{};l={...l,...s};for(const c in l){const h=TU(l[c]);xU(t,c,h)}}function AU(t){return!!(bn(t)&&t.add)}function Cv(t,e){const n=t.getValue("willChange");if(AU(n))return n.add(e);if(!n&&Rs.WillChange){const s=new Rs.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function hO(t){return t.props[tO]}const PU=t=>t!==null;function CU(t,{repeat:e,repeatType:n="loop"},s){const a=t.filter(PU),l=e&&n!=="loop"&&e%2===1?0:a.length-1;return a[l]}const RU={type:"spring",stiffness:500,damping:25,restSpeed:10},OU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),MU={type:"keyframes",duration:.8},jU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},DU=(t,{keyframes:e})=>e.length>2?MU:Io.has(t)?t.startsWith("scale")?OU(e[1]):RU:jU;function kU({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:a,repeat:l,repeatType:c,repeatDelay:h,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const pb=(t,e,n,s={},a,l)=>c=>{const h=nb(s,t)||{},d=h.delay||s.delay||0;let{elapsed:f=0}=s;f=f-Kr(d);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-f,onUpdate:v=>{e.set(v),h.onUpdate&&h.onUpdate(v)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:l?void 0:a};kU(h)||Object.assign(p,DU(t,p)),p.duration&&(p.duration=Kr(p.duration)),p.repeatDelay&&(p.repeatDelay=Kr(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let y=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(y=!0)),(Rs.instantAnimations||Rs.skipAnimations)&&(y=!0,p.duration=0,p.delay=0),p.allowFlatten=!h.type&&!h.ease,y&&!l&&e.get()!==void 0){const v=CU(p.keyframes,h);if(v!==void 0){Pt.update(()=>{p.onUpdate(v),p.onComplete()});return}}return h.isSync?new Z0(p):new fI(p)};function NU({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function dO(t,e,{delay:n=0,transitionOverride:s,type:a}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:c,...h}=e;s&&(l=s);const d=[],f=a&&t.animationState&&t.animationState.getState()[a];for(const p in h){const y=t.getValue(p,t.latestValues[p]??null),v=h[p];if(v===void 0||f&&NU(f,p))continue;const b={delay:n,...nb(l||{},p)},S=y.get();if(S!==void 0&&!y.isAnimating&&!Array.isArray(v)&&v===S&&!b.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const _=hO(t);if(_){const x=window.MotionHandoffAnimation(_,p,Pt);x!==null&&(b.startTime=x,A=!0)}}Cv(t,p),y.start(pb(p,y,v,t.shouldReduceMotion&&zR.has(p)?{type:!1}:b,t,A));const w=y.animation;w&&d.push(w)}return c&&Promise.all(d).then(()=>{Pt.update(()=>{c&&EU(t,c)})}),d}function Rv(t,e,n={}){var d;const s=Qu(t,e,n.type==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const l=s?()=>Promise.all(dO(t,s,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:y,staggerDirection:v}=a;return LU(t,e,p+f,y,v,n)}:()=>Promise.resolve(),{when:h}=a;if(h){const[f,p]=h==="beforeChildren"?[l,c]:[c,l];return f().then(()=>p())}else return Promise.all([l(),c(n.delay)])}function LU(t,e,n=0,s=0,a=1,l){const c=[],h=(t.variantChildren.size-1)*s,d=a===1?(f=0)=>f*s:(f=0)=>h-f*s;return Array.from(t.variantChildren).sort($U).forEach((f,p)=>{f.notify("AnimationStart",e),c.push(Rv(f,e,{...l,delay:n+d(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(c)}function $U(t,e){return t.sortNodePosition(e)}function IU(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(l=>Rv(t,l,n));s=Promise.all(a)}else if(typeof e=="string")s=Rv(t,e,n);else{const a=typeof e=="function"?Qu(t,e,n.custom):e;s=Promise.all(dO(t,a,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function fO(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const UU=lb.length;function mO(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?mO(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<UU;n++){const s=lb[n],a=t.props[s];(Xu(a)||a===!1)&&(e[s]=a)}return e}const BU=[...ob].reverse(),zU=ob.length;function qU(t){return e=>Promise.all(e.map(({animation:n,options:s})=>IU(t,n,s)))}function HU(t){let e=qU(t),n=cT(),s=!0;const a=d=>(f,p)=>{var v;const y=Qu(t,p,d==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);if(y){const{transition:b,transitionEnd:S,...A}=y;f={...f,...A,...S}}return f};function l(d){e=d(t)}function c(d){const{props:f}=t,p=mO(t.parent)||{},y=[],v=new Set;let b={},S=1/0;for(let w=0;w<zU;w++){const _=BU[w],x=n[_],P=f[_]!==void 0?f[_]:p[_],O=Xu(P),R=_===d?x.isActive:null;R===!1&&(S=w);let M=P===p[_]&&P!==f[_]&&O;if(M&&s&&t.manuallyAnimateOnMount&&(M=!1),x.protectedKeys={...b},!x.isActive&&R===null||!P&&!x.prevProp||Rf(P)||typeof P=="boolean")continue;const j=VU(x.prevProp,P);let $=j||_===d&&x.isActive&&!M&&O||w>S&&O,z=!1;const B=Array.isArray(P)?P:[P];let te=B.reduce(a(_),{});R===!1&&(te={});const{prevResolvedValues:Q={}}=x,se={...Q,...te},ae=ne=>{$=!0,v.has(ne)&&(z=!0,v.delete(ne)),x.needsAnimating[ne]=!0;const K=t.getValue(ne);K&&(K.liveStyle=!1)};for(const ne in se){const K=te[ne],fe=Q[ne];if(b.hasOwnProperty(ne))continue;let N=!1;Pv(K)&&Pv(fe)?N=!fO(K,fe):N=K!==fe,N?K!=null?ae(ne):v.add(ne):K!==void 0&&v.has(ne)?ae(ne):x.protectedKeys[ne]=!0}x.prevProp=P,x.prevResolvedValues=te,x.isActive&&(b={...b,...te}),s&&t.blockInitialAnimation&&($=!1),$&&(!(M&&j)||z)&&y.push(...B.map(ne=>({animation:ne,options:{type:_}})))}if(v.size){const w={};if(typeof f.initial!="boolean"){const _=Qu(t,Array.isArray(f.initial)?f.initial[0]:f.initial);_&&_.transition&&(w.transition=_.transition)}v.forEach(_=>{const x=t.getBaseTarget(_),P=t.getValue(_);P&&(P.liveStyle=!0),w[_]=x??null}),y.push({animation:w})}let A=!!y.length;return s&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(A=!1),s=!1,A?e(y):Promise.resolve()}function h(d,f){var y;if(n[d].isActive===f)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(v=>{var b;return(b=v.animationState)==null?void 0:b.setActive(d,f)}),n[d].isActive=f;const p=c(d);for(const v in n)n[v].protectedKeys={};return p}return{animateChanges:c,setActive:h,setAnimateFunction:l,getState:()=>n,reset:()=>{n=cT(),s=!0}}}function VU(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!fO(e,t):!1}function Gi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cT(){return{animate:Gi(!0),whileInView:Gi(),whileHover:Gi(),whileTap:Gi(),whileDrag:Gi(),whileFocus:Gi(),exit:Gi()}}class Si{constructor(e){this.isMounted=!1,this.node=e}update(){}}class GU extends Si{constructor(e){super(e),e.animationState||(e.animationState=HU(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Rf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let FU=0;class KU extends Si{constructor(){super(...arguments),this.id=FU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const YU={animation:{Feature:GU},exit:{Feature:KU}};function Ju(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function pc(t){return{point:{x:t.pageX,y:t.pageY}}}const XU=t=>e=>ib(e)&&t(e,pc(e));function ju(t,e,n,s){return Ju(t,e,XU(n),s)}function pO({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function WU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function QU(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}const gO=1e-4,JU=1-gO,ZU=1+gO,yO=.01,eB=0-yO,tB=0+yO;function An(t){return t.max-t.min}function nB(t,e,n){return Math.abs(t-e)<=n}function hT(t,e,n,s=.5){t.origin=s,t.originPoint=Et(e.min,e.max,t.origin),t.scale=An(n)/An(e),t.translate=Et(n.min,n.max,t.origin)-t.originPoint,(t.scale>=JU&&t.scale<=ZU||isNaN(t.scale))&&(t.scale=1),(t.translate>=eB&&t.translate<=tB||isNaN(t.translate))&&(t.translate=0)}function Du(t,e,n,s){hT(t.x,e.x,n.x,s?s.originX:void 0),hT(t.y,e.y,n.y,s?s.originY:void 0)}function dT(t,e,n){t.min=n.min+e.min,t.max=t.min+An(e)}function rB(t,e,n){dT(t.x,e.x,n.x),dT(t.y,e.y,n.y)}function fT(t,e,n){t.min=e.min-n.min,t.max=t.min+An(e)}function ku(t,e,n){fT(t.x,e.x,n.x),fT(t.y,e.y,n.y)}const mT=()=>({translate:0,scale:1,origin:0,originPoint:0}),wo=()=>({x:mT(),y:mT()}),pT=()=>({min:0,max:0}),$t=()=>({x:pT(),y:pT()});function lr(t){return[t("x"),t("y")]}function xg(t){return t===void 0||t===1}function Ov({scale:t,scaleX:e,scaleY:n}){return!xg(t)||!xg(e)||!xg(n)}function Zi(t){return Ov(t)||vO(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function vO(t){return gT(t.x)||gT(t.y)}function gT(t){return t&&t!=="0%"}function uf(t,e,n){const s=t-n,a=e*s;return n+a}function yT(t,e,n,s,a){return a!==void 0&&(t=uf(t,a,s)),uf(t,n,s)+e}function Mv(t,e=0,n=1,s,a){t.min=yT(t.min,e,n,s,a),t.max=yT(t.max,e,n,s,a)}function bO(t,{x:e,y:n}){Mv(t.x,e.translate,e.scale,e.originPoint),Mv(t.y,n.translate,n.scale,n.originPoint)}const vT=.999999999999,bT=1.0000000000001;function sB(t,e,n,s=!1){const a=n.length;if(!a)return;e.x=e.y=1;let l,c;for(let h=0;h<a;h++){l=n[h],c=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&So(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,bO(t,c)),s&&Zi(l.latestValues)&&So(t,l.latestValues))}e.x<bT&&e.x>vT&&(e.x=1),e.y<bT&&e.y>vT&&(e.y=1)}function _o(t,e){t.min=t.min+e,t.max=t.max+e}function wT(t,e,n,s,a=.5){const l=Et(t.min,t.max,a);Mv(t,e,n,l,s)}function So(t,e){wT(t.x,e.x,e.scaleX,e.scale,e.originX),wT(t.y,e.y,e.scaleY,e.scale,e.originY)}function wO(t,e){return pO(QU(t.getBoundingClientRect(),e))}function iB(t,e,n){const s=wO(t,n),{scroll:a}=e;return a&&(_o(s.x,a.offset.x),_o(s.y,a.offset.y)),s}const _O=({current:t})=>t?t.ownerDocument.defaultView:null,_T=(t,e)=>Math.abs(t-e);function aB(t,e){const n=_T(t.x,e.x),s=_T(t.y,e.y);return Math.sqrt(n**2+s**2)}class SO{constructor(e,n,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Eg(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=aB(y.offset,{x:0,y:0})>=3;if(!v&&!b)return;const{point:S}=y,{timestamp:A}=cn;this.history.push({...S,timestamp:A});const{onStart:w,onMove:_}=this.handlers;v||(w&&w(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,y)},this.handlePointerMove=(y,v)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Tg(v,this.transformPagePoint),Pt.update(this.updatePoint,!0)},this.handlePointerUp=(y,v)=>{this.end();const{onEnd:b,onSessionEnd:S,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Eg(y.type==="pointercancel"?this.lastMoveEventInfo:Tg(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(y,w),S&&S(y,w)},!ib(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=s,this.contextWindow=a||window;const c=pc(e),h=Tg(c,this.transformPagePoint),{point:d}=h,{timestamp:f}=cn;this.history=[{...d,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,Eg(h,this.history)),this.removeListeners=dc(ju(this.contextWindow,"pointermove",this.handlePointerMove),ju(this.contextWindow,"pointerup",this.handlePointerUp),ju(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gi(this.updatePoint)}}function Tg(t,e){return e?{point:e(t.point)}:t}function ST(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Eg({point:t},e){return{point:t,delta:ST(t,xO(e)),offset:ST(t,oB(e)),velocity:lB(e,.1)}}function oB(t){return t[0]}function xO(t){return t[t.length-1]}function lB(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const a=xO(t);for(;n>=0&&(s=t[n],!(a.timestamp-s.timestamp>Kr(e)));)n--;if(!s)return{x:0,y:0};const l=Yr(a.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const c={x:(a.x-s.x)/l,y:(a.y-s.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function uB(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?Et(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?Et(n,t,s.max):Math.min(t,n)),t}function xT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function cB(t,{top:e,left:n,bottom:s,right:a}){return{x:xT(t.x,n,a),y:xT(t.y,e,s)}}function TT(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function hB(t,e){return{x:TT(t.x,e.x),y:TT(t.y,e.y)}}function dB(t,e){let n=.5;const s=An(t),a=An(e);return a>s?n=Fu(e.min,e.max-s,t.min):s>a&&(n=Fu(t.min,t.max-a,e.min)),Cs(0,1,n)}function fB(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const jv=.35;function mB(t=jv){return t===!1?t=0:t===!0&&(t=jv),{x:ET(t,"left","right"),y:ET(t,"top","bottom")}}function ET(t,e,n){return{min:AT(t,e),max:AT(t,n)}}function AT(t,e){return typeof t=="number"?t:t[e]||0}const pB=new WeakMap;class gB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$t(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=p=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(pc(p).point)},l=(p,y)=>{const{drag:v,dragPropagation:b,onDragStart:S}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=RI(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lr(w=>{let _=this.getAxisMotionValue(w).get()||0;if(Xr.test(_)){const{projection:x}=this.visualElement;if(x&&x.layout){const P=x.layout.layoutBox[w];P&&(_=An(P)*(parseFloat(_)/100))}}this.originPoint[w]=_}),S&&Pt.postRender(()=>S(p,y)),Cv(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},c=(p,y)=>{const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:S,onDrag:A}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:w}=y;if(b&&this.currentDirection===null){this.currentDirection=yB(w),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",y.point,w),this.updateAxis("y",y.point,w),this.visualElement.render(),A&&A(p,y)},h=(p,y)=>this.stop(p,y),d=()=>lr(p=>{var y;return this.getAnimationState(p)==="paused"&&((y=this.getAxisMotionValue(p).animation)==null?void 0:y.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new SO(e,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:h,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:_O(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&Pt.postRender(()=>l(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:a}=this.getProps();if(!s||!Fh(e,a,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(c=uB(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var l;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,a=this.constraints;e&&bo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=cB(s.layoutBox,e):this.constraints=!1,this.elastic=mB(n),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&lr(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=fB(s.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!bo(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=iB(s,a.root,this.visualElement.getTransformPagePoint());let c=hB(a.layout.layoutBox,l);if(n){const h=n(WU(c));this.hasMutatedConstraints=!!h,h&&(c=pO(h))}return c}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:a,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},f=lr(p=>{if(!Fh(p,n,this.currentDirection))return;let y=d&&d[p]||{};c&&(y={min:0,max:0});const v=a?200:1e6,b=a?40:1e7,S={type:"inertia",velocity:s?e[p]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...l,...y};return this.startAxisValueAnimation(p,S)});return Promise.all(f).then(h)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return Cv(this.visualElement,e),s.start(pb(e,s,0,n,this.visualElement,!1))}stopAnimation(){lr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){lr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[n];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){lr(n=>{const{drag:s}=this.getProps();if(!Fh(n,s,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(n);if(a&&a.layout){const{min:c,max:h}=a.layout.layoutBox[n];l.set(e[n]-Et(c,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!bo(n)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};lr(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const d=h.get();a[c]=dB({min:d,max:d},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),lr(c=>{if(!Fh(c,e,null))return;const h=this.getAxisMotionValue(c),{min:d,max:f}=this.constraints[c];h.set(Et(d,f,a[c]))})}addListeners(){if(!this.visualElement.current)return;pB.set(this.visualElement,this);const e=this.visualElement.current,n=ju(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),s=()=>{const{dragConstraints:d}=this.getProps();bo(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Pt.read(s);const c=Ju(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(lr(p=>{const y=this.getAxisMotionValue(p);y&&(this.originPoint[p]+=d[p].translate,y.set(y.get()+d[p].translate))}),this.visualElement.render())});return()=>{c(),n(),l(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:c=jv,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:a,dragConstraints:l,dragElastic:c,dragMomentum:h}}}function Fh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function yB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class vB extends Si{constructor(e){super(e),this.removeGroupControls=fr,this.removeListeners=fr,this.controls=new gB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fr}unmount(){this.removeGroupControls(),this.removeListeners()}}const PT=t=>(e,n)=>{t&&Pt.postRender(()=>t(e,n))};class bB extends Si{constructor(){super(...arguments),this.removePointerDownListener=fr}onPointerDown(e){this.session=new SO(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_O(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:PT(e),onStart:PT(n),onMove:s,onEnd:(l,c)=>{delete this.session,a&&Pt.postRender(()=>a(l,c))}}}mount(){this.removePointerDownListener=ju(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Bd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function CT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Hl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Re.test(t))t=parseFloat(t);else return t;const n=CT(t,e.target.x),s=CT(t,e.target.y);return`${n}% ${s}%`}},wB={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,a=yi.parse(t);if(a.length>5)return s;const l=yi.createTransformer(t),c=typeof a[0]!="number"?1:0,h=n.x.scale*e.x,d=n.y.scale*e.y;a[0+c]/=h,a[1+c]/=d;const f=Et(h,d,.5);return typeof a[2+c]=="number"&&(a[2+c]/=f),typeof a[3+c]=="number"&&(a[3+c]/=f),l(a)}};class _B extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:a}=this.props,{projection:l}=e;iU(SB),l&&(n.group&&n.group.add(l),s&&s.register&&a&&s.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Bd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:a,isPresent:l}=this.props,{projection:c}=s;return c&&(c.isPresent=l,a||e.layoutDependency!==n||n===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||Pt.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),sb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function TO(t){const[e,n]=QR(),s=k.useContext(N0);return T.jsx(_B,{...t,layoutGroup:s,switchLayoutGroup:k.useContext(nO),isPresent:e,safeToRemove:n})}const SB={borderRadius:{...Hl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hl,borderTopRightRadius:Hl,borderBottomLeftRadius:Hl,borderBottomRightRadius:Hl,boxShadow:wB};function xB(t,e,n){const s=bn(t)?t:Co(t);return s.start(pb("",s,e,n)),s.animation}const TB=(t,e)=>t.depth-e.depth;class EB{constructor(){this.children=[],this.isDirty=!1}add(e){I0(this.children,e),this.isDirty=!0}remove(e){U0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(TB),this.isDirty=!1,this.children.forEach(e)}}function AB(t,e){const n=Ln.now(),s=({timestamp:a})=>{const l=a-n;l>=e&&(gi(s),t(l-e))};return Pt.setup(s,!0),()=>gi(s)}const EO=["TopLeft","TopRight","BottomLeft","BottomRight"],PB=EO.length,RT=t=>typeof t=="string"?parseFloat(t):t,OT=t=>typeof t=="number"||Re.test(t);function CB(t,e,n,s,a,l){a?(t.opacity=Et(0,n.opacity??1,RB(s)),t.opacityExit=Et(e.opacity??1,0,OB(s))):l&&(t.opacity=Et(e.opacity??1,n.opacity??1,s));for(let c=0;c<PB;c++){const h=`border${EO[c]}Radius`;let d=MT(e,h),f=MT(n,h);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||OT(d)===OT(f)?(t[h]=Math.max(Et(RT(d),RT(f),s),0),(Xr.test(f)||Xr.test(d))&&(t[h]+="%")):t[h]=f}(e.rotate||n.rotate)&&(t.rotate=Et(e.rotate||0,n.rotate||0,s))}function MT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const RB=AO(0,.5,vR),OB=AO(.5,.95,fr);function AO(t,e,n){return s=>s<t?0:s>e?1:n(Fu(t,e,s))}function jT(t,e){t.min=e.min,t.max=e.max}function or(t,e){jT(t.x,e.x),jT(t.y,e.y)}function DT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function kT(t,e,n,s,a){return t-=e,t=uf(t,1/n,s),a!==void 0&&(t=uf(t,1/a,s)),t}function MB(t,e=0,n=1,s=.5,a,l=t,c=t){if(Xr.test(e)&&(e=parseFloat(e),e=Et(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=Et(l.min,l.max,s);t===l&&(h-=e),t.min=kT(t.min,e,n,h,a),t.max=kT(t.max,e,n,h,a)}function NT(t,e,[n,s,a],l,c){MB(t,e[n],e[s],e[a],e.scale,l,c)}const jB=["x","scaleX","originX"],DB=["y","scaleY","originY"];function LT(t,e,n,s){NT(t.x,e,jB,n?n.x:void 0,s?s.x:void 0),NT(t.y,e,DB,n?n.y:void 0,s?s.y:void 0)}function $T(t){return t.translate===0&&t.scale===1}function PO(t){return $T(t.x)&&$T(t.y)}function IT(t,e){return t.min===e.min&&t.max===e.max}function kB(t,e){return IT(t.x,e.x)&&IT(t.y,e.y)}function UT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function CO(t,e){return UT(t.x,e.x)&&UT(t.y,e.y)}function BT(t){return An(t.x)/An(t.y)}function zT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class NB{constructor(){this.members=[]}add(e){I0(this.members,e),e.scheduleRender()}remove(e){if(U0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let s;for(let a=n;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function LB(t,e,n){let s="";const a=t.x.translate/e.x,l=t.y.translate/e.y,c=(n==null?void 0:n.z)||0;if((a||l||c)&&(s=`translate3d(${a}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:y,rotateY:v,skewX:b,skewY:S}=n;f&&(s=`perspective(${f}px) ${s}`),p&&(s+=`rotate(${p}deg) `),y&&(s+=`rotateX(${y}deg) `),v&&(s+=`rotateY(${v}deg) `),b&&(s+=`skewX(${b}deg) `),S&&(s+=`skewY(${S}deg) `)}const h=t.x.scale*e.x,d=t.y.scale*e.y;return(h!==1||d!==1)&&(s+=`scale(${h}, ${d})`),s||"none"}const Ag=["","X","Y","Z"],$B={visibility:"hidden"},IB=1e3;let UB=0;function Pg(t,e,n,s){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),s&&(s[t]=0))}function RO(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=hO(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Pt,!(a||l))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&RO(s)}function OO({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(c={},h=e==null?void 0:e()){this.id=UB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(qB),this.nodes.forEach(KB),this.nodes.forEach(YB),this.nodes.forEach(HB)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new EB)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new q0),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const d=this.eventHandlers.get(c);d&&d.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=WR(c)&&!NI(c),this.instance=c;const{layoutId:h,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),t){let p;const y=()=>this.root.updateBlockedByResize=!1;t(c,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=AB(y,250),Bd.hasAnimatedSinceResize&&(Bd.hasAnimatedSinceResize=!1,this.nodes.forEach(HT))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&f&&(h||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||f.getDefaultTransition()||ZB,{onLayoutAnimationStart:A,onLayoutAnimationComplete:w}=f.getProps(),_=!this.targetLayout||!CO(this.targetLayout,b),x=!y&&v;if(this.options.layoutRoot||this.resumeFrom||x||y&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...nb(S,"layout"),onPlay:A,onComplete:w};(f.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(p,x)}else y||HT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),gi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(XB),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&RO(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const y=this.path[p];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qT);return}this.isUpdating||this.nodes.forEach(GB),this.isUpdating=!1,this.nodes.forEach(FB),this.nodes.forEach(BB),this.nodes.forEach(zB),this.clearAllSnapshots();const h=Ln.now();cn.delta=Cs(0,1e3/60,h-cn.timestamp),cn.timestamp=h,cn.isProcessing=!0,yg.update.process(cn),yg.preRender.process(cn),yg.render.process(cn),cn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(VB),this.sharedNodes.forEach(WB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!An(this.snapshot.measuredBox.x)&&!An(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$t(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const d=s(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!PO(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;c&&this.instance&&(h||Zi(this.latestValues)||p)&&(a(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return c&&(d=this.removeTransform(d)),ez(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:c}=this.options;if(!c)return $t();const h=c.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(tz))){const{scroll:p}=this.root;p&&(_o(h.x,p.offset.x),_o(h.y,p.offset.y))}return h}removeElementScroll(c){var d;const h=$t();if(or(h,c),(d=this.scroll)!=null&&d.wasRoot)return h;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:y,options:v}=p;p!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&or(h,c),_o(h.x,y.offset.x),_o(h.y,y.offset.y))}return h}applyTransform(c,h=!1){const d=$t();or(d,c);for(let f=0;f<this.path.length;f++){const p=this.path[f];!h&&p.options.layoutScroll&&p.scroll&&p!==p.root&&So(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Zi(p.latestValues)&&So(d,p.latestValues)}return Zi(this.latestValues)&&So(d,this.latestValues),d}removeTransform(c){const h=$t();or(h,c);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Zi(f.latestValues))continue;Ov(f.latestValues)&&f.updateSnapshot();const p=$t(),y=f.measurePageBox();or(p,y),LT(h,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Zi(this.latestValues)&&LT(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var v;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:y}=this.options;if(!(!this.layout||!(p||y))){if(this.resolvedRelativeTargetAt=cn.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$t(),this.relativeTargetOrigin=$t(),ku(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),or(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$t(),this.targetWithTransforms=$t()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):or(this.target,this.layout.layoutBox),bO(this.target,this.targetDelta)):or(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$t(),this.relativeTargetOrigin=$t(),ku(this.relativeTargetOrigin,this.target,b.target),or(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ov(this.parent.latestValues)||vO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var S;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===cn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;or(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;sB(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=$t());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(DT(this.prevProjectionDelta.x,this.projectionDelta.x),DT(this.prevProjectionDelta.y,this.projectionDelta.y)),Du(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!zT(this.projectionDelta.x,this.prevProjectionDelta.x)||!zT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wo(),this.projectionDelta=wo(),this.projectionDeltaWithTransform=wo()}setAnimationOrigin(c,h=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},y=wo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const v=$t(),b=d?d.source:void 0,S=this.layout?this.layout.source:void 0,A=b!==S,w=this.getStack(),_=!w||w.members.length<=1,x=!!(A&&!_&&this.options.crossfade===!0&&!this.path.some(JB));this.animationProgress=0;let P;this.mixTargetDelta=O=>{const R=O/1e3;VT(y.x,c.x,R),VT(y.y,c.y,R),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ku(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QB(this.relativeTarget,this.relativeTargetOrigin,v,R),P&&kB(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=$t()),or(P,this.relativeTarget)),A&&(this.animationValues=p,CB(p,f,this.latestValues,R,x,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,d,f;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(f=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||f.stop(),this.pendingAnimation&&(gi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pt.update(()=>{Bd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Co(0)),this.currentAnimation=xB(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),c.onUpdate&&c.onUpdate(p)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(IB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:d,layout:f,latestValues:p}=c;if(!(!h||!d||!f)){if(this!==c&&this.layout&&f&&MO(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||$t();const y=An(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+y;const v=An(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+v}or(h,d),So(h,p),Du(this.projectionDeltaWithTransform,this.layoutCorrected,h,p)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new NB),this.sharedNodes.get(c).add(h);const f=h.options.initialPromotionConfig;h.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const f={};d.z&&Pg("z",c,f,this.animationValues);for(let p=0;p<Ag.length;p++)Pg(`rotate${Ag[p]}`,c,f,this.animationValues),Pg(`skew${Ag[p]}`,c,f,this.animationValues);c.render();for(const p in f)c.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);c.scheduleRender()}getProjectionStyles(c){if(!this.instance||this.isSVG)return;if(!this.isVisible)return $B;const h={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Ud(c==null?void 0:c.pointerEvents)||"",h.transform=d?d(this.latestValues,""):"none",h;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Ud(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!Zi(this.latestValues)&&(b.transform=d?d({},""):"none",this.hasProjected=!1),b}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),h.transform=LB(this.projectionDeltaWithTransform,this.treeScale,p),d&&(h.transform=d(p,h.transform));const{x:y,y:v}=this.projectionDelta;h.transformOrigin=`${y.origin*100}% ${v.origin*100}% 0`,f.animationValues?h.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:h.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const b in Wu){if(p[b]===void 0)continue;const{correct:S,applyTo:A,isCSSVariable:w}=Wu[b],_=h.transform==="none"?p[b]:S(p[b],f);if(A){const x=A.length;for(let P=0;P<x;P++)h[A[P]]=_}else w?this.options.visualElement.renderState.vars[b]=_:h[b]=_}return this.options.layoutId&&(h.pointerEvents=f===this?Ud(c==null?void 0:c.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(qT),this.root.sharedNodes.clear()}}}function BB(t){t.updateLayout()}function zB(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=t.layout,{animationType:l}=t.options,c=e.source!==t.layout.source;l==="size"?lr(y=>{const v=c?e.measuredBox[y]:e.layoutBox[y],b=An(v);v.min=s[y].min,v.max=v.min+b}):MO(l,e.layoutBox,s)&&lr(y=>{const v=c?e.measuredBox[y]:e.layoutBox[y],b=An(s[y]);v.max=v.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+b)});const h=wo();Du(h,s,e.layoutBox);const d=wo();c?Du(d,t.applyTransform(a,!0),e.measuredBox):Du(d,s,e.layoutBox);const f=!PO(h);let p=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:b}=y;if(v&&b){const S=$t();ku(S,e.layoutBox,v.layoutBox);const A=$t();ku(A,s,b.layoutBox),CO(S,A)||(p=!0),y.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=S,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:d,layoutDelta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function qB(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function HB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function VB(t){t.clearSnapshot()}function qT(t){t.clearMeasurements()}function GB(t){t.isLayoutDirty=!1}function FB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function HT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function KB(t){t.resolveTargetDelta()}function YB(t){t.calcProjection()}function XB(t){t.resetSkewAndRotation()}function WB(t){t.removeLeadSnapshot()}function VT(t,e,n){t.translate=Et(e.translate,0,n),t.scale=Et(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function GT(t,e,n,s){t.min=Et(e.min,n.min,s),t.max=Et(e.max,n.max,s)}function QB(t,e,n,s){GT(t.x,e.x,n.x,s),GT(t.y,e.y,n.y,s)}function JB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ZB={duration:.45,ease:[.4,0,.1,1]},FT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),KT=FT("applewebkit/")&&!FT("chrome/")?Math.round:fr;function YT(t){t.min=KT(t.min),t.max=KT(t.max)}function ez(t){YT(t.x),YT(t.y)}function MO(t,e,n){return t==="position"||t==="preserve-aspect"&&!nB(BT(e),BT(n),.2)}function tz(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const nz=OO({attachResizeListener:(t,e)=>Ju(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Cg={current:void 0},jO=OO({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Cg.current){const t=new nz({});t.mount(window),t.setOptions({layoutScroll:!0}),Cg.current=t}return Cg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),rz={pan:{Feature:bB},drag:{Feature:vB,ProjectionNode:jO,MeasureLayout:TO}};function XT(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,l=s[a];l&&Pt.postRender(()=>l(e,pc(e)))}class sz extends Si{mount(){const{current:e}=this.node;e&&(this.unmount=OI(e,(n,s)=>(XT(this.node,s,"Start"),a=>XT(this.node,a,"End"))))}unmount(){}}class iz extends Si{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dc(Ju(this.node.current,"focus",()=>this.onFocus()),Ju(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function WT(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),l=s[a];l&&Pt.postRender(()=>l(e,pc(e)))}class az extends Si{mount(){const{current:e}=this.node;e&&(this.unmount=kI(e,(n,s)=>(WT(this.node,s,"Start"),(a,{success:l})=>WT(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Dv=new WeakMap,Rg=new WeakMap,oz=t=>{const e=Dv.get(t.target);e&&e(t)},lz=t=>{t.forEach(oz)};function uz({root:t,...e}){const n=t||document;Rg.has(n)||Rg.set(n,{});const s=Rg.get(n),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(lz,{root:t,...e})),s[a]}function cz(t,e,n){const s=uz(e);return Dv.set(t,n),s.observe(t),()=>{Dv.delete(t),s.unobserve(t)}}const hz={some:0,all:1};class dz extends Si{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:a="some",once:l}=e,c={root:n?n.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:hz[a]},h=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,l&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:y}=this.node.getProps(),v=f?p:y;v&&v(d)};return cz(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(fz(e,n))&&this.startObserver()}unmount(){}}function fz({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const mz={inView:{Feature:dz},tap:{Feature:az},focus:{Feature:iz},hover:{Feature:sz}},pz={layout:{ProjectionNode:jO,MeasureLayout:TO}},kv={current:null},DO={current:!1};function gz(){if(DO.current=!0,!!$0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>kv.current=t.matches;t.addListener(e),e()}else kv.current=!1}const yz=new WeakMap;function vz(t,e,n){for(const s in e){const a=e[s],l=n[s];if(bn(a))t.addValue(s,a);else if(bn(l))t.addValue(s,Co(a,{owner:t}));else if(l!==a)if(t.hasValue(s)){const c=t.getValue(s);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=t.getStaticValue(s);t.addValue(s,Co(c!==void 0?c:a,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const QT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class bz{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:l,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Ln.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Pt.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=Of(n),this.isVariantNode=eO(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in y){const b=y[v];d[v]!==void 0&&bn(b)&&b.set(d[v],!1)}}mount(e){this.current=e,yz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),DO.current||gz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),gi(this.notifyUpdate),gi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Io.has(e);s&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",h=>{this.latestValues[e]=h,this.props.onUpdate&&Pt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),l=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),l(),c&&c(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ro){const n=Ro[e];if(!n)continue;const{isEnabled:s,Feature:a}=n;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$t()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<QT.length;s++){const a=QT[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,c=e[l];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=vz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Co(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(lR(s)||cR(s))?s=parseFloat(s):!$I(s)&&yi.test(n)&&(s=GR(e,n)),this.setBaseTarget(e,bn(s)?s.get():s)),bn(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var l;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const c=fb(this.props,n,(l=this.presenceContext)==null?void 0:l.custom);c&&(s=c[e])}if(n&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!bn(a)?a:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new q0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class kO extends bz{constructor(){super(...arguments),this.KeyframeResolver=EI}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;bn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function NO(t,{style:e,vars:n},s,a){Object.assign(t.style,e,a&&a.getProjectionStyles(s));for(const l in n)t.style.setProperty(l,n[l])}function wz(t){return window.getComputedStyle(t)}class _z extends kO{constructor(){super(...arguments),this.type="html",this.renderInstance=NO}readValueFromInstance(e,n){var s;if(Io.has(n))return(s=this.projection)!=null&&s.isProjecting?_v(n):V$(e,n);{const a=wz(e),l=(G0(n)?a.getPropertyValue(n):a[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:n}){return wO(e,n)}build(e,n,s){cb(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return mb(e,n,s)}}const LO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Sz(t,e,n,s){NO(t,e,void 0,s);for(const a in e.attrs)t.setAttribute(LO.has(a)?a:ub(a),e.attrs[a])}class xz extends kO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$t}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Io.has(n)){const s=VR(n);return s&&s.default||0}return n=LO.has(n)?n:ub(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return cO(e,n,s)}build(e,n,s){aO(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,a){Sz(e,n,s,a)}mount(e){this.isSVGTag=lO(e.tagName),super.mount(e)}}const Tz=(t,e)=>db(t)?new xz(e):new _z(e,{allowProjection:t!==k.Fragment}),Ez=SU({...YU,...mz,...rz,...pz},Tz),Nv=KI(Ez),Az=({character:t,onSelect:e,isSelected:n=!1})=>{const[s,a]=k.useState(!1),l=t.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name)}&background=random`,c=t.bible_book||"";return T.jsxs(Nv.div,{className:`
        group relative flex flex-col sm:flex-row items-center gap-4 overflow-hidden rounded-xl border-2 
        bg-white/90 backdrop-blur-sm shadow-lg
        transition-all duration-300 ease-in-out cursor-pointer
        ${n?"border-yellow-400 ring-2 ring-yellow-300/50 shadow-xl":"border-white/60 hover:border-yellow-300/70 hover:shadow-xl"}
      `,whileHover:{scale:1.02,transition:{duration:.2}},whileTap:{scale:.98},onClick:()=>e(t.id),role:"button",tabIndex:0,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),e(t.id))},"aria-label":`Chat with ${t.name}${c?` from ${c}`:""}`,children:[T.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/40 via-white/50 to-yellow-50/30 mix-blend-overlay pointer-events-none"}),n&&T.jsx("div",{className:"absolute -inset-0.5 bg-yellow-300 opacity-20 blur-md rounded-xl animate-pulse"}),T.jsx("button",{"aria-label":s?"Remove from favourites":"Add to favourites",onClick:h=>{h.stopPropagation(),a(!s)},className:`
          absolute top-2 left-2 z-10 rounded-full p-1.5 
          transition-all duration-300
          ${s?"bg-red-100 text-red-600 shadow-md":"bg-white/80 text-gray-400 hover:text-gray-600 hover:bg-white/90 backdrop-blur-sm"}
          focus:outline-none focus:ring-2 focus:ring-yellow-300 focus:ring-offset-2
        `,children:s?T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"h-5 w-5",children:T.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09A6.003 6.003 0 0119 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-5 w-5",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 21.364 4.318 12.682a4.5 4.5 0 010-6.364z"})})}),T.jsxs("div",{className:"relative w-[150px] h-[150px] flex-shrink-0",children:[T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-900/40 to-transparent pointer-events-none z-10 rounded-full"}),T.jsx("table",{className:"border-collapse m-0 p-0 w-[150px] h-[150px] relative z-0",children:T.jsx("tbody",{children:T.jsx("tr",{children:T.jsx("td",{className:`
                  w-[150px] h-[150px] rounded-full overflow-hidden p-0
                  ${n?"border-4 border-yellow-400":"border-2 border-white/40"}
                  shadow-md bg-blue-50
                `,children:T.jsx("img",{src:l,alt:t.name,className:"w-[150px] h-[150px] object-cover block",onError:h=>{h.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name)}&background=random`}})})})})}),T.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 opacity-70 z-10 pointer-events-none",children:T.jsx("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:T.jsx("path",{d:"M0 0C55.2285 0 100 44.7715 100 100H75C75 58.5786 41.4214 25 0 25V0Z",fill:"#FFD700"})})}),c&&T.jsx("div",{className:"absolute bottom-1 left-1 bg-blue-900/60 text-white text-xs px-2 py-0.5 rounded z-10 backdrop-blur-sm",children:c})]}),T.jsxs("div",{className:"flex flex-1 flex-col p-4 sm:pr-4 sm:pl-0",children:[T.jsx("h3",{className:"mb-1 text-xl font-extrabold text-blue-900 tracking-tight",children:t.name}),T.jsx("div",{className:"h-0.5 w-12 bg-yellow-400 rounded-full mb-2 opacity-80"}),T.jsxs("div",{className:"relative mb-4",children:[T.jsx("div",{className:"absolute inset-0 bg-blue-50/30 rounded pointer-events-none"})," ",T.jsx("p",{className:"relative text-sm text-gray-700 line-clamp-2 group-hover:line-clamp-none transition-all duration-300 z-10",children:t.description})]}),T.jsx("button",{onClick:h=>{h.stopPropagation(),e(t.id)},className:`
            mt-auto rounded-lg px-4 py-2 text-sm font-semibold shadow-md
            transition-all duration-300
            ${n?"bg-yellow-500 text-blue-900 hover:bg-yellow-600":"bg-blue-600 text-white hover:bg-blue-700"}
            focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-300
          `,"aria-label":`Start chat with ${t.name}`,children:n?"Continue Chat":"Start Chat"})]}),n&&T.jsx("div",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full bg-yellow-500 text-blue-900 shadow-md z-20",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-4 w-4",children:T.jsx("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z",clipRule:"evenodd"})})})]})};console.log(" ScalableCharacterSelection MODULE LOADED! ");const JT={oldTestament:["Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalms","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi"],newTestament:["Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"]},Pz=()=>{console.log(" ScalableCharacterSelection RENDER START ");const[t,e]=k.useState([]),[n,s]=k.useState(!0),[a,l]=k.useState(null),[c,h]=k.useState(""),[d,f]=k.useState("grid"),[p,y]=k.useState("all"),[v,b]=k.useState("all"),[S,A]=k.useState("all"),[w,_]=k.useState(1),[x,P]=k.useState("all"),[O,R]=k.useState([]),[M,j]=k.useState([]),[$,z]=k.useState(null),[B,te]=k.useState(!1),Q=20,{selectCharacter:se,character:ae}=oc(),pe=k.useCallback(async()=>{s(!0),l(null);try{const Z=await kd.getAll();e(Z);const le=Z.find(me=>me.name.toLowerCase().includes("jesus"));z(le||(Z.length>0?Z[0]:null))}catch(Z){console.error("Failed to fetch characters:",Z),l("Failed to load Bible characters. Please try again later.")}finally{s(!1)}},[]);k.useEffect(()=>{console.log(" ScalableCharacterSelection useEffect (mount) fired"),pe()},[pe]),k.useEffect(()=>{console.log(" ScalableCharacterSelection fetching groups list"),(async()=>{try{const Z=await z4.getAllGroups();R(Z)}catch(Z){console.error("Failed to fetch character groups:",Z)}})()},[]);const V=k.useCallback(async Z=>{try{te(!0),await se(Z)}catch(le){console.error("Error selecting character:",le),l("Failed to select character. Please try again.")}finally{te(!1)}},[se]);k.useEffect(()=>{const Z=[];p!=="all"&&Z.push({type:"testament",value:p==="old"?"Old Testament":"New Testament"}),v!=="all"&&Z.push({type:"book",value:v}),S!=="all"&&Z.push({type:"group",value:S}),c&&Z.push({type:"search",value:`"${c}"`}),x!=="all"&&Z.push({type:"letter",value:`Starting with "${x}"`}),j(Z)},[p,v,S,c,x]);const ne=Z=>{switch(Z){case"testament":y("all");break;case"book":b("all");break;case"group":A("all");break;case"search":h("");break;case"letter":P("all");break}_(1)},K=k.useMemo(()=>{let Z=[...t];return c.trim()&&(Z=Z.filter(le=>le.name.toLowerCase().includes(c.toLowerCase())||(le.description||"").toLowerCase().includes(c.toLowerCase()))),p!=="all"&&(Z=Z.filter(le=>{const me=`${le.description||""} ${le.bible_book||""} ${le.scriptural_context||""}`.toLowerCase();return p==="old"?/(genesis|exodus|leviticus|numbers|deuteronomy|joshua|judges|ruth|samuel|kings|chronicles|ezra|nehemiah|esther|job|psalms|proverbs|ecclesiastes|song of solomon|isaiah|jeremiah|lamentations|ezekiel|daniel|hosea|joel|amos|obadiah|jonah|micah|nahum|habakkuk|zephaniah|haggai|zechariah|malachi|old testament)/i.test(me):/(matthew|mark|luke|john|acts|romans|corinthians|galatians|ephesians|philippians|colossians|thessalonians|timothy|titus|philemon|hebrews|james|peter|john|jude|revelation|new testament)/i.test(me)})),v!=="all"&&(Z=Z.filter(le=>`${le.description||""} ${le.bible_book||""} ${le.scriptural_context||""}`.toLowerCase().includes(v.toLowerCase()))),S!=="all"&&(Z=Z.filter(le=>`${le.description||""}`.toLowerCase().includes(S.toLowerCase()))),x!=="all"&&(Z=Z.filter(le=>le.name.toUpperCase().startsWith(x))),Z.sort((le,me)=>le.name.localeCompare(me.name)),Z},[t,c,p,v,S,x]),fe=k.useMemo(()=>{const Z=(w-1)*Q;return K.slice(Z,Z+Q)},[K,w,Q]),N=Math.ceil(K.length/Q),J=k.useCallback(Z=>{const le=fe[Z];return d==="grid"?T.jsx("div",{className:"p-2",children:T.jsx(Az,{character:le,onSelect:V,isSelected:(ae==null?void 0:ae.id)===le.id})},le.id):T.jsxs("div",{className:`
            flex items-center gap-4 bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/15
            transition-all duration-300 hover:bg-white/15 cursor-pointer
            ${(ae==null?void 0:ae.id)===le.id?"border-yellow-400 ring-2 ring-yellow-400/30":""}
          `,onClick:()=>V(le.id),children:[T.jsx("table",{className:"border-collapse m-0 p-0",children:T.jsx("tbody",{children:T.jsx("tr",{children:T.jsx("td",{className:`
                    w-16 h-16 rounded-full overflow-hidden p-0
                    ${(ae==null?void 0:ae.id)===le.id?"border-2 border-yellow-400":"border-2 border-white/30"}
                    bg-blue-50
                  `,children:T.jsx("img",{src:le.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(le.name)}&background=random`,alt:le.name,className:"w-16 h-16 object-cover block"})})})})}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h3",{className:"text-xl font-bold text-yellow-400",style:{fontFamily:"Cinzel, serif"},children:le.name}),T.jsx("p",{className:"text-white/80 line-clamp-2",children:le.description}),T.jsxs("div",{className:"text-xs text-white/50 mt-1",children:[le.bible_book&&`${le.bible_book}  `,p==="old"?"Old Testament":p==="new"?"New Testament":""]})]}),T.jsx("button",{className:`
              px-4 py-2 rounded-lg text-sm font-medium
              ${(ae==null?void 0:ae.id)===le.id?"bg-yellow-400 text-blue-900":"bg-white/10 text-white hover:bg-white/20"}
            `,children:(ae==null?void 0:ae.id)===le.id?"Continue":"Chat"})]},le.id)},[fe,d,V,ae]),he=()=>{if(N<=1)return null;const Z=5;let le=Math.max(1,w-Math.floor(Z/2)),me=Math.min(N,le+Z-1);me-le+1<Z&&(le=Math.max(1,me-Z+1));const Ie=[];Ie.push(T.jsx("button",{onClick:()=>_(ee=>Math.max(1,ee-1)),disabled:w===1,className:"w-10 h-10 rounded-lg flex items-center justify-center bg-white/10 text-white disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Previous page",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})},"prev")),le>1&&(Ie.push(T.jsx("button",{onClick:()=>_(1),className:"w-10 h-10 rounded-lg flex items-center justify-center bg-white/10 text-white hover:bg-white/20",children:"1"},"1")),le>2&&Ie.push(T.jsx("span",{className:"w-10 h-10 flex items-center justify-center text-white",children:"..."},"ellipsis1")));for(let ee=le;ee<=me;ee++)Ie.push(T.jsx("button",{onClick:()=>_(ee),className:`w-10 h-10 rounded-lg flex items-center justify-center ${w===ee?"bg-yellow-400 text-blue-900 font-bold":"bg-white/10 text-white hover:bg-white/20"}`,children:ee},ee));return me<N-1&&Ie.push(T.jsx("span",{className:"w-10 h-10 flex items-center justify-center text-white",children:"..."},"ellipsis2")),me<N&&Ie.push(T.jsx("button",{onClick:()=>_(N),className:"w-10 h-10 rounded-lg flex items-center justify-center bg-white/10 text-white hover:bg-white/20",children:N},N)),Ie.push(T.jsx("button",{onClick:()=>_(ee=>Math.min(N,ee+1)),disabled:w===N,className:"w-10 h-10 rounded-lg flex items-center justify-center bg-white/10 text-white disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Next page",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})},"next")),T.jsx("div",{className:"flex items-center justify-center gap-2 mt-8",children:Ie})},ue=()=>{const Z="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return T.jsxs("div",{className:"fixed right-4 top-1/2 transform -translate-y-1/2 bg-white/5 backdrop-blur-sm rounded-full py-4 px-2 hidden lg:flex flex-col gap-1 border border-white/10",children:[T.jsx("button",{onClick:()=>{P("all"),_(1)},className:`w-8 h-8 rounded-full flex items-center justify-center text-sm ${x==="all"?"bg-yellow-400 text-blue-900 font-bold":"text-white hover:bg-white/10"}`,children:"All"}),Z.map(le=>T.jsx("button",{onClick:()=>{P(le),_(1)},className:`w-8 h-8 rounded-full flex items-center justify-center text-sm ${x===le?"bg-yellow-400 text-blue-900 font-bold":"text-white hover:bg-white/10"}`,children:le},le))]})};return n?T.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-b from-[#0a0a2a] via-[#1a1a4a] to-[#2a2a6a]",children:T.jsxs("div",{className:"text-center",children:[T.jsxs("div",{className:"relative mb-6",children:[T.jsx("div",{className:"absolute inset-0 rounded-full bg-yellow-300 blur-xl opacity-30 animate-pulse"}),T.jsx("div",{className:"relative h-16 w-16 mx-auto animate-spin rounded-full border-4 border-yellow-200 border-t-yellow-400"}),T.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:T.jsx("span",{className:"text-white text-xl",children:""})})]}),T.jsx("p",{className:"text-white text-lg font-light",style:{fontFamily:"Cinzel, serif"},children:"Loading Bible characters..."})]})}):a?T.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-b from-[#0a0a2a] via-[#1a1a4a] to-[#2a2a6a]",children:T.jsxs("div",{className:"max-w-md rounded-lg bg-white bg-opacity-90 p-8 text-center shadow-2xl",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-red-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),T.jsx("h3",{className:"mb-2 text-xl font-semibold text-red-800",style:{fontFamily:"Cinzel, serif"},children:"Error"}),T.jsx("p",{className:"text-red-700 mb-4",children:a}),T.jsx("button",{onClick:()=>window.location.reload(),className:"rounded-md bg-red-600 px-6 py-2 text-white hover:bg-red-700 transition-colors shadow-md",children:"Try Again"})]})}):T.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#0a0a2a] via-[#1a1a4a] to-[#2a2a6a] py-10 px-4 md:px-6",children:[ue(),T.jsxs("div",{className:"max-w-7xl mx-auto bg-white/8 backdrop-blur-sm rounded-2xl p-6 border border-white/15 shadow-xl",children:[T.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-center text-yellow-400 mb-8 tracking-tight drop-shadow-lg",style:{fontFamily:"Cinzel, serif"},children:"Choose Your Biblical Guide"}),$&&T.jsxs("div",{className:"mb-12 flex flex-col items-center",children:[T.jsxs("div",{className:"relative mb-4",children:[T.jsx("div",{className:"absolute -inset-4 rounded-full bg-yellow-300 blur-xl opacity-30"}),T.jsx("table",{className:"border-collapse m-0 p-0 relative z-0",children:T.jsx("tbody",{children:T.jsx("tr",{children:T.jsx("td",{className:"w-32 h-32 rounded-full overflow-hidden p-0 border-4 border-yellow-300 shadow-xl bg-blue-50",children:T.jsx("img",{src:$.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent($.name)}&background=random`,alt:$.name,className:"w-32 h-32 object-cover block"})})})})})]}),T.jsx("h2",{className:"text-2xl font-bold text-white mb-2",style:{fontFamily:"Cinzel, serif"},children:$.name}),T.jsx("p",{className:"text-blue-100 max-w-md text-center mb-4",children:$.description}),T.jsxs("button",{onClick:()=>V($.id),className:"bg-yellow-500 hover:bg-yellow-600 text-blue-900 font-bold py-3 px-8 rounded-full shadow-lg transform transition-all hover:scale-105 active:scale-95",children:["Chat with ",$.name," "]}),T.jsx("p",{className:"mt-6 text-blue-100 text-sm",children:"Or select another character below"})]}),T.jsx("div",{className:"mb-8 flex justify-center",children:T.jsx("button",{onClick:()=>window.location.href="/pricing.html",className:"animate-pulse rounded-full bg-yellow-400 px-6 py-3 text-lg font-extrabold tracking-wide text-blue-900 shadow-lg ring-2 ring-yellow-300 hover:bg-yellow-300 focus:outline-none focus:ring-4 focus:ring-yellow-200",children:" Unlock all characters  Upgrade to Premium"})}),T.jsx("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-4 mb-6",children:T.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[T.jsx("div",{className:"w-full md:flex-1",children:T.jsx("input",{type:"text",placeholder:"Search characters...",value:c,onChange:Z=>{h(Z.target.value),_(1)},className:"w-full bg-white/10 border border-white/30 rounded-full py-2 px-4 text-white placeholder-blue-100 focus:outline-none focus:ring-2 focus:ring-yellow-400/50"})}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:()=>{y("all"),_(1)},className:`px-4 py-2 rounded-full ${p==="all"?"bg-yellow-400 text-blue-900 font-bold":"bg-white/10 text-white hover:bg-white/20"}`,children:"All"}),T.jsx("button",{onClick:()=>{y("old"),_(1)},className:`px-4 py-2 rounded-full ${p==="old"?"bg-yellow-400 text-blue-900 font-bold":"bg-white/10 text-white hover:bg-white/20"}`,children:"Old"}),T.jsx("button",{onClick:()=>{y("new"),_(1)},className:`px-4 py-2 rounded-full ${p==="new"?"bg-yellow-400 text-blue-900 font-bold":"bg-white/10 text-white hover:bg-white/20"}`,children:"New"})]}),T.jsx("div",{className:"w-full md:w-auto",children:T.jsxs("select",{value:v,onChange:Z=>{b(Z.target.value),_(1)},className:"w-full md:w-auto bg-white/10 border border-white/30 rounded-full py-2 px-4 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400/50",children:[T.jsx("option",{value:"all",children:"All Books"}),T.jsx("optgroup",{label:"Old Testament",children:JT.oldTestament.map(Z=>T.jsx("option",{value:Z,children:Z},Z))}),T.jsx("optgroup",{label:"New Testament",children:JT.newTestament.map(Z=>T.jsx("option",{value:Z,children:Z},Z))})]})}),T.jsx("div",{className:"w-full md:w-auto",children:T.jsxs("select",{value:S,onChange:Z=>{A(Z.target.value),_(1)},className:"w-full md:w-auto bg-white/10 border border-white/30 rounded-full py-2 px-4 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400/50",children:[T.jsx("option",{value:"all",children:"All Groups"}),T.jsx("option",{value:"Prophets",children:"Prophets"}),T.jsx("option",{value:"Apostles",children:"Apostles"}),T.jsx("option",{value:"Kings",children:"Kings"}),T.jsx("option",{value:"Women",children:"Women of the Bible"}),O.map(Z=>T.jsx("option",{value:Z.name,children:Z.name},Z.id))]})}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:()=>f("grid"),className:`w-10 h-10 rounded-lg flex items-center justify-center ${d==="grid"?"bg-yellow-400 text-blue-900":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"Grid view",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),T.jsx("button",{onClick:()=>f("list"),className:`w-10 h-10 rounded-lg flex items-center justify-center ${d==="list"?"bg-yellow-400 text-blue-900":"bg-white/10 text-white hover:bg-white/20"}`,"aria-label":"List view",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})})]})]})}),M.length>0&&T.jsxs("div",{className:"flex flex-wrap gap-2 mb-6 bg-white/5 p-3 rounded-lg",children:[T.jsx("span",{className:"text-white/70 text-sm",children:"Active Filters:"}),M.map((Z,le)=>T.jsxs("div",{className:"flex items-center gap-1 bg-yellow-400/20 text-yellow-300 px-3 py-1 rounded-full border border-yellow-400/50",children:[T.jsx("span",{children:Z.value}),T.jsx("button",{onClick:()=>ne(Z.type),className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20",children:""})]},le)),T.jsx("button",{onClick:()=>{y("all"),b("all"),A("all"),h(""),P("all"),_(1)},className:"text-sm text-blue-300 hover:text-blue-200 ml-auto",children:"Clear All"})]}),T.jsxs("div",{className:"text-center text-white/80 mb-6",children:["Showing ",fe.length," of ",K.length," characters"]}),K.length===0&&T.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-8 text-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-white/50 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),T.jsx("p",{className:"text-xl text-white mb-4",children:"No characters found matching your criteria."}),T.jsx("button",{onClick:()=>{y("all"),b("all"),A("all"),h(""),P("all"),_(1)},className:"text-yellow-400 hover:text-yellow-300 font-medium",children:"Clear all filters"})]}),K.length>0&&T.jsx("div",{className:"relative bg-white/5 backdrop-blur-sm rounded-xl p-4 shadow-lg",children:d==="grid"?T.jsx("div",{style:{height:"600px"},children:T.jsx(B4,{totalCount:fe.length,overscan:200,listClassName:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",itemClassName:"character-card-container",itemContent:Z=>J(Z)})}):T.jsx("div",{className:"space-y-4",children:fe.map((Z,le)=>J(le))})}),he()]}),T.jsx("span",{className:"fixed bottom-3 left-3 z-50 rounded-full bg-amber-400/90 px-3 py-1 text-xs font-semibold text-blue-900 shadow-lg select-none",title:"Scalable selector active",children:"ScalableUI"})]})},Cz=({message:t,characterName:e,characterAvatar:n,isTyping:s=!1})=>{const a=t.role==="user",l=f=>`https://ui-avatars.com/api/?name=${encodeURIComponent(f)}&background=random`,h=((f,p)=>{if(!p)return l(f);try{const{hostname:y}=new URL(p);return y==="example.com"||y.endsWith(".example.com")||y==="localhost"?l(f):p}catch{return l(f)}})(e,n),d=new Date(t.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return T.jsx("div",{className:`flex w-full mb-4 ${a?"justify-end":"justify-start"}`,children:T.jsxs("div",{className:`flex max-w-[80%] ${a?"flex-row-reverse":"flex-row"}`,children:[!a&&T.jsx("div",{className:"flex-shrink-0 mr-2",children:T.jsx("img",{src:h,alt:e,className:"h-10 w-10 rounded-full object-cover border border-gray-200",onError:f=>{f.target.src=l(e)}})}),T.jsxs("div",{className:`flex flex-col ${a?"items-end mr-2":"items-start"}`,children:[!a&&T.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1 ml-1",children:e}),T.jsx("div",{className:`
              rounded-2xl px-4 py-2 break-words
              ${a?"bg-primary-600 text-white rounded-tr-none":"bg-gray-100 text-gray-800 rounded-tl-none"}
            `,children:T.jsxs("div",{className:"whitespace-pre-wrap",children:[t.content,s&&t.content===""&&T.jsxs("span",{className:"inline-flex items-center",children:[T.jsx("span",{className:"animate-pulse",children:"."}),T.jsx("span",{className:"animate-pulse animation-delay-200",children:"."}),T.jsx("span",{className:"animate-pulse animation-delay-400",children:"."})]})]})}),T.jsx("div",{className:`text-xs text-gray-500 mt-1 ${a?"mr-1":"ml-1"}`,children:d})]})]})})},Rz=({disabled:t=!1,placeholder:e="Ask me anything..."})=>{const[n,s]=k.useState(""),a=k.useRef(null),{sendMessage:l,isTyping:c,error:h}=oc();k.useEffect(()=>{a.current&&a.current.focus()},[]);const d=y=>{const v=y.target;s(v.value),v.style.height="auto",v.style.height=`${Math.min(v.scrollHeight,150)}px`},f=async y=>{if(y.preventDefault(),!(!n.trim()||t||c))try{await l(n.trim()),s(""),a.current&&(a.current.style.height="auto",a.current.focus())}catch(v){console.error("Error sending message:",v)}},p=y=>{(y.ctrlKey||y.metaKey)&&y.key==="Enter"&&f(y)};return T.jsxs("form",{onSubmit:f,className:"flex w-full items-end border-t border-gray-200 bg-white p-3 shadow-sm",children:[T.jsxs("div",{className:"relative flex-grow",children:[T.jsx("textarea",{ref:a,value:n,onChange:d,onKeyDown:p,placeholder:e,disabled:t||c,className:`
            w-full resize-none rounded-lg border border-gray-300 py-3 pl-4 pr-12
            focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-200
            disabled:bg-gray-100 disabled:text-gray-500
            ${h?"border-red-300 focus:border-red-500 focus:ring-red-200":""}
          `,rows:1,style:{minHeight:"50px",maxHeight:"150px"}}),T.jsx("button",{type:"submit",disabled:!n.trim()||t||c,className:`
            absolute bottom-2 right-2 rounded-full p-2
            transition-colors duration-200
            ${n.trim()&&!t&&!c?"bg-primary-600 text-white hover:bg-primary-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}
          `,"aria-label":"Send message",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-5 w-5",children:T.jsx("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"})})})]}),T.jsxs("div",{className:"ml-2 hidden text-xs text-gray-400 md:block",children:["Press ",T.jsx("kbd",{className:"rounded border border-gray-300 bg-gray-100 px-1 font-sans",children:"Ctrl"})," + ",T.jsx("kbd",{className:"rounded border border-gray-300 bg-gray-100 px-1 font-sans",children:"Enter"})," to send"]})]})},Oz=({className:t="",compact:e=!1})=>{const{character:n,chatId:s,messages:a,saveChatTitle:l,toggleFavorite:c,saveChat:h,deleteCurrentChat:d,isChatSaved:f,isFavorite:p}=oc(),{user:y}=n0(),[v,b]=k.useState(!1);k.useEffect(()=>{const K=localStorage.getItem("bypass_auth")==="true";b(K)},[]);const[S,A]=k.useState(!1),[w,_]=k.useState(""),[x,P]=k.useState(!1),[O,R]=k.useState(null),[M,j]=k.useState(!1),[$,z]=k.useState(!1),[B,te]=k.useState(p);if(k.useEffect(()=>{te(p)},[p]),!n||a.length===0)return null;const Q=()=>{if(!n||a.length===0)return"";const K=`Conversation with ${n.name}
`,fe=`Date: ${new Date().toLocaleDateString()}

`,N=a.map(J=>{const he=new Date(J.created_at).toLocaleTimeString(),ue=J.role==="user"?"You":n.name;return`[${he}] ${ue}:
${J.content}
`}).join(`
`);return`${K}${fe}${N}`},se=async()=>{try{P(!0),R(null);const K=Q();await navigator.clipboard.writeText(K),z(!0),setTimeout(()=>z(!1),3e3)}catch(K){console.error("Error copying to clipboard:",K),R("Failed to copy conversation. Please try again.")}finally{P(!1)}},ae=async()=>{if(n)try{P(!0),R(null);const K=`Chat with ${n.name} - ${new Date().toLocaleDateString()}`;await h(K),j(!0),setTimeout(()=>j(!1),3e3)}catch(K){console.error("Error saving chat:",K),R("Failed to save chat. Please try again.")}finally{P(!1)}},pe=async()=>{if(!(!s||!w.trim()))try{P(!0),R(null),await l(w.trim()),A(!1),_("")}catch(K){console.error("Error renaming chat:",K),R("Failed to rename chat. Please try again.")}finally{P(!1)}},V=async()=>{try{P(!0),R(null);const K=!B;if(te(K),v&&!s){const fe=`temp_favorite_${n.id}`;localStorage.setItem(fe,K?"true":"false")}else s&&await c(K)}catch(K){console.error("Error toggling favorite status:",K),R("Failed to update favorite status. Please try again."),te(!B)}finally{P(!1)}},ne=async()=>{if(!(!s||!window.confirm("Are you sure you want to delete this conversation? This action cannot be undone.")))try{P(!0),R(null),await d()}catch(fe){console.error("Error deleting chat:",fe),R("Failed to delete chat. Please try again.")}finally{P(!1)}};return e?T.jsxs("div",{className:`flex items-center space-x-2 ${t}`,children:[T.jsx("button",{onClick:se,disabled:x,className:"rounded-full p-2 bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors","aria-label":"Copy conversation to clipboard",title:"Copy conversation to clipboard",children:T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[T.jsx("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),T.jsx("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]})}),T.jsx("button",{onClick:V,disabled:x,className:`rounded-full p-2 ${B?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600"} hover:bg-gray-200 transition-colors`,"aria-label":B?"Remove from favorites":"Add to favorites",title:B?"Remove from favorites":"Add to favorites",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})}),!f&&T.jsx("button",{onClick:ae,disabled:x,className:"rounded-full p-2 bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors","aria-label":"Save conversation",title:"Save conversation",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})})}),f&&T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:()=>A(!0),disabled:x,className:"rounded-full p-2 bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors","aria-label":"Rename conversation",title:"Rename conversation",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),T.jsx("button",{onClick:ne,disabled:x,className:"rounded-full p-2 bg-red-100 text-red-600 hover:bg-red-200 transition-colors","aria-label":"Delete conversation",title:"Delete conversation",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]}):T.jsxs("div",{className:`border-t border-gray-200 bg-white p-4 ${t}`,children:[O&&T.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-3 text-sm text-red-800",children:T.jsxs("div",{className:"flex",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),T.jsx("span",{children:O})]})}),M&&T.jsx("div",{className:"mb-4 rounded-md bg-green-50 p-3 text-sm text-green-800",children:T.jsxs("div",{className:"flex",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),T.jsx("span",{children:"Conversation saved successfully!"})]})}),$&&T.jsx("div",{className:"mb-4 rounded-md bg-green-50 p-3 text-sm text-green-800",children:T.jsxs("div",{className:"flex",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),T.jsx("span",{children:"Conversation copied to clipboard!"})]})}),S&&T.jsx("div",{className:"mb-4",children:T.jsxs("div",{className:"flex items-center space-x-2",children:[T.jsx("input",{type:"text",value:w,onChange:K=>_(K.target.value),placeholder:"Enter conversation title",className:"flex-grow rounded-md border border-gray-300 px-3 py-2 focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0}),T.jsx("button",{onClick:pe,disabled:x||!w.trim(),className:"rounded-md bg-primary-600 px-4 py-2 text-white hover:bg-primary-700 transition-colors disabled:bg-gray-300",children:"Save"}),T.jsx("button",{onClick:()=>A(!1),className:"rounded-md bg-gray-200 px-4 py-2 text-gray-800 hover:bg-gray-300 transition-colors",children:"Cancel"})]})}),T.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[!y&&!v&&!f&&T.jsx("div",{className:"w-full mb-2 rounded-md bg-yellow-50 p-3 text-sm text-yellow-800",children:T.jsxs("div",{className:"flex",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-500 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),T.jsx("span",{children:"Sign in to save your conversations and access them later."})]})}),T.jsxs("button",{onClick:se,disabled:x,className:"flex items-center rounded-md bg-blue-100 px-4 py-2 text-blue-800 hover:bg-blue-200 transition-colors disabled:bg-gray-100","aria-label":"Copy conversation to clipboard",children:[T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor",children:[T.jsx("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),T.jsx("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]}),"Copy to Clipboard"]}),T.jsxs("button",{onClick:V,disabled:x,className:`flex items-center rounded-md px-4 py-2 transition-colors disabled:bg-gray-100 ${B?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,"aria-label":B?"Remove from favorites":"Add to favorites",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 mr-2 ${B?"text-yellow-600":"text-gray-600"}`,viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),B?"Remove from Favorites":"Add to Favorites"]}),f?T.jsxs(T.Fragment,{children:[!S&&T.jsxs("button",{onClick:()=>A(!0),disabled:x,className:"flex items-center rounded-md bg-gray-200 px-4 py-2 text-gray-800 hover:bg-gray-300 transition-colors disabled:bg-gray-100","aria-label":"Rename conversation",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),"Rename"]}),T.jsxs("button",{onClick:ne,disabled:x,className:"flex items-center rounded-md bg-red-100 px-4 py-2 text-red-800 hover:bg-red-200 transition-colors disabled:bg-gray-100","aria-label":"Delete conversation",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-red-600",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Delete Conversation"]})]}):T.jsxs("button",{onClick:ae,disabled:x,className:"flex items-center rounded-md bg-primary-600 px-4 py-2 text-white hover:bg-primary-700 transition-colors disabled:bg-gray-300","aria-label":"Save conversation",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})}),"Save Conversation"]})]})]})},Mz=({reference:t,className:e="",onClick:n})=>{const[s,a]=k.useState(null),[l,c]=k.useState(!1),[h,d]=k.useState(null),[f,p]=k.useState(!1),y=k.useRef(null),v=k.useRef(null),b=/^[1-3]?\s*[A-Za-z]+\s*\d+:\d+(-\d+)?$/.test(t.trim());k.useEffect(()=>{if(!t||!b)return;f&&!s&&!l&&(async()=>{c(!0),d(null);try{const w=t.trim().replace(/\s+/g,"+");await new Promise(x=>setTimeout(x,500));let _="";t.includes("John 3:16")?_='"For God so loved the world, that he gave his only Son, that whoever believes in him should not perish but have eternal life."':t.includes("Genesis 1:1")?_='"In the beginning, God created the heavens and the earth."':t.includes("Psalm 23:1")?_='"The LORD is my shepherd; I shall not want."':_=`Verse text for "${t}" would appear here.`,a(_)}catch(w){console.error("Error fetching verse:",w),d("Failed to load verse text")}finally{c(!1)}})()},[t,f,s,l,b]),k.useEffect(()=>{if(f&&y.current&&v.current){const A=v.current.getBoundingClientRect();y.current.style.left=`${A.left}px`,y.current.style.top=`${A.bottom+window.scrollY+5}px`}},[f]);const S=A=>{n&&(A.preventDefault(),n(t))};return!t||!b?T.jsx("span",{className:e,children:t}):T.jsxs(T.Fragment,{children:[T.jsx("a",{ref:v,href:`https://www.biblegateway.com/passage/?search=${encodeURIComponent(t)}&version=ESV`,className:`scripture-reference ${e}`,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),onClick:S,target:"_blank",rel:"noopener noreferrer",style:{color:"#4a90e2",textDecoration:"underline",position:"relative",cursor:"pointer"},children:t}),f&&T.jsx("div",{ref:y,className:"scripture-tooltip",style:{position:"absolute",zIndex:1e3,backgroundColor:"#fff",border:"1px solid #ddd",borderRadius:"4px",padding:"8px 12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",maxWidth:"300px",fontSize:"0.9rem",color:"#333"},children:l?T.jsx("div",{children:"Loading verse..."}):h?T.jsx("div",{style:{color:"red"},children:h}):s?T.jsxs("div",{children:[T.jsx("strong",{children:t}),T.jsx("p",{children:s}),T.jsx("div",{style:{fontSize:"0.8rem",marginTop:"4px",color:"#666"},children:"ESV Text Edition: 2016"})]}):T.jsx("div",{children:"Click to view verse"})})]})},zd=t=>`https://ui-avatars.com/api/?name=${encodeURIComponent(t)}&background=random`,jz=(t,e)=>{if(!e)return zd(t);try{const{hostname:n}=new URL(e);return n==="example.com"||n.endsWith(".example.com")||n==="localhost"?zd(t):e}catch{return zd(t)}},Dz={hidden:{x:"100%",opacity:0},visible:{x:"0%",opacity:1,transition:{duration:.3,ease:"easeOut"}},exit:{x:"100%",opacity:0,transition:{duration:.2,ease:"easeIn"}}},kz={hidden:{opacity:0},visible:{opacity:.5,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.2}}},Nz=({character:t,isOpen:e,onClose:n})=>t?T.jsx(qI,{children:e&&T.jsxs(T.Fragment,{children:[T.jsx(Nv.div,{className:"fixed inset-0 bg-black z-40",variants:kz,initial:"hidden",animate:"visible",exit:"exit",onClick:n}),T.jsxs(Nv.div,{className:"fixed right-0 top-0 h-full w-full max-w-md bg-gradient-to-b from-blue-900 via-blue-700 to-blue-500 shadow-2xl z-50 overflow-y-auto p-6",variants:Dz,initial:"hidden",animate:"visible",exit:"exit",children:[T.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-white hover:text-yellow-300 transition-colors","aria-label":"Close insights panel",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),T.jsxs("div",{className:"text-center mb-8 pt-4",children:[T.jsx("img",{src:jz(t.name,t.avatar_url),alt:t.name,className:"h-24 w-24 rounded-full object-cover mx-auto mb-4 border-4 border-yellow-300 shadow-lg",onError:s=>{s.target.src=zd(t.name)}}),T.jsx("h2",{className:"text-3xl font-extrabold text-white mb-2",style:{fontFamily:"Cinzel, serif"},children:t.name}),T.jsx("p",{className:"text-blue-100 text-lg",children:t.description})]}),T.jsxs("div",{className:"space-y-8",children:[T.jsxs("section",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 shadow-md border border-white/20",children:[T.jsx("h3",{className:"text-xl font-bold text-yellow-300 mb-3",children:"Historical Context"}),T.jsxs("p",{className:"text-blue-100 text-sm mb-2",children:[T.jsx("span",{className:"font-semibold",children:"Time Period:"})," ",t.timeline_period||"Unknown"]}),T.jsxs("p",{className:"text-blue-100 text-sm mb-2",children:[T.jsx("span",{className:"font-semibold",children:"Location:"})," ",t.geographic_location||"Unknown"]}),T.jsx("p",{className:"text-blue-100 text-sm",children:t.historical_context||"No historical context available."})]}),T.jsxs("section",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 shadow-md border border-white/20",children:[T.jsx("h3",{className:"text-xl font-bold text-yellow-300 mb-3",children:"Key Scripture References"}),t.key_scripture_references?T.jsx("div",{className:"text-blue-100 text-sm space-y-1",children:t.key_scripture_references.split(";").map((s,a)=>T.jsx("div",{children:T.jsx(Mz,{reference:s.trim(),className:"text-blue-200 hover:text-yellow-300"})},a))}):T.jsx("p",{className:"text-blue-100 text-sm",children:"No key scripture references available."})]}),T.jsxs("section",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 shadow-md border border-white/20",children:[T.jsx("h3",{className:"text-xl font-bold text-yellow-300 mb-3",children:"Relationships"}),t.relationships&&Object.keys(t.relationships).length>0?T.jsx("ul",{className:"text-blue-100 text-sm space-y-1",children:Object.entries(t.relationships).map(([s,a])=>T.jsxs("li",{children:[T.jsxs("span",{className:"font-semibold capitalize",children:[s,":"]})," ",a.join(", ")]},s))}):T.jsx("p",{className:"text-blue-100 text-sm",children:"No relationship data available."})]}),T.jsxs("section",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 shadow-md border border-white/20",children:[T.jsx("h3",{className:"text-xl font-bold text-yellow-300 mb-3",children:"Theological Significance"}),T.jsx("p",{className:"text-blue-100 text-sm",children:t.theological_significance||"No theological significance provided."})]}),T.jsxs("section",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 shadow-md border border-white/20",children:[T.jsx("h3",{className:"text-xl font-bold text-yellow-300 mb-3",children:"Study Questions"}),t.study_questions?T.jsx("ul",{className:"text-blue-100 text-sm list-disc list-inside space-y-1",children:t.study_questions.split(`
`).map((s,a)=>T.jsx("li",{children:s.trim()},a))}):T.jsx("p",{className:"text-blue-100 text-sm",children:"No study questions available."})]})]})]})]})}):null,qd=t=>`https://ui-avatars.com/api/?name=${encodeURIComponent(t)}&background=random`,ZT=(t,e)=>{if(!e)return qd(t);try{const{hostname:n}=new URL(e);return n==="example.com"||n.endsWith(".example.com")||n==="localhost"?qd(t):e}catch{return qd(t)}},Lz=()=>{const{character:t,messages:e,isLoading:n,error:s,isTyping:a,retryLastMessage:l,resetChat:c}=oc(),[h,d]=k.useState(!1),f=k.useRef(null),p=e.length>0;return k.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:"smooth"})},[e.length,a]),k.useEffect(()=>{p&&console.info("[ChatInterface] Rendering a resumed conversation")},[p]),t?T.jsxs("div",{className:`flex h-full w-full flex-col ${p?"bg-blue-50/20":"bg-white"}`,children:[T.jsxs("header",{className:"flex items-center border-b border-gray-200 bg-white p-4 shadow-sm",children:[T.jsxs("button",{onClick:c,className:"mr-3 flex items-center rounded-md bg-gray-100 px-3 py-1 text-sm text-gray-700 hover:bg-gray-200 transition-colors","aria-label":"Back to characters",title:"Back to characters",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]}),T.jsxs("div",{className:"flex items-center",children:[T.jsx("img",{src:ZT(t.name,t.avatar_url),alt:t.name,className:"h-10 w-10 rounded-full object-cover border border-gray-200 mr-3",onError:y=>{y.target.src=qd(t.name)}}),T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center",children:[T.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t.name}),p&&T.jsx("span",{className:"ml-2 rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-600",children:"Resumed"})]}),T.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:t.description})]})]}),T.jsxs("button",{onClick:()=>d(!h),className:"ml-auto mr-3 flex items-center rounded-md bg-gray-100 px-3 py-1 text-sm text-gray-700 hover:bg-gray-200 transition-colors","aria-label":"Toggle character insights",title:"Toggle character insights",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Insights"]}),T.jsxs("button",{onClick:c,className:"flex items-center rounded-md bg-gray-100 px-3 py-1 text-sm text-gray-700 hover:bg-gray-200 transition-colors","aria-label":"End conversation",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"End Chat"]})]}),T.jsxs("div",{className:"flex-grow overflow-y-auto p-4",children:[e.length===0?T.jsx("div",{className:"flex h-full w-full items-center justify-center",children:T.jsxs("div",{className:"text-center max-w-md",children:[T.jsxs("p",{className:"text-gray-500 mb-4",children:["Start your conversation with ",t.name,". Ask questions about their life, experiences, or seek their wisdom."]}),T.jsx("div",{className:"text-sm text-gray-400 italic",children:'"Ask me anything..."'})]})}):T.jsxs(T.Fragment,{children:[e.filter(y=>y.content&&y.content.trim()!=="").map(y=>T.jsx(Cz,{message:y,characterName:t.name,characterAvatar:t.avatar_url,isTyping:a&&y===e[e.length-1]&&y.role==="assistant"&&y.content===""},y.id)),a&&e.length>0&&e[e.length-1].role==="user"&&T.jsxs("div",{className:"flex items-center mb-4",children:[T.jsx("div",{className:"flex-shrink-0 mr-2",children:T.jsx("img",{src:ZT(t.name,t.avatar_url),alt:t.name,className:"h-10 w-10 rounded-full object-cover border border-gray-200"})}),T.jsxs("div",{className:"text-sm text-gray-500",children:[t.name," is responding..."]})]}),s&&T.jsx("div",{className:"mx-auto my-4 max-w-md rounded-lg bg-red-50 p-4",children:T.jsxs("div",{className:"flex",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-red-800",children:"Sorry, something went wrong. Please try again."}),T.jsx("button",{onClick:l,className:"mt-2 rounded-md bg-red-600 px-3 py-1 text-xs font-medium text-white hover:bg-red-700 transition-colors",children:"Retry"})]})]})})]}),T.jsx("div",{ref:f})]}),T.jsx(Nz,{character:t,isOpen:h,onClose:()=>d(!1)}),T.jsx(Oz,{}),T.jsx(Rz,{disabled:n,placeholder:`Ask ${t.name} anything...`})]}):T.jsx("div",{className:"flex h-full w-full flex-col items-center justify-center bg-gray-50 p-4",children:T.jsxs("div",{className:"text-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),T.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Start a Conversation"}),T.jsx("p",{className:"text-gray-500 max-w-sm",children:"Select a Bible character from the list to begin your conversation."})]})})},eE=()=>{const{character:t,messages:e,chatId:n}=oc(),[s,a]=Pe.useState(!1);return Pe.useEffect(()=>{t&&e.length>0?a(!0):a(!1)},[t,e]),T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-blue-900 via-blue-700 to-blue-500",children:[T.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-blue-200 via-transparent to-transparent opacity-30"}),T.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-24 bg-white rounded-full blur-3xl opacity-20 animate-float"}),T.jsx("div",{className:"absolute top-1/3 right-1/4 w-80 h-32 bg-white rounded-full blur-3xl opacity-15 animate-float-delayed"}),T.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-72 h-28 bg-white rounded-full blur-3xl opacity-10 animate-float-slow"})]}),t?T.jsx("div",{className:"relative flex h-screen w-full mt-32",children:T.jsx("main",{className:"flex-1 overflow-hidden",children:T.jsx(Lz,{})})}):T.jsx("div",{className:"relative w-full mt-32",children:T.jsx(Pz,{})}),s&&T.jsxs("div",{className:"fixed bottom-2 left-2 z-50 rounded-md bg-blue-100 px-3 py-1 text-xs text-blue-800 shadow",children:["Resumed conversation ",n?`(ID: ${n})`:"(local)"]})]})};var $O="basil",$z=function(e){return e===3?"v3":e},IO="https://js.stripe.com",Iz="".concat(IO,"/").concat($O,"/stripe.js"),Uz=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Bz=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var zz=function(e){return Uz.test(e)||Bz.test(e)},qz=function(){for(var e=document.querySelectorAll('script[src^="'.concat(IO,'"]')),n=0;n<e.length;n++){var s=e[n];if(zz(s.src))return s}return null},tE=function(e){var n="",s=document.createElement("script");s.src="".concat(Iz).concat(n);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(s),s},Hz=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.4.0",startTime:n})},Vl=null,Kh=null,Yh=null,Vz=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},Gz=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},Fz=function(e){return Vl!==null?Vl:(Vl=new Promise(function(n,s){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var a=qz();if(!(a&&e)){if(!a)a=tE(e);else if(a&&Yh!==null&&Kh!==null){var l;a.removeEventListener("load",Yh),a.removeEventListener("error",Kh),(l=a.parentNode)===null||l===void 0||l.removeChild(a),a=tE(e)}}Yh=Gz(n,s),Kh=Vz(s),a.addEventListener("load",Yh),a.addEventListener("error",Kh)}catch(c){s(c);return}}),Vl.catch(function(n){return Vl=null,Promise.reject(n)}))},Kz=function(e,n,s){if(e===null)return null;var a=n[0],l=a.match(/^pk_test/),c=$z(e.version),h=$O;l&&c!==h&&console.warn("Stripe.js@".concat(c," was loaded on the page, but @stripe/stripe-js@").concat("7.4.0"," expected Stripe.js@").concat(h,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var d=e.apply(void 0,n);return Hz(d,s),d},Gl,UO=!1,BO=function(){return Gl||(Gl=Fz(null).catch(function(e){return Gl=null,Promise.reject(e)}),Gl)};Promise.resolve().then(function(){return BO()}).catch(function(t){UO||console.warn(t)});var Yz=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];UO=!0;var a=Date.now();return BO().then(function(l){return Kz(l,n,a)})},Og,nE;function Uo(){return nE||(nE=1,Og=TypeError),Og}const Xz={},Wz=Object.freeze(Object.defineProperty({__proto__:null,default:Xz},Symbol.toStringTag,{value:"Module"})),Qz=jA(Wz);var Mg,rE;function Mf(){if(rE)return Mg;rE=1;var t=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,n=t&&e&&typeof e.get=="function"?e.get:null,s=t&&Map.prototype.forEach,a=typeof Set=="function"&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=a&&l&&typeof l.get=="function"?l.get:null,h=a&&Set.prototype.forEach,d=typeof WeakMap=="function"&&WeakMap.prototype,f=d?WeakMap.prototype.has:null,p=typeof WeakSet=="function"&&WeakSet.prototype,y=p?WeakSet.prototype.has:null,v=typeof WeakRef=="function"&&WeakRef.prototype,b=v?WeakRef.prototype.deref:null,S=Boolean.prototype.valueOf,A=Object.prototype.toString,w=Function.prototype.toString,_=String.prototype.match,x=String.prototype.slice,P=String.prototype.replace,O=String.prototype.toUpperCase,R=String.prototype.toLowerCase,M=RegExp.prototype.test,j=Array.prototype.concat,$=Array.prototype.join,z=Array.prototype.slice,B=Math.floor,te=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Q=Object.getOwnPropertySymbols,se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ae=typeof Symbol=="function"&&typeof Symbol.iterator=="object",pe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ae||!0)?Symbol.toStringTag:null,V=Object.prototype.propertyIsEnumerable,ne=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(G){return G.__proto__}:null);function K(G,X){if(G===1/0||G===-1/0||G!==G||G&&G>-1e3&&G<1e3||M.call(/e/,X))return X;var Qe=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof G=="number"){var nt=G<0?-B(-G):B(G);if(nt!==G){var at=String(nt),Le=x.call(X,at.length+1);return P.call(at,Qe,"$&_")+"."+P.call(P.call(Le,/([0-9]{3})/g,"$&_"),/_$/,"")}}return P.call(X,Qe,"$&_")}var fe=Qz,N=fe.custom,J=mt(N)?N:null,he={__proto__:null,double:'"',single:"'"},ue={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Mg=function G(X,Qe,nt,at){var Le=Qe||{};if(Ye(Le,"quoteStyle")&&!Ye(he,Le.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ye(Le,"maxStringLength")&&(typeof Le.maxStringLength=="number"?Le.maxStringLength<0&&Le.maxStringLength!==1/0:Le.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Rn=Ye(Le,"customInspect")?Le.customInspect:!0;if(typeof Rn!="boolean"&&Rn!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ye(Le,"indent")&&Le.indent!==null&&Le.indent!=="	"&&!(parseInt(Le.indent,10)===Le.indent&&Le.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ye(Le,"numericSeparator")&&typeof Le.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var es=Le.numericSeparator;if(typeof X>"u")return"undefined";if(X===null)return"null";if(typeof X=="boolean")return X?"true":"false";if(typeof X=="string")return Vt(X,Le);if(typeof X=="number"){if(X===0)return 1/0/X>0?"0":"-0";var mn=String(X);return es?K(X,mn):mn}if(typeof X=="bigint"){var gr=String(X)+"n";return es?K(X,gr):gr}var Ei=typeof Le.depth>"u"?5:Le.depth;if(typeof nt>"u"&&(nt=0),nt>=Ei&&Ei>0&&typeof X=="object")return Ie(X)?"[Array]":"[Object]";var Mr=da(Le,nt);if(typeof at>"u")at=[];else if(fn(at,X)>=0)return"[Circular]";function On(ns,Pi,rs){if(Pi&&(at=z.call(at),at.push(Pi)),rs){var ss={depth:Le.depth};return Ye(Le,"quoteStyle")&&(ss.quoteStyle=Le.quoteStyle),G(ns,ss,nt+1,at)}return G(ns,Le,nt+1,at)}if(typeof X=="function"&&!ve(X)){var gc=_n(X),yr=Qn(X,On);return"[Function"+(gc?": "+gc:" (anonymous)")+"]"+(yr.length>0?" { "+$.call(yr,", ")+" }":"")}if(mt(X)){var Gt=ae?P.call(String(X),/^(Symbol\(.*\))_[^)]*$/,"$1"):se.call(X);return typeof X=="object"&&!ae?Ct(Gt):Gt}if(Or(X)){for(var Ut="<"+R.call(String(X.nodeName)),jr=X.attributes||[],Ms=0;Ms<jr.length;Ms++)Ut+=" "+jr[Ms].name+"="+Z(le(jr[Ms].value),"double",Le);return Ut+=">",X.childNodes&&X.childNodes.length&&(Ut+="..."),Ut+="</"+R.call(String(X.nodeName))+">",Ut}if(Ie(X)){if(X.length===0)return"[]";var zo=Qn(X,On);return Mr&&!Bo(zo)?"["+Os(zo,Mr)+"]":"[ "+$.call(zo,", ")+" ]"}if(we(X)){var qo=Qn(X,On);return!("cause"in Error.prototype)&&"cause"in X&&!V.call(X,"cause")?"{ ["+String(X)+"] "+$.call(j.call("[cause]: "+On(X.cause),qo),", ")+" }":qo.length===0?"["+String(X)+"]":"{ ["+String(X)+"] "+$.call(qo,", ")+" }"}if(typeof X=="object"&&Rn){if(J&&typeof X[J]=="function"&&fe)return fe(X,{depth:Ei-nt});if(Rn!=="symbol"&&typeof X.inspect=="function")return X.inspect()}if(It(X)){var Ho=[];return s&&s.call(X,function(ns,Pi){Ho.push(On(Pi,X,!0)+" => "+On(ns,X))}),Ti("Map",n.call(X),Ho,Mr)}if(Sn(X)){var js=[];return h&&h.call(X,function(ns){js.push(On(ns,X))}),Ti("Set",c.call(X),js,Mr)}if(mr(X))return xi("WeakMap");if(pr(X))return xi("WeakSet");if(Cn(X))return xi("WeakRef");if(Te(X))return Ct(On(Number(X)));if(kt(X))return Ct(On(te.call(X)));if(Ze(X))return Ct(S.call(X));if(Ne(X))return Ct(On(String(X)));if(typeof window<"u"&&X===window)return"{ [object Window] }";if(typeof globalThis<"u"&&X===globalThis||typeof uS<"u"&&X===uS)return"{ [object globalThis] }";if(!ee(X)&&!ve(X)){var Ai=Qn(X,On),ts=ne?ne(X)===Object.prototype:X instanceof Object||X.constructor===Object,Dr=X instanceof Object?"":"null prototype",Ds=!ts&&pe&&Object(X)===X&&pe in X?x.call(xt(X),8,-1):Dr?"Object":"",ks=ts||typeof X.constructor!="function"?"":X.constructor.name?X.constructor.name+" ":"",Rt=ks+(Ds||Dr?"["+$.call(j.call([],Ds||[],Dr||[]),": ")+"] ":"");return Ai.length===0?Rt+"{}":Mr?Rt+"{"+Os(Ai,Mr)+"}":Rt+"{ "+$.call(Ai,", ")+" }"}return String(X)};function Z(G,X,Qe){var nt=Qe.quoteStyle||X,at=he[nt];return at+G+at}function le(G){return P.call(String(G),/"/g,"&quot;")}function me(G){return!pe||!(typeof G=="object"&&(pe in G||typeof G[pe]<"u"))}function Ie(G){return xt(G)==="[object Array]"&&me(G)}function ee(G){return xt(G)==="[object Date]"&&me(G)}function ve(G){return xt(G)==="[object RegExp]"&&me(G)}function we(G){return xt(G)==="[object Error]"&&me(G)}function Ne(G){return xt(G)==="[object String]"&&me(G)}function Te(G){return xt(G)==="[object Number]"&&me(G)}function Ze(G){return xt(G)==="[object Boolean]"&&me(G)}function mt(G){if(ae)return G&&typeof G=="object"&&G instanceof Symbol;if(typeof G=="symbol")return!0;if(!G||typeof G!="object"||!se)return!1;try{return se.call(G),!0}catch{}return!1}function kt(G){if(!G||typeof G!="object"||!te)return!1;try{return te.call(G),!0}catch{}return!1}var St=Object.prototype.hasOwnProperty||function(G){return G in this};function Ye(G,X){return St.call(G,X)}function xt(G){return A.call(G)}function _n(G){if(G.name)return G.name;var X=_.call(w.call(G),/^function\s*([\w$]+)/);return X?X[1]:null}function fn(G,X){if(G.indexOf)return G.indexOf(X);for(var Qe=0,nt=G.length;Qe<nt;Qe++)if(G[Qe]===X)return Qe;return-1}function It(G){if(!n||!G||typeof G!="object")return!1;try{n.call(G);try{c.call(G)}catch{return!0}return G instanceof Map}catch{}return!1}function mr(G){if(!f||!G||typeof G!="object")return!1;try{f.call(G,f);try{y.call(G,y)}catch{return!0}return G instanceof WeakMap}catch{}return!1}function Cn(G){if(!b||!G||typeof G!="object")return!1;try{return b.call(G),!0}catch{}return!1}function Sn(G){if(!c||!G||typeof G!="object")return!1;try{c.call(G);try{n.call(G)}catch{return!0}return G instanceof Set}catch{}return!1}function pr(G){if(!y||!G||typeof G!="object")return!1;try{y.call(G,y);try{f.call(G,f)}catch{return!0}return G instanceof WeakSet}catch{}return!1}function Or(G){return!G||typeof G!="object"?!1:typeof HTMLElement<"u"&&G instanceof HTMLElement?!0:typeof G.nodeName=="string"&&typeof G.getAttribute=="function"}function Vt(G,X){if(G.length>X.maxStringLength){var Qe=G.length-X.maxStringLength,nt="... "+Qe+" more character"+(Qe>1?"s":"");return Vt(x.call(G,0,X.maxStringLength),X)+nt}var at=ue[X.quoteStyle||"single"];at.lastIndex=0;var Le=P.call(P.call(G,at,"\\$1"),/[\x00-\x1f]/g,$n);return Z(Le,"single",X)}function $n(G){var X=G.charCodeAt(0),Qe={8:"b",9:"t",10:"n",12:"f",13:"r"}[X];return Qe?"\\"+Qe:"\\x"+(X<16?"0":"")+O.call(X.toString(16))}function Ct(G){return"Object("+G+")"}function xi(G){return G+" { ? }"}function Ti(G,X,Qe,nt){var at=nt?Os(Qe,nt):$.call(Qe,", ");return G+" ("+X+") {"+at+"}"}function Bo(G){for(var X=0;X<G.length;X++)if(fn(G[X],`
`)>=0)return!1;return!0}function da(G,X){var Qe;if(G.indent==="	")Qe="	";else if(typeof G.indent=="number"&&G.indent>0)Qe=$.call(Array(G.indent+1)," ");else return null;return{base:Qe,prev:$.call(Array(X+1),Qe)}}function Os(G,X){if(G.length===0)return"";var Qe=`
`+X.prev+X.base;return Qe+$.call(G,","+Qe)+`
`+X.prev}function Qn(G,X){var Qe=Ie(G),nt=[];if(Qe){nt.length=G.length;for(var at=0;at<G.length;at++)nt[at]=Ye(G,at)?X(G[at],G):""}var Le=typeof Q=="function"?Q(G):[],Rn;if(ae){Rn={};for(var es=0;es<Le.length;es++)Rn["$"+Le[es]]=Le[es]}for(var mn in G)Ye(G,mn)&&(Qe&&String(Number(mn))===mn&&mn<G.length||ae&&Rn["$"+mn]instanceof Symbol||(M.call(/[^\w$]/,mn)?nt.push(X(mn,G)+": "+X(G[mn],G)):nt.push(mn+": "+X(G[mn],G))));if(typeof Q=="function")for(var gr=0;gr<Le.length;gr++)V.call(G,Le[gr])&&nt.push("["+X(Le[gr])+"]: "+X(G[Le[gr]],G));return nt}return Mg}var jg,sE;function Jz(){if(sE)return jg;sE=1;var t=Mf(),e=Uo(),n=function(h,d,f){for(var p=h,y;(y=p.next)!=null;p=y)if(y.key===d)return p.next=y.next,f||(y.next=h.next,h.next=y),y},s=function(h,d){if(h){var f=n(h,d);return f&&f.value}},a=function(h,d,f){var p=n(h,d);p?p.value=f:h.next={key:d,next:h.next,value:f}},l=function(h,d){return h?!!n(h,d):!1},c=function(h,d){if(h)return n(h,d,!0)};return jg=function(){var d,f={assert:function(p){if(!f.has(p))throw new e("Side channel does not contain "+t(p))},delete:function(p){var y=d&&d.next,v=c(d,p);return v&&y&&y===v&&(d=void 0),!!v},get:function(p){return s(d,p)},has:function(p){return l(d,p)},set:function(p,y){d||(d={next:void 0}),a(d,p,y)}};return f},jg}var Dg,iE;function zO(){return iE||(iE=1,Dg=Object),Dg}var kg,aE;function Zz(){return aE||(aE=1,kg=Error),kg}var Ng,oE;function e8(){return oE||(oE=1,Ng=EvalError),Ng}var Lg,lE;function t8(){return lE||(lE=1,Lg=RangeError),Lg}var $g,uE;function n8(){return uE||(uE=1,$g=ReferenceError),$g}var Ig,cE;function r8(){return cE||(cE=1,Ig=SyntaxError),Ig}var Ug,hE;function s8(){return hE||(hE=1,Ug=URIError),Ug}var Bg,dE;function i8(){return dE||(dE=1,Bg=Math.abs),Bg}var zg,fE;function a8(){return fE||(fE=1,zg=Math.floor),zg}var qg,mE;function o8(){return mE||(mE=1,qg=Math.max),qg}var Hg,pE;function l8(){return pE||(pE=1,Hg=Math.min),Hg}var Vg,gE;function u8(){return gE||(gE=1,Vg=Math.pow),Vg}var Gg,yE;function c8(){return yE||(yE=1,Gg=Math.round),Gg}var Fg,vE;function h8(){return vE||(vE=1,Fg=Number.isNaN||function(e){return e!==e}),Fg}var Kg,bE;function d8(){if(bE)return Kg;bE=1;var t=h8();return Kg=function(n){return t(n)||n===0?n:n<0?-1:1},Kg}var Yg,wE;function f8(){return wE||(wE=1,Yg=Object.getOwnPropertyDescriptor),Yg}var Xg,_E;function qO(){if(_E)return Xg;_E=1;var t=f8();if(t)try{t([],"length")}catch{t=null}return Xg=t,Xg}var Wg,SE;function m8(){if(SE)return Wg;SE=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Wg=t,Wg}var Qg,xE;function p8(){return xE||(xE=1,Qg=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),s=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var a=42;e[n]=a;for(var l in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var c=Object.getOwnPropertySymbols(e);if(c.length!==1||c[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var h=Object.getOwnPropertyDescriptor(e,n);if(h.value!==a||h.enumerable!==!0)return!1}return!0}),Qg}var Jg,TE;function g8(){if(TE)return Jg;TE=1;var t=typeof Symbol<"u"&&Symbol,e=p8();return Jg=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Jg}var Zg,EE;function HO(){return EE||(EE=1,Zg=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Zg}var ey,AE;function VO(){if(AE)return ey;AE=1;var t=zO();return ey=t.getPrototypeOf||null,ey}var ty,PE;function y8(){if(PE)return ty;PE=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,s="[object Function]",a=function(d,f){for(var p=[],y=0;y<d.length;y+=1)p[y]=d[y];for(var v=0;v<f.length;v+=1)p[v+d.length]=f[v];return p},l=function(d,f){for(var p=[],y=f,v=0;y<d.length;y+=1,v+=1)p[v]=d[y];return p},c=function(h,d){for(var f="",p=0;p<h.length;p+=1)f+=h[p],p+1<h.length&&(f+=d);return f};return ty=function(d){var f=this;if(typeof f!="function"||e.apply(f)!==s)throw new TypeError(t+f);for(var p=l(arguments,1),y,v=function(){if(this instanceof y){var _=f.apply(this,a(p,arguments));return Object(_)===_?_:this}return f.apply(d,a(p,arguments))},b=n(0,f.length-p.length),S=[],A=0;A<b;A++)S[A]="$"+A;if(y=Function("binder","return function ("+c(S,",")+"){ return binder.apply(this,arguments); }")(v),f.prototype){var w=function(){};w.prototype=f.prototype,y.prototype=new w,w.prototype=null}return y},ty}var ny,CE;function jf(){if(CE)return ny;CE=1;var t=y8();return ny=Function.prototype.bind||t,ny}var ry,RE;function gb(){return RE||(RE=1,ry=Function.prototype.call),ry}var sy,OE;function GO(){return OE||(OE=1,sy=Function.prototype.apply),sy}var iy,ME;function v8(){return ME||(ME=1,iy=typeof Reflect<"u"&&Reflect&&Reflect.apply),iy}var ay,jE;function b8(){if(jE)return ay;jE=1;var t=jf(),e=GO(),n=gb(),s=v8();return ay=s||t.call(n,e),ay}var oy,DE;function FO(){if(DE)return oy;DE=1;var t=jf(),e=Uo(),n=gb(),s=b8();return oy=function(l){if(l.length<1||typeof l[0]!="function")throw new e("a function is required");return s(t,n,l)},oy}var ly,kE;function w8(){if(kE)return ly;kE=1;var t=FO(),e=qO(),n;try{n=[].__proto__===Array.prototype}catch(c){if(!c||typeof c!="object"||!("code"in c)||c.code!=="ERR_PROTO_ACCESS")throw c}var s=!!n&&e&&e(Object.prototype,"__proto__"),a=Object,l=a.getPrototypeOf;return ly=s&&typeof s.get=="function"?t([s.get]):typeof l=="function"?function(h){return l(h==null?h:a(h))}:!1,ly}var uy,NE;function _8(){if(NE)return uy;NE=1;var t=HO(),e=VO(),n=w8();return uy=t?function(a){return t(a)}:e?function(a){if(!a||typeof a!="object"&&typeof a!="function")throw new TypeError("getProto: not an object");return e(a)}:n?function(a){return n(a)}:null,uy}var cy,LE;function S8(){if(LE)return cy;LE=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=jf();return cy=n.call(t,e),cy}var hy,$E;function yb(){if($E)return hy;$E=1;var t,e=zO(),n=Zz(),s=e8(),a=t8(),l=n8(),c=r8(),h=Uo(),d=s8(),f=i8(),p=a8(),y=o8(),v=l8(),b=u8(),S=c8(),A=d8(),w=Function,_=function(ve){try{return w('"use strict"; return ('+ve+").constructor;")()}catch{}},x=qO(),P=m8(),O=function(){throw new h},R=x?function(){try{return arguments.callee,O}catch{try{return x(arguments,"callee").get}catch{return O}}}():O,M=g8()(),j=_8(),$=VO(),z=HO(),B=GO(),te=gb(),Q={},se=typeof Uint8Array>"u"||!j?t:j(Uint8Array),ae={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":M&&j?j([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":Q,"%AsyncGenerator%":Q,"%AsyncGeneratorFunction%":Q,"%AsyncIteratorPrototype%":Q,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":s,"%Float16Array%":typeof Float16Array>"u"?t:Float16Array,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":w,"%GeneratorFunction%":Q,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":M&&j?j(j([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!M||!j?t:j(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":x,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":a,"%ReferenceError%":l,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!M||!j?t:j(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":M&&j?j(""[Symbol.iterator]()):t,"%Symbol%":M?Symbol:t,"%SyntaxError%":c,"%ThrowTypeError%":R,"%TypedArray%":se,"%TypeError%":h,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":d,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":te,"%Function.prototype.apply%":B,"%Object.defineProperty%":P,"%Object.getPrototypeOf%":$,"%Math.abs%":f,"%Math.floor%":p,"%Math.max%":y,"%Math.min%":v,"%Math.pow%":b,"%Math.round%":S,"%Math.sign%":A,"%Reflect.getPrototypeOf%":z};if(j)try{null.error}catch(ve){var pe=j(j(ve));ae["%Error.prototype%"]=pe}var V=function ve(we){var Ne;if(we==="%AsyncFunction%")Ne=_("async function () {}");else if(we==="%GeneratorFunction%")Ne=_("function* () {}");else if(we==="%AsyncGeneratorFunction%")Ne=_("async function* () {}");else if(we==="%AsyncGenerator%"){var Te=ve("%AsyncGeneratorFunction%");Te&&(Ne=Te.prototype)}else if(we==="%AsyncIteratorPrototype%"){var Ze=ve("%AsyncGenerator%");Ze&&j&&(Ne=j(Ze.prototype))}return ae[we]=Ne,Ne},ne={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},K=jf(),fe=S8(),N=K.call(te,Array.prototype.concat),J=K.call(B,Array.prototype.splice),he=K.call(te,String.prototype.replace),ue=K.call(te,String.prototype.slice),Z=K.call(te,RegExp.prototype.exec),le=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,me=/\\(\\)?/g,Ie=function(we){var Ne=ue(we,0,1),Te=ue(we,-1);if(Ne==="%"&&Te!=="%")throw new c("invalid intrinsic syntax, expected closing `%`");if(Te==="%"&&Ne!=="%")throw new c("invalid intrinsic syntax, expected opening `%`");var Ze=[];return he(we,le,function(mt,kt,St,Ye){Ze[Ze.length]=St?he(Ye,me,"$1"):kt||mt}),Ze},ee=function(we,Ne){var Te=we,Ze;if(fe(ne,Te)&&(Ze=ne[Te],Te="%"+Ze[0]+"%"),fe(ae,Te)){var mt=ae[Te];if(mt===Q&&(mt=V(Te)),typeof mt>"u"&&!Ne)throw new h("intrinsic "+we+" exists, but is not available. Please file an issue!");return{alias:Ze,name:Te,value:mt}}throw new c("intrinsic "+we+" does not exist!")};return hy=function(we,Ne){if(typeof we!="string"||we.length===0)throw new h("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ne!="boolean")throw new h('"allowMissing" argument must be a boolean');if(Z(/^%?[^%]*%?$/,we)===null)throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Te=Ie(we),Ze=Te.length>0?Te[0]:"",mt=ee("%"+Ze+"%",Ne),kt=mt.name,St=mt.value,Ye=!1,xt=mt.alias;xt&&(Ze=xt[0],J(Te,N([0,1],xt)));for(var _n=1,fn=!0;_n<Te.length;_n+=1){var It=Te[_n],mr=ue(It,0,1),Cn=ue(It,-1);if((mr==='"'||mr==="'"||mr==="`"||Cn==='"'||Cn==="'"||Cn==="`")&&mr!==Cn)throw new c("property names with quotes must have matching quotes");if((It==="constructor"||!fn)&&(Ye=!0),Ze+="."+It,kt="%"+Ze+"%",fe(ae,kt))St=ae[kt];else if(St!=null){if(!(It in St)){if(!Ne)throw new h("base intrinsic for "+we+" exists, but the property is not available.");return}if(x&&_n+1>=Te.length){var Sn=x(St,It);fn=!!Sn,fn&&"get"in Sn&&!("originalValue"in Sn.get)?St=Sn.get:St=St[It]}else fn=fe(St,It),St=St[It];fn&&!Ye&&(ae[kt]=St)}}return St},hy}var dy,IE;function KO(){if(IE)return dy;IE=1;var t=yb(),e=FO(),n=e([t("%String.prototype.indexOf%")]);return dy=function(a,l){var c=t(a,!!l);return typeof c=="function"&&n(a,".prototype.")>-1?e([c]):c},dy}var fy,UE;function YO(){if(UE)return fy;UE=1;var t=yb(),e=KO(),n=Mf(),s=Uo(),a=t("%Map%",!0),l=e("Map.prototype.get",!0),c=e("Map.prototype.set",!0),h=e("Map.prototype.has",!0),d=e("Map.prototype.delete",!0),f=e("Map.prototype.size",!0);return fy=!!a&&function(){var y,v={assert:function(b){if(!v.has(b))throw new s("Side channel does not contain "+n(b))},delete:function(b){if(y){var S=d(y,b);return f(y)===0&&(y=void 0),S}return!1},get:function(b){if(y)return l(y,b)},has:function(b){return y?h(y,b):!1},set:function(b,S){y||(y=new a),c(y,b,S)}};return v},fy}var my,BE;function x8(){if(BE)return my;BE=1;var t=yb(),e=KO(),n=Mf(),s=YO(),a=Uo(),l=t("%WeakMap%",!0),c=e("WeakMap.prototype.get",!0),h=e("WeakMap.prototype.set",!0),d=e("WeakMap.prototype.has",!0),f=e("WeakMap.prototype.delete",!0);return my=l?function(){var y,v,b={assert:function(S){if(!b.has(S))throw new a("Side channel does not contain "+n(S))},delete:function(S){if(l&&S&&(typeof S=="object"||typeof S=="function")){if(y)return f(y,S)}else if(s&&v)return v.delete(S);return!1},get:function(S){return l&&S&&(typeof S=="object"||typeof S=="function")&&y?c(y,S):v&&v.get(S)},has:function(S){return l&&S&&(typeof S=="object"||typeof S=="function")&&y?d(y,S):!!v&&v.has(S)},set:function(S,A){l&&S&&(typeof S=="object"||typeof S=="function")?(y||(y=new l),h(y,S,A)):s&&(v||(v=s()),v.set(S,A))}};return b}:s,my}var py,zE;function T8(){if(zE)return py;zE=1;var t=Uo(),e=Mf(),n=Jz(),s=YO(),a=x8(),l=a||s||n;return py=function(){var h,d={assert:function(f){if(!d.has(f))throw new t("Side channel does not contain "+e(f))},delete:function(f){return!!h&&h.delete(f)},get:function(f){return h&&h.get(f)},has:function(f){return!!h&&h.has(f)},set:function(f,p){h||(h=l()),h.set(f,p)}};return d},py}var gy,qE;function vb(){if(qE)return gy;qE=1;var t=String.prototype.replace,e=/%20/g,n={RFC1738:"RFC1738",RFC3986:"RFC3986"};return gy={default:n.RFC3986,formatters:{RFC1738:function(s){return t.call(s,e,"+")},RFC3986:function(s){return String(s)}},RFC1738:n.RFC1738,RFC3986:n.RFC3986},gy}var yy,HE;function XO(){if(HE)return yy;HE=1;var t=vb(),e=Object.prototype.hasOwnProperty,n=Array.isArray,s=function(){for(var w=[],_=0;_<256;++_)w.push("%"+((_<16?"0":"")+_.toString(16)).toUpperCase());return w}(),a=function(_){for(;_.length>1;){var x=_.pop(),P=x.obj[x.prop];if(n(P)){for(var O=[],R=0;R<P.length;++R)typeof P[R]<"u"&&O.push(P[R]);x.obj[x.prop]=O}}},l=function(_,x){for(var P=x&&x.plainObjects?{__proto__:null}:{},O=0;O<_.length;++O)typeof _[O]<"u"&&(P[O]=_[O]);return P},c=function w(_,x,P){if(!x)return _;if(typeof x!="object"&&typeof x!="function"){if(n(_))_.push(x);else if(_&&typeof _=="object")(P&&(P.plainObjects||P.allowPrototypes)||!e.call(Object.prototype,x))&&(_[x]=!0);else return[_,x];return _}if(!_||typeof _!="object")return[_].concat(x);var O=_;return n(_)&&!n(x)&&(O=l(_,P)),n(_)&&n(x)?(x.forEach(function(R,M){if(e.call(_,M)){var j=_[M];j&&typeof j=="object"&&R&&typeof R=="object"?_[M]=w(j,R,P):_.push(R)}else _[M]=R}),_):Object.keys(x).reduce(function(R,M){var j=x[M];return e.call(R,M)?R[M]=w(R[M],j,P):R[M]=j,R},O)},h=function(_,x){return Object.keys(x).reduce(function(P,O){return P[O]=x[O],P},_)},d=function(w,_,x){var P=w.replace(/\+/g," ");if(x==="iso-8859-1")return P.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(P)}catch{return P}},f=1024,p=function(_,x,P,O,R){if(_.length===0)return _;var M=_;if(typeof _=="symbol"?M=Symbol.prototype.toString.call(_):typeof _!="string"&&(M=String(_)),P==="iso-8859-1")return escape(M).replace(/%u[0-9a-f]{4}/gi,function(se){return"%26%23"+parseInt(se.slice(2),16)+"%3B"});for(var j="",$=0;$<M.length;$+=f){for(var z=M.length>=f?M.slice($,$+f):M,B=[],te=0;te<z.length;++te){var Q=z.charCodeAt(te);if(Q===45||Q===46||Q===95||Q===126||Q>=48&&Q<=57||Q>=65&&Q<=90||Q>=97&&Q<=122||R===t.RFC1738&&(Q===40||Q===41)){B[B.length]=z.charAt(te);continue}if(Q<128){B[B.length]=s[Q];continue}if(Q<2048){B[B.length]=s[192|Q>>6]+s[128|Q&63];continue}if(Q<55296||Q>=57344){B[B.length]=s[224|Q>>12]+s[128|Q>>6&63]+s[128|Q&63];continue}te+=1,Q=65536+((Q&1023)<<10|z.charCodeAt(te)&1023),B[B.length]=s[240|Q>>18]+s[128|Q>>12&63]+s[128|Q>>6&63]+s[128|Q&63]}j+=B.join("")}return j},y=function(_){for(var x=[{obj:{o:_},prop:"o"}],P=[],O=0;O<x.length;++O)for(var R=x[O],M=R.obj[R.prop],j=Object.keys(M),$=0;$<j.length;++$){var z=j[$],B=M[z];typeof B=="object"&&B!==null&&P.indexOf(B)===-1&&(x.push({obj:M,prop:z}),P.push(B))}return a(x),_},v=function(_){return Object.prototype.toString.call(_)==="[object RegExp]"},b=function(_){return!_||typeof _!="object"?!1:!!(_.constructor&&_.constructor.isBuffer&&_.constructor.isBuffer(_))},S=function(_,x){return[].concat(_,x)},A=function(_,x){if(n(_)){for(var P=[],O=0;O<_.length;O+=1)P.push(x(_[O]));return P}return x(_)};return yy={arrayToObject:l,assign:h,combine:S,compact:y,decode:d,encode:p,isBuffer:b,isRegExp:v,maybeMap:A,merge:c},yy}var vy,VE;function E8(){if(VE)return vy;VE=1;var t=T8(),e=XO(),n=vb(),s=Object.prototype.hasOwnProperty,a={brackets:function(w){return w+"[]"},comma:"comma",indices:function(w,_){return w+"["+_+"]"},repeat:function(w){return w}},l=Array.isArray,c=Array.prototype.push,h=function(A,w){c.apply(A,l(w)?w:[w])},d=Date.prototype.toISOString,f=n.default,p={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:f,formatter:n.formatters[f],indices:!1,serializeDate:function(w){return d.call(w)},skipNulls:!1,strictNullHandling:!1},y=function(w){return typeof w=="string"||typeof w=="number"||typeof w=="boolean"||typeof w=="symbol"||typeof w=="bigint"},v={},b=function A(w,_,x,P,O,R,M,j,$,z,B,te,Q,se,ae,pe,V,ne){for(var K=w,fe=ne,N=0,J=!1;(fe=fe.get(v))!==void 0&&!J;){var he=fe.get(w);if(N+=1,typeof he<"u"){if(he===N)throw new RangeError("Cyclic object value");J=!0}typeof fe.get(v)>"u"&&(N=0)}if(typeof z=="function"?K=z(_,K):K instanceof Date?K=Q(K):x==="comma"&&l(K)&&(K=e.maybeMap(K,function(kt){return kt instanceof Date?Q(kt):kt})),K===null){if(R)return $&&!pe?$(_,p.encoder,V,"key",se):_;K=""}if(y(K)||e.isBuffer(K)){if($){var ue=pe?_:$(_,p.encoder,V,"key",se);return[ae(ue)+"="+ae($(K,p.encoder,V,"value",se))]}return[ae(_)+"="+ae(String(K))]}var Z=[];if(typeof K>"u")return Z;var le;if(x==="comma"&&l(K))pe&&$&&(K=e.maybeMap(K,$)),le=[{value:K.length>0?K.join(",")||null:void 0}];else if(l(z))le=z;else{var me=Object.keys(K);le=B?me.sort(B):me}var Ie=j?String(_).replace(/\./g,"%2E"):String(_),ee=P&&l(K)&&K.length===1?Ie+"[]":Ie;if(O&&l(K)&&K.length===0)return ee+"[]";for(var ve=0;ve<le.length;++ve){var we=le[ve],Ne=typeof we=="object"&&we&&typeof we.value<"u"?we.value:K[we];if(!(M&&Ne===null)){var Te=te&&j?String(we).replace(/\./g,"%2E"):String(we),Ze=l(K)?typeof x=="function"?x(ee,Te):ee:ee+(te?"."+Te:"["+Te+"]");ne.set(w,N);var mt=t();mt.set(v,ne),h(Z,A(Ne,Ze,x,P,O,R,M,j,x==="comma"&&pe&&l(K)?null:$,z,B,te,Q,se,ae,pe,V,mt))}}return Z},S=function(w){if(!w)return p;if(typeof w.allowEmptyArrays<"u"&&typeof w.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof w.encodeDotInKeys<"u"&&typeof w.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(w.encoder!==null&&typeof w.encoder<"u"&&typeof w.encoder!="function")throw new TypeError("Encoder has to be a function.");var _=w.charset||p.charset;if(typeof w.charset<"u"&&w.charset!=="utf-8"&&w.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var x=n.default;if(typeof w.format<"u"){if(!s.call(n.formatters,w.format))throw new TypeError("Unknown format option provided.");x=w.format}var P=n.formatters[x],O=p.filter;(typeof w.filter=="function"||l(w.filter))&&(O=w.filter);var R;if(w.arrayFormat in a?R=w.arrayFormat:"indices"in w?R=w.indices?"indices":"repeat":R=p.arrayFormat,"commaRoundTrip"in w&&typeof w.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var M=typeof w.allowDots>"u"?w.encodeDotInKeys===!0?!0:p.allowDots:!!w.allowDots;return{addQueryPrefix:typeof w.addQueryPrefix=="boolean"?w.addQueryPrefix:p.addQueryPrefix,allowDots:M,allowEmptyArrays:typeof w.allowEmptyArrays=="boolean"?!!w.allowEmptyArrays:p.allowEmptyArrays,arrayFormat:R,charset:_,charsetSentinel:typeof w.charsetSentinel=="boolean"?w.charsetSentinel:p.charsetSentinel,commaRoundTrip:!!w.commaRoundTrip,delimiter:typeof w.delimiter>"u"?p.delimiter:w.delimiter,encode:typeof w.encode=="boolean"?w.encode:p.encode,encodeDotInKeys:typeof w.encodeDotInKeys=="boolean"?w.encodeDotInKeys:p.encodeDotInKeys,encoder:typeof w.encoder=="function"?w.encoder:p.encoder,encodeValuesOnly:typeof w.encodeValuesOnly=="boolean"?w.encodeValuesOnly:p.encodeValuesOnly,filter:O,format:x,formatter:P,serializeDate:typeof w.serializeDate=="function"?w.serializeDate:p.serializeDate,skipNulls:typeof w.skipNulls=="boolean"?w.skipNulls:p.skipNulls,sort:typeof w.sort=="function"?w.sort:null,strictNullHandling:typeof w.strictNullHandling=="boolean"?w.strictNullHandling:p.strictNullHandling}};return vy=function(A,w){var _=A,x=S(w),P,O;typeof x.filter=="function"?(O=x.filter,_=O("",_)):l(x.filter)&&(O=x.filter,P=O);var R=[];if(typeof _!="object"||_===null)return"";var M=a[x.arrayFormat],j=M==="comma"&&x.commaRoundTrip;P||(P=Object.keys(_)),x.sort&&P.sort(x.sort);for(var $=t(),z=0;z<P.length;++z){var B=P[z],te=_[B];x.skipNulls&&te===null||h(R,b(te,B,M,j,x.allowEmptyArrays,x.strictNullHandling,x.skipNulls,x.encodeDotInKeys,x.encode?x.encoder:null,x.filter,x.sort,x.allowDots,x.serializeDate,x.format,x.formatter,x.encodeValuesOnly,x.charset,$))}var Q=R.join(x.delimiter),se=x.addQueryPrefix===!0?"?":"";return x.charsetSentinel&&(x.charset==="iso-8859-1"?se+="utf8=%26%2310003%3B&":se+="utf8=%E2%9C%93&"),Q.length>0?se+Q:""},vy}var by,GE;function A8(){if(GE)return by;GE=1;var t=XO(),e=Object.prototype.hasOwnProperty,n=Array.isArray,s={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:t.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},a=function(v){return v.replace(/&#(\d+);/g,function(b,S){return String.fromCharCode(parseInt(S,10))})},l=function(v,b,S){if(v&&typeof v=="string"&&b.comma&&v.indexOf(",")>-1)return v.split(",");if(b.throwOnLimitExceeded&&S>=b.arrayLimit)throw new RangeError("Array limit exceeded. Only "+b.arrayLimit+" element"+(b.arrayLimit===1?"":"s")+" allowed in an array.");return v},c="utf8=%26%2310003%3B",h="utf8=%E2%9C%93",d=function(b,S){var A={__proto__:null},w=S.ignoreQueryPrefix?b.replace(/^\?/,""):b;w=w.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var _=S.parameterLimit===1/0?void 0:S.parameterLimit,x=w.split(S.delimiter,S.throwOnLimitExceeded?_+1:_);if(S.throwOnLimitExceeded&&x.length>_)throw new RangeError("Parameter limit exceeded. Only "+_+" parameter"+(_===1?"":"s")+" allowed.");var P=-1,O,R=S.charset;if(S.charsetSentinel)for(O=0;O<x.length;++O)x[O].indexOf("utf8=")===0&&(x[O]===h?R="utf-8":x[O]===c&&(R="iso-8859-1"),P=O,O=x.length);for(O=0;O<x.length;++O)if(O!==P){var M=x[O],j=M.indexOf("]="),$=j===-1?M.indexOf("="):j+1,z,B;$===-1?(z=S.decoder(M,s.decoder,R,"key"),B=S.strictNullHandling?null:""):(z=S.decoder(M.slice(0,$),s.decoder,R,"key"),B=t.maybeMap(l(M.slice($+1),S,n(A[z])?A[z].length:0),function(Q){return S.decoder(Q,s.decoder,R,"value")})),B&&S.interpretNumericEntities&&R==="iso-8859-1"&&(B=a(String(B))),M.indexOf("[]=")>-1&&(B=n(B)?[B]:B);var te=e.call(A,z);te&&S.duplicates==="combine"?A[z]=t.combine(A[z],B):(!te||S.duplicates==="last")&&(A[z]=B)}return A},f=function(v,b,S,A){var w=0;if(v.length>0&&v[v.length-1]==="[]"){var _=v.slice(0,-1).join("");w=Array.isArray(b)&&b[_]?b[_].length:0}for(var x=A?b:l(b,S,w),P=v.length-1;P>=0;--P){var O,R=v[P];if(R==="[]"&&S.parseArrays)O=S.allowEmptyArrays&&(x===""||S.strictNullHandling&&x===null)?[]:t.combine([],x);else{O=S.plainObjects?{__proto__:null}:{};var M=R.charAt(0)==="["&&R.charAt(R.length-1)==="]"?R.slice(1,-1):R,j=S.decodeDotInKeys?M.replace(/%2E/g,"."):M,$=parseInt(j,10);!S.parseArrays&&j===""?O={0:x}:!isNaN($)&&R!==j&&String($)===j&&$>=0&&S.parseArrays&&$<=S.arrayLimit?(O=[],O[$]=x):j!=="__proto__"&&(O[j]=x)}x=O}return x},p=function(b,S,A,w){if(b){var _=A.allowDots?b.replace(/\.([^.[]+)/g,"[$1]"):b,x=/(\[[^[\]]*])/,P=/(\[[^[\]]*])/g,O=A.depth>0&&x.exec(_),R=O?_.slice(0,O.index):_,M=[];if(R){if(!A.plainObjects&&e.call(Object.prototype,R)&&!A.allowPrototypes)return;M.push(R)}for(var j=0;A.depth>0&&(O=P.exec(_))!==null&&j<A.depth;){if(j+=1,!A.plainObjects&&e.call(Object.prototype,O[1].slice(1,-1))&&!A.allowPrototypes)return;M.push(O[1])}if(O){if(A.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+A.depth+" and strictDepth is true");M.push("["+_.slice(O.index)+"]")}return f(M,S,A,w)}},y=function(b){if(!b)return s;if(typeof b.allowEmptyArrays<"u"&&typeof b.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof b.decodeDotInKeys<"u"&&typeof b.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(b.decoder!==null&&typeof b.decoder<"u"&&typeof b.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof b.charset<"u"&&b.charset!=="utf-8"&&b.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof b.throwOnLimitExceeded<"u"&&typeof b.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var S=typeof b.charset>"u"?s.charset:b.charset,A=typeof b.duplicates>"u"?s.duplicates:b.duplicates;if(A!=="combine"&&A!=="first"&&A!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var w=typeof b.allowDots>"u"?b.decodeDotInKeys===!0?!0:s.allowDots:!!b.allowDots;return{allowDots:w,allowEmptyArrays:typeof b.allowEmptyArrays=="boolean"?!!b.allowEmptyArrays:s.allowEmptyArrays,allowPrototypes:typeof b.allowPrototypes=="boolean"?b.allowPrototypes:s.allowPrototypes,allowSparse:typeof b.allowSparse=="boolean"?b.allowSparse:s.allowSparse,arrayLimit:typeof b.arrayLimit=="number"?b.arrayLimit:s.arrayLimit,charset:S,charsetSentinel:typeof b.charsetSentinel=="boolean"?b.charsetSentinel:s.charsetSentinel,comma:typeof b.comma=="boolean"?b.comma:s.comma,decodeDotInKeys:typeof b.decodeDotInKeys=="boolean"?b.decodeDotInKeys:s.decodeDotInKeys,decoder:typeof b.decoder=="function"?b.decoder:s.decoder,delimiter:typeof b.delimiter=="string"||t.isRegExp(b.delimiter)?b.delimiter:s.delimiter,depth:typeof b.depth=="number"||b.depth===!1?+b.depth:s.depth,duplicates:A,ignoreQueryPrefix:b.ignoreQueryPrefix===!0,interpretNumericEntities:typeof b.interpretNumericEntities=="boolean"?b.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:typeof b.parameterLimit=="number"?b.parameterLimit:s.parameterLimit,parseArrays:b.parseArrays!==!1,plainObjects:typeof b.plainObjects=="boolean"?b.plainObjects:s.plainObjects,strictDepth:typeof b.strictDepth=="boolean"?!!b.strictDepth:s.strictDepth,strictNullHandling:typeof b.strictNullHandling=="boolean"?b.strictNullHandling:s.strictNullHandling,throwOnLimitExceeded:typeof b.throwOnLimitExceeded=="boolean"?b.throwOnLimitExceeded:!1}};return by=function(v,b){var S=y(b);if(v===""||v===null||typeof v>"u")return S.plainObjects?{__proto__:null}:{};for(var A=typeof v=="string"?d(v,S):v,w=S.plainObjects?{__proto__:null}:{},_=Object.keys(A),x=0;x<_.length;++x){var P=_[x],O=p(P,A[P],S,typeof v=="string");w=t.merge(w,O,S)}return S.allowSparse===!0?w:t.compact(w)},by}var wy,FE;function P8(){if(FE)return wy;FE=1;var t=E8(),e=A8(),n=vb();return wy={formats:n,parse:e,stringify:t},wy}var C8=P8();const bb=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders","streaming"];function WO(t){return t&&typeof t=="object"&&bb.some(e=>Object.prototype.hasOwnProperty.call(t,e))}function Df(t,e){return C8.stringify(t,{serializeDate:n=>Math.floor(n.getTime()/1e3).toString(),arrayFormat:e=="v2"?"repeat":"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}const Lv=(()=>{const t={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{const n=e.replace(/["\n\r\u2028\u2029]/g,s=>t[s]);return s=>n.replace(/\{([\s\S]+?)\}/g,(a,l)=>{const c=s[l];return R8(c)?encodeURIComponent(c):""})}})();function R8(t){return["number","string","boolean"].includes(typeof t)}function O8(t){const e=t.match(/\{\w+\}/g);return e?e.map(n=>n.replace(/[{}]/g,"")):[]}function wb(t){if(!Array.isArray(t)||!t[0]||typeof t[0]!="object")return{};if(!WO(t[0]))return t.shift();const e=Object.keys(t[0]),n=e.filter(s=>bb.includes(s));return n.length>0&&n.length!==e.length&&cf(`Options found in arguments (${n.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function QO(t){const e={host:null,headers:{},settings:{},streaming:!1};if(t.length>0){const n=t[t.length-1];if(typeof n=="string")e.authenticator=$v(t.pop());else if(WO(n)){const s=Object.assign({},t.pop()),a=Object.keys(s).filter(l=>!bb.includes(l));if(a.length&&cf(`Invalid options found (${a.join(", ")}); ignoring.`),s.apiKey&&(e.authenticator=$v(s.apiKey)),s.idempotencyKey&&(e.headers["Idempotency-Key"]=s.idempotencyKey),s.stripeAccount&&(e.headers["Stripe-Account"]=s.stripeAccount),s.stripeContext){if(e.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");e.headers["Stripe-Context"]=s.stripeContext}if(s.apiVersion&&(e.headers["Stripe-Version"]=s.apiVersion),Number.isInteger(s.maxNetworkRetries)&&(e.settings.maxNetworkRetries=s.maxNetworkRetries),Number.isInteger(s.timeout)&&(e.settings.timeout=s.timeout),s.host&&(e.host=s.host),s.authenticator){if(s.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof s.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");e.authenticator=s.authenticator}s.additionalHeaders&&(e.headers=s.additionalHeaders),s.streaming&&(e.streaming=!0)}}return e}function M8(t){const e=this,n=Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(...s){e.apply(this,s)};return Object.assign(n,e),n.prototype=Object.create(e.prototype),Object.assign(n.prototype,t),n}function _y(t){if(typeof t!="object")throw new Error("Argument must be an object");return Object.keys(t).reduce((e,n)=>(t[n]!=null&&(e[n]=t[n]),e),{})}function j8(t){return t&&typeof t=="object"?Object.keys(t).reduce((e,n)=>(e[D8(n)]=t[n],e),{}):t}function D8(t){return t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}function _b(t,e){return e?t.then(n=>{setTimeout(()=>{e(null,n)},0)},n=>{setTimeout(()=>{e(n,null)},0)}):t}function k8(t){return t==="OAuth"?"oauth":t[0].toLowerCase()+t.substring(1)}function cf(t){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${t}`):process.emitWarning(t,"Stripe")}function N8(t){const e=typeof t;return(e==="function"||e==="object")&&!!t}function L8(t){const e={},n=(s,a)=>{Object.entries(s).forEach(([l,c])=>{const h=a?`${a}[${l}]`:l;if(N8(c)){if(!(c instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(c,"data"))return n(c,h);e[h]=c}else e[h]=String(c)})};return n(t,null),e}function Sy(t,e,n){if(!Number.isInteger(e)){if(n!==void 0)return n;throw new Error(`${t} must be an integer`)}return e}function $8(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}function $v(t){const e=n=>(n.headers.Authorization="Bearer "+t,Promise.resolve());return e._apiKey=t,e}function I8(t,e){return this[t]instanceof Date?Math.floor(this[t].getTime()/1e3).toString():e}function U8(t){return JSON.stringify(t,I8)}function Sb(t){return t&&t.startsWith("/v2")?"v2":"v1"}function Iv(t){return Array.isArray(t)?t.join(", "):String(t)}function B8(t){const e=Array.isArray(t)?t[0]:t;return Number(e)}function z8(t){return Object.entries(t).map(([e,n])=>[e,Iv(n)])}class hr{getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,n,s,a,l,c,h,d){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){const e=new TypeError(hr.TIMEOUT_ERROR_CODE);return e.code=hr.TIMEOUT_ERROR_CODE,e}}hr.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];hr.TIMEOUT_ERROR_CODE="ETIMEDOUT";class JO{constructor(e,n){this._statusCode=e,this._headers=n}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}}class hf extends hr{constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=hf.makeFetchWithAbortTimeout(e):this._fetchFn=hf.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(n,s,a)=>{let l;const c=new Promise((d,f)=>{l=setTimeout(()=>{l=null,f(hr.makeTimeoutError())},a)}),h=e(n,s);return Promise.race([h,c]).finally(()=>{l&&clearTimeout(l)})}}static makeFetchWithAbortTimeout(e){return async(n,s,a)=>{const l=new AbortController;let c=setTimeout(()=>{c=null,l.abort(hr.makeTimeoutError())},a);try{return await e(n,Object.assign(Object.assign({},s),{signal:l.signal}))}catch(h){throw h.name==="AbortError"?hr.makeTimeoutError():h}finally{c&&clearTimeout(c)}}}getClientName(){return"fetch"}async makeRequest(e,n,s,a,l,c,h,d){const f=h==="http",p=new URL(s,`${f?"http":"https"}://${e}`);p.port=n;const y=a=="POST"||a=="PUT"||a=="PATCH",v=c||(y?"":void 0),b=await this._fetchFn(p.toString(),{method:a,headers:z8(l),body:typeof v=="object"?JSON.stringify(v):v},d);return new xb(b)}}class xb extends JO{constructor(e){super(e.status,xb._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){const n={};for(const s of e){if(!Array.isArray(s)||s.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");n[s[0]]=s[1]}return n}}class ZO{computeHMACSignature(e,n){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,n){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(e){throw new Error("computeSHA256 not implemented.")}}class e2 extends Error{}class q8 extends ZO{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,n){throw new e2("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,n){const s=new TextEncoder,a=await this.subtleCrypto.importKey("raw",s.encode(n),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),l=await this.subtleCrypto.sign("hmac",a,s.encode(e)),c=new Uint8Array(l),h=new Array(c.length);for(let d=0;d<c.length;d++)h[d]=Uv[c[d]];return h.join("")}async computeSHA256Async(e){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",e))}}const Uv=new Array(256);for(let t=0;t<Uv.length;t++)Uv[t]=t.toString(16).padStart(2,"0");class H8{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})}secureCompare(e,n){if(e.length!==n.length)return!1;const s=e.length;let a=0;for(let l=0;l<s;++l)a|=e.charCodeAt(l)^n.charCodeAt(l);return a===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new hf(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new q8(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}}class V8 extends Event{constructor(e,n){super(e),this.data=n}}class G8{constructor(){this.eventTarget=new EventTarget,this.listenerMapping=new Map}on(e,n){const s=a=>{n(a.data)};return this.listenerMapping.set(n,s),this.eventTarget.addEventListener(e,s)}removeListener(e,n){const s=this.listenerMapping.get(n);return this.listenerMapping.delete(n),this.eventTarget.removeEventListener(e,s)}once(e,n){const s=a=>{n(a.data)};return this.listenerMapping.set(n,s),this.eventTarget.addEventListener(e,s,{once:!0})}emit(e,n){return this.eventTarget.dispatchEvent(new V8(e,n))}}class F8 extends H8{getUname(){return Promise.resolve(null)}createEmitter(){return new G8}tryBufferData(e){if(e.file.data instanceof ReadableStream)throw new Error("Uploading a file as a stream is not supported in non-Node environments. Please open or upvote an issue at github.com/stripe/stripe-node if you use this, detailing your use-case.");return Promise.resolve(e)}createNodeHttpClient(){throw new Error("Stripe: `createNodeHttpClient()` is not available in non-Node environments. Please use `createFetchHttpClient()` instead.")}createDefaultHttpClient(){return super.createFetchHttpClient()}createNodeCryptoProvider(){throw new Error("Stripe: `createNodeCryptoProvider()` is not available in non-Node environments. Please use `createSubtleCryptoProvider()` instead.")}createDefaultCryptoProvider(){return this.createSubtleCryptoProvider()}}const kf=t=>{switch(t.type){case"card_error":return new n2(t);case"invalid_request_error":return new Tb(t);case"api_error":return new Eb(t);case"authentication_error":return new Ab(t);case"rate_limit_error":return new Pb(t);case"idempotency_error":return new i2(t);case"invalid_grant":return new a2(t);default:return new o2(t)}},t2=t=>{switch(t.type){case"temporary_session_expired":return new l2(t)}switch(t.code){case"invalid_fields":return new Tb(t)}return kf(t)};class wn extends Error{constructor(e={},n=null){var s;super(e.message),this.type=n||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=(s=e.message)!==null&&s!==void 0?s:"",this.userMessage=e.user_message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}}wn.generate=kf;class n2 extends wn{constructor(e={}){super(e,"StripeCardError")}}class Tb extends wn{constructor(e={}){super(e,"StripeInvalidRequestError")}}class Eb extends wn{constructor(e={}){super(e,"StripeAPIError")}}class Ab extends wn{constructor(e={}){super(e,"StripeAuthenticationError")}}class r2 extends wn{constructor(e={}){super(e,"StripePermissionError")}}class Pb extends wn{constructor(e={}){super(e,"StripeRateLimitError")}}class s2 extends wn{constructor(e={}){super(e,"StripeConnectionError")}}class hi extends wn{constructor(e,n,s={}){super(s,"StripeSignatureVerificationError"),this.header=e,this.payload=n}}class i2 extends wn{constructor(e={}){super(e,"StripeIdempotencyError")}}class a2 extends wn{constructor(e={}){super(e,"StripeInvalidGrantError")}}class o2 extends wn{constructor(e={}){super(e,"StripeUnknownError")}}class l2 extends wn{constructor(e={}){super(e,"TemporarySessionExpiredError")}}const KE=Object.freeze(Object.defineProperty({__proto__:null,StripeAPIError:Eb,StripeAuthenticationError:Ab,StripeCardError:n2,StripeConnectionError:s2,StripeError:wn,StripeIdempotencyError:i2,StripeInvalidGrantError:a2,StripeInvalidRequestError:Tb,StripePermissionError:r2,StripeRateLimitError:Pb,StripeSignatureVerificationError:hi,StripeUnknownError:o2,TemporarySessionExpiredError:l2,generateV1Error:kf,generateV2Error:t2},Symbol.toStringTag,{value:"Module"})),K8=60;class Nu{constructor(e,n){this._stripe=e,this._maxBufferedRequestMetric=n}_addHeadersDirectlyToObject(e,n){e.requestId=n["request-id"],e.stripeAccount=e.stripeAccount||n["stripe-account"],e.apiVersion=e.apiVersion||n["stripe-version"],e.idempotencyKey=e.idempotencyKey||n["idempotency-key"]}_makeResponseEvent(e,n,s){const a=Date.now(),l=a-e.request_start_time;return _y({api_version:s["stripe-version"],account:s["stripe-account"],idempotency_key:s["idempotency-key"],method:e.method,path:e.path,status:n,request_id:this._getRequestId(s),elapsed:l,request_start_time:e.request_start_time,request_end_time:a})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,n,s){return a=>{const l=a.getHeaders(),c=()=>{const d=this._makeResponseEvent(e,a.getStatusCode(),l);this._stripe._emitter.emit("response",d),this._recordRequestMetrics(this._getRequestId(l),d.elapsed,n)},h=a.toStream(c);return this._addHeadersDirectlyToObject(h,l),s(null,h)}}_jsonResponseHandler(e,n,s,a){return l=>{const c=l.getHeaders(),h=this._getRequestId(c),d=l.getStatusCode(),f=this._makeResponseEvent(e,d,c);this._stripe._emitter.emit("response",f),l.toJSON().then(p=>{if(p.error){let y;throw typeof p.error=="string"&&(p.error={type:p.error,message:p.error_description}),p.error.headers=c,p.error.statusCode=d,p.error.requestId=h,d===401?y=new Ab(p.error):d===403?y=new r2(p.error):d===429?y=new Pb(p.error):n==="v2"?y=t2(p.error):y=kf(p.error),y}return p},p=>{throw new Eb({message:"Invalid JSON received from the Stripe API",exception:p,requestId:c["request-id"]})}).then(p=>{this._recordRequestMetrics(h,f.elapsed,s);const y=l.getRawResponse();this._addHeadersDirectlyToObject(y,c),Object.defineProperty(p,"lastResponse",{enumerable:!1,writable:!1,value:y}),a(null,p)},p=>a(p,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,n,s,a){return a&&n===0&&hr.CONNECTION_CLOSED_ERROR_CODES.includes(a.code)?!0:n>=s?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,n=null){const s=this._stripe.getInitialNetworkRetryDelay(),a=this._stripe.getMaxNetworkRetryDelay();let l=Math.min(s*Math.pow(2,e-1),a);return l*=.5*(1+Math.random()),l=Math.max(s,l),Number.isInteger(n)&&n<=K8&&(l=Math.max(l,n)),l*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries!==void 0&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,n,s){const a=this._getMaxNetworkRetries(n),l=()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`;if(s==="v2"){if(e==="POST"||e==="DELETE")return l()}else if(s==="v1"&&e==="POST"&&a>0)return l();return null}_makeHeaders({contentType:e,contentLength:n,apiVersion:s,clientUserAgent:a,method:l,userSuppliedHeaders:c,userSuppliedSettings:h,stripeAccount:d,stripeContext:f,apiMode:p}){const y={Accept:"application/json","Content-Type":e,"User-Agent":this._getUserAgentString(p),"X-Stripe-Client-User-Agent":a,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":s,"Stripe-Account":d,"Stripe-Context":f,"Idempotency-Key":this._defaultIdempotencyKey(l,h,p)},v=l=="POST"||l=="PUT"||l=="PATCH";return(v||n)&&(v||cf(`${l} method had non-zero contentLength but no payload is expected for this verb`),y["Content-Length"]=n),Object.assign(_y(y),j8(c))}_getUserAgentString(e){const n=this._stripe.getConstant("PACKAGE_VERSION"),s=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${e} NodeBindings/${n} ${s}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){const e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,n,s){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)cf("Request metrics buffer is full, dropping telemetry message.");else{const a={request_id:e,request_duration_ms:n};s&&s.length>0&&(a.usage=s),this._stripe._prevRequestMetrics.push(a)}}_rawRequest(e,n,s,a){return new Promise((c,h)=>{let d;try{const b=e.toUpperCase();if(b!=="POST"&&s&&Object.keys(s).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");const S=[].slice.call([s,a]),A=wb(S),w=b==="POST"?Object.assign({},A):null,_=QO(S),x=_.headers,P=_.authenticator;d={requestMethod:b,requestPath:n,bodyData:w,queryData:{},authenticator:P,headers:x,host:_.host,streaming:!!_.streaming,settings:{},usage:["raw_request"]}}catch(b){h(b);return}function f(b,S){b?h(b):c(S)}const{headers:p,settings:y}=d,v=d.authenticator;this._request(d.requestMethod,d.host,n,d.bodyData,v,{headers:p,settings:y,streaming:d.streaming},d.usage,f)})}_request(e,n,s,a,l,c,h=[],d,f=null){var p;let y;l=(p=l??this._stripe._authenticator)!==null&&p!==void 0?p:null;const v=Sb(s),b=(w,_,x,P,O)=>setTimeout(w,this._getSleepTimeInMS(P,O),_,x,P+1),S=(w,_,x)=>{const P=c.settings&&c.settings.timeout&&Number.isInteger(c.settings.timeout)&&c.settings.timeout>=0?c.settings.timeout:this._stripe.getApiField("timeout"),O={host:n||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:s,method:e,headers:Object.assign({},_),body:y,protocol:this._stripe.getApiField("protocol")};l(O).then(()=>{const R=this._stripe.getApiField("httpClient").makeRequest(O.host,O.port,O.path,O.method,O.headers,O.body,O.protocol,P),M=Date.now(),j=_y({api_version:w,account:Iv(_["Stripe-Account"]),idempotency_key:Iv(_["Idempotency-Key"]),method:e,path:s,request_start_time:M}),$=x||0,z=this._getMaxNetworkRetries(c.settings||{});this._stripe._emitter.emit("request",j),R.then(B=>Nu._shouldRetry(B,$,z)?b(S,w,_,$,B8(B.getHeaders()["retry-after"])):c.streaming&&B.getStatusCode()<400?this._streamingResponseHandler(j,h,d)(B):this._jsonResponseHandler(j,v,h,d)(B)).catch(B=>{if(Nu._shouldRetry(null,$,z,B))return b(S,w,_,$,null);{const te=B.code&&B.code===hr.TIMEOUT_ERROR_CODE;return d(new s2({message:te?`Request aborted due to timeout being reached (${P}ms)`:Nu._generateConnectionErrorMessage($),detail:B}))}})}).catch(R=>{throw new wn({message:"Unable to authenticate the request",exception:R})})},A=(w,_)=>{if(w)return d(w);y=_,this._stripe.getClientUserAgent(x=>{const P=this._stripe.getApiField("version"),O=this._makeHeaders({contentType:v=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:y.length,apiVersion:P,clientUserAgent:x,method:e,userSuppliedHeaders:c.headers,userSuppliedSettings:c.settings,stripeAccount:v=="v2"?null:this._stripe.getApiField("stripeAccount"),stripeContext:v=="v2"?this._stripe.getApiField("stripeContext"):null,apiMode:v});S(P,O,0)})};if(f)f(e,a,c.headers,A);else{let w;v=="v2"?w=a?U8(a):"":w=Df(a||{},v),A(null,w)}}}class u2{constructor(e,n,s,a){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=n,this.spec=s,this.stripeResource=a}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");const n=c2(this.requestArgs);if(this.index<e.data.length){const s=n?e.data.length-1-this.index:this.index,a=e.data[s];return this.index+=1,{value:a,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);const s=await this.pagePromise;return this.iterate(s)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;const e=(async()=>{const n=await this._next();return this.promiseCache.currentPromise=null,n})();return this.promiseCache.currentPromise=e,e}}class Y8 extends u2{getNextPage(e){const n=c2(this.requestArgs),s=t6(e,n);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[n?"ending_before":"starting_after"]:s})}}class X8 extends u2{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}}class W8{constructor(e,n,s,a){this.currentPageIterator=(async()=>(await e).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await e).next_page_url||null)(),this.requestArgs=n,this.spec=s,this.stripeResource=a}async turnPage(){const e=await this.nextPageUrl;if(!e)return null;this.spec.fullPath=e;const n=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(n.next_page_url),this.currentPageIterator=Promise.resolve(n.data[Symbol.iterator]()),this.currentPageIterator}async next(){{const s=(await this.currentPageIterator).next();if(!s.done)return{done:!1,value:s.value}}const e=await this.turnPage();if(!e)return{done:!0,value:void 0};const n=e.next();return n.done?{done:!0,value:void 0}:{done:!1,value:n.value}}}const Q8=(t,e,n,s)=>{const a=Sb(n.fullPath||n.path);return a!=="v2"&&n.methodType==="search"?xy(new X8(s,e,n,t)):a!=="v2"&&n.methodType==="list"?xy(new Y8(s,e,n,t)):a==="v2"&&n.methodType==="list"?xy(new W8(s,e,n,t)):null},xy=t=>{const e=n6((...a)=>t.next(...a)),n=r6(e),s={autoPagingEach:e,autoPagingToArray:n,next:()=>t.next(),return:()=>({}),[J8()]:()=>s};return s};function J8(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function Z8(t){if(t.length<2)return null;const e=t[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}function e6(t){if(t.length===0)return;const e=t[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return function(s,a){const l=e(s);a(l)}}function t6(t,e){const n=e?0:t.data.length-1,s=t.data[n],a=s&&s.id;if(!a)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return a}function n6(t){return function(){const n=[].slice.call(arguments),s=e6(n),a=Z8(n);if(n.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${n}`);const l=s6(t,s);return _b(l,a)}}function r6(t){return function(n,s){const a=n&&n.limit;if(!a)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(a>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");const l=new Promise((c,h)=>{const d=[];t(f=>{if(d.push(f),d.length>=a)return!1}).then(()=>{c(d)}).catch(h)});return _b(l,s)}}function s6(t,e){return new Promise((n,s)=>{function a(l){if(l.done){n();return}const c=l.value;return new Promise(h=>{e(c,h)}).then(h=>h===!1?a({done:!0,value:void 0}):t().then(a))}t().then(a).catch(s)})}function c2(t){const e=[].slice.call(t);return!!wb(e).ending_before}function i6(t){if(t.path!==void 0&&t.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${t.path}) and a 'fullPath' (${t.fullPath}).`);return function(...e){const n=typeof e[e.length-1]=="function"&&e.pop();t.urlParams=O8(t.fullPath||this.createResourcePathWithSymbols(t.path||""));const s=_b(this._makeRequest(e,t,{}),n);return Object.assign(s,Q8(this,e,t,s)),s}}D.extend=M8;D.method=i6;D.MAX_BUFFERED_REQUEST_METRICS=100;function D(t,e){if(this._stripe=t,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=Lv(this.basePath||t.getApiField("basePath")),this.resourcePath=this.path,this.path=Lv(this.path),this.initialize(...arguments)}D.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(t,e){const n=[this.basePath(e),this.path(e)];if(typeof t=="function"){const s=t(e);s&&n.push(s)}else n.push(t);return this._joinUrlParts(n)},createResourcePathWithSymbols(t){return t?`/${this._joinUrlParts([this.resourcePath,t])}`:`/${this.resourcePath}`},_joinUrlParts(t){return t.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(t,e,n){var s;const a=(e.method||"GET").toUpperCase(),l=e.usage||[],c=e.urlParams||[],h=e.encode||(j=>j),d=!!e.fullPath,f=Lv(d?e.fullPath:e.path||""),p=d?e.fullPath:this.createResourcePathWithSymbols(e.path),y=[].slice.call(t),v=c.reduce((j,$)=>{const z=y.shift();if(typeof z!="string")throw new Error(`Stripe: Argument "${$}" must be a string, but got: ${z} (on API request to \`${a} ${p}\`)`);return j[$]=z,j},{}),b=wb(y),S=h(Object.assign({},b,n)),A=QO(y),w=A.host||e.host,_=!!e.streaming||!!A.streaming;if(y.filter(j=>j!=null).length)throw new Error(`Stripe: Unknown arguments (${y}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${a} \`${p}\`)`);const x=d?f(v):this.createFullPath(f,v),P=Object.assign(A.headers,e.headers);e.validator&&e.validator(S,{headers:P});const O=e.method==="GET"||e.method==="DELETE";return{requestMethod:a,requestPath:x,bodyData:O?null:S,queryData:O?S:{},authenticator:(s=A.authenticator)!==null&&s!==void 0?s:null,headers:P,host:w??null,streaming:_,settings:A.settings,usage:l}},_makeRequest(t,e,n){return new Promise((s,a)=>{var l;let c;try{c=this._getRequestOpts(t,e,n)}catch(v){a(v);return}function h(v,b){v?a(v):s(e.transformResponseData?e.transformResponseData(b):b)}const d=Object.keys(c.queryData).length===0,f=[c.requestPath,d?"":"?",Df(c.queryData,Sb(c.requestPath))].join(""),{headers:p,settings:y}=c;this._stripe._requestSender._request(c.requestMethod,c.host,f,c.bodyData,c.authenticator,{headers:p,settings:y,streaming:c.streaming},c.usage,h,(l=this.requestDataProcessor)===null||l===void 0?void 0:l.bind(this))})}};function a6(t){const e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(p,y,v,b,S,A){try{if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");this.signature.verifyHeader(p,y,v,b||e.DEFAULT_TOLERANCE,S,A)}catch(_){throw _ instanceof e2&&(_.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),_}return p instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(p)):JSON.parse(p)},async constructEventAsync(p,y,v,b,S,A){if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");return await this.signature.verifyHeaderAsync(p,y,v,b||e.DEFAULT_TOLERANCE,S,A),p instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(p)):JSON.parse(p)},generateTestHeaderString:function(p){const y=f(p),v=y.signature||y.cryptoProvider.computeHMACSignature(y.payloadString,y.secret);return y.generateHeaderString(v)},generateTestHeaderStringAsync:async function(p){const y=f(p),v=y.signature||await y.cryptoProvider.computeHMACSignatureAsync(y.payloadString,y.secret);return y.generateHeaderString(v)}},n={EXPECTED_SCHEME:"v1",verifyHeader(p,y,v,b,S,A){const{decodedHeader:w,decodedPayload:_,details:x,suspectPayloadType:P}=a(p,y,this.EXPECTED_SCHEME),O=/\s/.test(v);S=S||d();const R=S.computeHMACSignature(s(_,x),v);return l(_,w,x,R,b,P,O,A),!0},async verifyHeaderAsync(p,y,v,b,S,A){const{decodedHeader:w,decodedPayload:_,details:x,suspectPayloadType:P}=a(p,y,this.EXPECTED_SCHEME),O=/\s/.test(v);S=S||d();const R=await S.computeHMACSignatureAsync(s(_,x),v);return l(_,w,x,R,b,P,O,A)}};function s(p,y){return`${y.timestamp}.${p}`}function a(p,y,v){if(!p)throw new hi(y,p,{message:"No webhook payload was provided."});const b=typeof p!="string"&&!(p instanceof Uint8Array),S=new TextDecoder("utf8"),A=p instanceof Uint8Array?S.decode(p):p;if(Array.isArray(y))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(y==null||y=="")throw new hi(y,p,{message:"No stripe-signature header value was provided."});const w=y instanceof Uint8Array?S.decode(y):y,_=c(w,v);if(!_||_.timestamp===-1)throw new hi(w,A,{message:"Unable to extract timestamp and signatures from header"});if(!_.signatures.length)throw new hi(w,A,{message:"No signatures found with expected scheme"});return{decodedPayload:A,decodedHeader:w,details:_,suspectPayloadType:b}}function l(p,y,v,b,S,A,w,_){const x=!!v.signatures.filter(t.secureCompare.bind(t,b)).length,P=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,O=w?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!x)throw A?new hi(y,p,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+P+`
`+O}):new hi(y,p,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+P+`
`+O});const R=Math.floor((typeof _=="number"?_:Date.now())/1e3)-v.timestamp;if(S>0&&R>S)throw new hi(y,p,{message:"Timestamp outside the tolerance zone"});return!0}function c(p,y){return typeof p!="string"?null:p.split(",").reduce((v,b)=>{const S=b.split("=");return S[0]==="t"&&(v.timestamp=parseInt(S[1],10)),S[0]===y&&v.signatures.push(S[1]),v},{timestamp:-1,signatures:[]})}let h=null;function d(){return h||(h=t.createDefaultCryptoProvider()),h}function f(p){if(!p)throw new wn({message:"Options are required"});const y=Math.floor(p.timestamp)||Math.floor(Date.now()/1e3),v=p.scheme||n.EXPECTED_SCHEME,b=p.cryptoProvider||d(),S=`${y}.${p.payload}`,A=w=>`t=${y},${v}=${w}`;return Object.assign(Object.assign({},p),{timestamp:y,scheme:v,cryptoProvider:b,payloadString:S,generateHeaderString:A})}return e.signature=n,e}const o6="2025-06-30.basil";function l6(t,e){for(const n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;const s=n[0].toLowerCase()+n.substring(1),a=new e[n](t);this[s]=a}}function At(t,e){return function(n){return new l6(n,e)}}const Fi=D.method,u6=D.extend({retrieve:Fi({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:Fi({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:Fi({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:Fi({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:Fi({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:Fi({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:Fi({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),YE=D.method,c6=D.extend({retrieve:YE({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:YE({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})}),so=D.method,h6=D.extend({create:so({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:so({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:so({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:so({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:so({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:so({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})}),Ki=D.method,d6=D.extend({create:Ki({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:Ki({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:Ki({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:Ki({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:Ki({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:Ki({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:Ki({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),Fl=D.method,f6=D.extend({retrieve:Fl({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:Fl({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:Fl({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:Fl({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:Fl({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),Ty=D.method,m6=D.extend({create:Ty({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:Ty({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:Ty({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),Xh=D.method,p6=D.extend({create:Xh({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:Xh({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:Xh({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:Xh({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),Kl=D.method,g6=D.extend({deliverCard:Kl({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:Kl({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:Kl({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:Kl({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:Kl({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})}),Wh=D.method,y6=D.extend({create:Wh({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:Wh({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:Wh({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:Wh({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),Qh=D.method,v6=D.extend({create:Qh({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:Qh({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:Qh({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:Qh({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),Yl=D.method,b6=D.extend({create:Yl({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:Yl({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:Yl({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:Yl({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:Yl({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),w6=D.method,_6=D.extend({create:w6({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})}),S6=D.method,x6=D.extend({create:S6({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),T6=D.method,E6=D.extend({retrieve:T6({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})}),XE=D.method,A6=D.extend({retrieve:XE({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:XE({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})}),io=D.method,P6=D.extend({create:io({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:io({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:io({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:io({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:io({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:io({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})}),Ey=D.method,C6=D.extend({create:Ey({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:Ey({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:Ey({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),R6=D.method,O6=D.extend({fundCashBalance:R6({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),Ay=D.method,M6=D.extend({create:Ay({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:Ay({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:Ay({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),Xl=D.method,j6=D.extend({create:Xl({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:Xl({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:Xl({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:Xl({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:Xl({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),WE=D.method,D6=D.extend({retrieve:WE({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:WE({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),ai=D.method,k6=D.extend({create:ai({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:ai({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:ai({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:ai({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:ai({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:ai({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:ai({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:ai({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})}),Py=D.method,N6=D.extend({retrieve(...t){return Py({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:n=>this.addFetchRelatedObjectIfNeeded(n)}).apply(this,t)},list(...t){return Py({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:n=>Object.assign(Object.assign({},n),{data:n.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))})}).apply(this,t)},addFetchRelatedObjectIfNeeded(t){return!t.related_object||!t.related_object.url?t:Object.assign(Object.assign({},t),{fetchRelatedObject:()=>Py({method:"GET",fullPath:t.related_object.url}).apply(this,[{stripeAccount:t.context}])})}}),Jh=D.method,L6=D.extend({create:Jh({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:Jh({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:Jh({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:Jh({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})}),Yi=D.method,$6=D.extend({create:Yi({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:Yi({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:Yi({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:Yi({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:Yi({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:Yi({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:Yi({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),Cy=D.method,I6=D.extend({fail:Cy({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:Cy({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:Cy({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),Zh=D.method,U6=D.extend({create:Zh({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:Zh({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:Zh({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:Zh({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),Wl=D.method,B6=D.extend({create:Wl({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:Wl({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:Wl({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:Wl({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:Wl({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),z6=D.method,q6=D.extend({create:z6({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})}),H6=D.method,V6=D.extend({create:H6({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})}),G6=D.method,F6=D.extend({create:G6({method:"POST",fullPath:"/v2/billing/meter_event_session"})}),K6=D.method,Y6=D.extend({create:K6({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})}),X6=D.method,W6=D.extend({create:X6({method:"POST",fullPath:"/v1/billing/meter_events"})}),Q6=D.method,J6=D.extend({create:Q6({method:"POST",fullPath:"/v2/billing/meter_events"})}),Xi=D.method,Z6=D.extend({create:Xi({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:Xi({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:Xi({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:Xi({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:Xi({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:Xi({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:Xi({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})}),Ql=D.method,e5=D.extend({create:Ql({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:Ql({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:Ql({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:Ql({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:Ql({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),ed=D.method,t5=D.extend({update:ed({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:ed({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:ed({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:ed({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),td=D.method,n5=D.extend({create:td({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:td({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:td({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:td({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),nd=D.method,r5=D.extend({update:nd({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:nd({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:nd({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:nd({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),rd=D.method,s5=D.extend({create:rd({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:rd({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:rd({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:rd({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),Ry=D.method,i5=D.extend({activate:Ry({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:Ry({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:Ry({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})}),sd=D.method,a5=D.extend({create:sd({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:sd({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:sd({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:sd({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})}),QE=D.method,o5=D.extend({retrieve:QE({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:QE({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})}),JE=D.method,l5=D.extend({retrieve:JE({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:JE({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),Oy=D.method,u5=D.extend({presentPaymentMethod:Oy({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"}),succeedInputCollection:Oy({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/succeed_input_collection"}),timeoutInputCollection:Oy({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/timeout_input_collection"})}),Gn=D.method,c5=D.extend({create:Gn({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:Gn({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:Gn({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:Gn({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:Gn({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:Gn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),collectInputs:Gn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_inputs"}),collectPaymentMethod:Gn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_payment_method"}),confirmPaymentIntent:Gn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/confirm_payment_intent"}),processPaymentIntent:Gn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:Gn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:Gn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:Gn({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),h5=D.method,d5=D.extend({create:h5({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),ZE=D.method,f5=D.extend({retrieve:ZE({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:ZE({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),m5=D.method,p5=D.extend({create:m5({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),eA=D.method,g5=D.extend({retrieve:eA({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:eA({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),y5=D.method,v5=D.extend({expire:y5({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),id=D.method,b5=D.extend({create:id({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:id({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:id({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:id({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),My=D.method,w5=D.extend({create:My({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:My({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:My({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),tA=D.method,_5=D.extend({retrieve:tA({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:tA({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),jy=D.method,S5=D.extend({create:jy({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:jy({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:jy({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})}),nA=D.method,x5=D.extend({retrieve:nA({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:nA({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),ad=D.method,T5=D.extend({create:ad({method:"POST",fullPath:"/v1/apps/secrets"}),list:ad({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:ad({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:ad({method:"GET",fullPath:"/v1/apps/secrets/find"})}),E5=D.method,A5=D.extend({create:E5({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),ao=D.method,P5=D.extend({create:ao({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:ao({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:ao({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:ao({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:ao({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:ao({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),rA=D.method,C5=D.extend({create:rA({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:rA({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),sA=D.method,R5=D.extend({retrieve:sA({method:"GET",fullPath:"/v1/tax/settings"}),update:sA({method:"POST",fullPath:"/v1/tax/settings"})}),iA=D.method,O5=D.extend({retrieve:iA({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:iA({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),Jl=D.method,M5=D.extend({create:Jl({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:Jl({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:Jl({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:Jl({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:Jl({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),Dy=D.method,j5=D.extend({retrieve:Dy({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:Dy({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:Dy({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),aA=D.method,D5=D.extend({retrieve:aA({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:aA({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),ky=D.method,k5=D.extend({createForceCapture:ky({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:ky({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:ky({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),oA=D.method,N5=D.extend({retrieve:oA({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:oA({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),Ny=D.method,L5=D.extend({retrieve:Ny({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:Ny({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:Ny({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),od=D.method,$5=D.extend({retrieve:od({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:od({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:od({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:od({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),lA=D.method,I5=D.extend({retrieve:lA({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:lA({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),ld=D.method,U5=D.extend({create:ld({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:ld({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:ld({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:ld({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),Zl=D.method,B5=D.extend({create:Zl({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:Zl({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:Zl({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:Zl({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:Zl({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),uA=D.method,z5=D.extend({retrieve:uA({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:uA({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),oo=D.method,q5=D.extend({create:oo({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:oo({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:oo({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:oo({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:oo({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:oo({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),jt=D.method,cA=D.extend({create:jt({method:"POST",fullPath:"/v1/accounts"}),retrieve(t,...e){return typeof t=="string"?jt({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[t,...e]):(t==null&&[].shift.apply([t,...e]),jt({method:"GET",fullPath:"/v1/account"}).apply(this,[t,...e]))},update:jt({method:"POST",fullPath:"/v1/accounts/{account}"}),list:jt({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:jt({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:jt({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:jt({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:jt({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:jt({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:jt({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:jt({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:jt({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:jt({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:jt({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:jt({method:"GET",fullPath:"/v1/account"}),retrieveCapability:jt({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:jt({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:jt({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:jt({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:jt({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:jt({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),H5=D.method,V5=D.extend({create:H5({method:"POST",fullPath:"/v1/account_links"})}),G5=D.method,F5=D.extend({create:G5({method:"POST",fullPath:"/v1/account_sessions"})}),ud=D.method,K5=D.extend({create:ud({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:ud({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:ud({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:ud({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),lo=D.method,Y5=D.extend({retrieve:lo({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:lo({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:lo({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:lo({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:lo({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:lo({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),X5=D.method,W5=D.extend({retrieve:X5({method:"GET",fullPath:"/v1/balance"})}),hA=D.method,Q5=D.extend({retrieve:hA({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:hA({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),uo=D.method,J5=D.extend({create:uo({method:"POST",fullPath:"/v1/charges"}),retrieve:uo({method:"GET",fullPath:"/v1/charges/{charge}"}),update:uo({method:"POST",fullPath:"/v1/charges/{charge}"}),list:uo({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:uo({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:uo({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),Z5=D.method,eq=D.extend({retrieve:Z5({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})}),dA=D.method,tq=D.extend({retrieve:dA({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:dA({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),eu=D.method,nq=D.extend({create:eu({method:"POST",fullPath:"/v1/coupons"}),retrieve:eu({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:eu({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:eu({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:eu({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),oi=D.method,rq=D.extend({create:oi({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:oi({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:oi({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:oi({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:oi({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:oi({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:oi({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:oi({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),sq=D.method,iq=D.extend({create:sq({method:"POST",fullPath:"/v1/customer_sessions"})}),ct=D.method,aq=D.extend({create:ct({method:"POST",fullPath:"/v1/customers"}),retrieve:ct({method:"GET",fullPath:"/v1/customers/{customer}"}),update:ct({method:"POST",fullPath:"/v1/customers/{customer}"}),list:ct({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:ct({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:ct({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:ct({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:ct({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:ct({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:ct({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:ct({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:ct({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:ct({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:ct({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:ct({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:ct({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:ct({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:ct({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:ct({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:ct({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:ct({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:ct({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:ct({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:ct({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:ct({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:ct({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:ct({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:ct({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),cd=D.method,oq=D.extend({retrieve:cd({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:cd({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:cd({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:cd({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),fA=D.method,lq=D.extend({create:fA({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(t,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:fA({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),mA=D.method,uq=D.extend({retrieve:mA({method:"GET",fullPath:"/v1/events/{id}"}),list:mA({method:"GET",fullPath:"/v1/events",methodType:"list"})}),pA=D.method,cq=D.extend({retrieve:pA({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:pA({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),hd=D.method,hq=D.extend({create:hd({method:"POST",fullPath:"/v1/file_links"}),retrieve:hd({method:"GET",fullPath:"/v1/file_links/{link}"}),update:hd({method:"POST",fullPath:"/v1/file_links/{link}"}),list:hd({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),dq=(t,e,n)=>{const s=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();n["Content-Type"]=`multipart/form-data; boundary=${s}`;const a=new TextEncoder;let l=new Uint8Array(0);const c=a.encode(`\r
`);function h(p){const y=l,v=p instanceof Uint8Array?p:new Uint8Array(a.encode(p));l=new Uint8Array(y.length+v.length+2),l.set(y),l.set(v,y.length),l.set(c,l.length-2)}function d(p){return`"${p.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}const f=L8(e);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;const y=f[p];if(h(`--${s}`),Object.prototype.hasOwnProperty.call(y,"data")){const v=y;h(`Content-Disposition: form-data; name=${d(p)}; filename=${d(v.name||"blob")}`),h(`Content-Type: ${v.type||"application/octet-stream"}`),h(""),h(v.data)}else h(`Content-Disposition: form-data; name=${d(p)}`),h(""),h(y)}return h(`--${s}--`),l};function fq(t,e,n,s){if(e=e||{},t!=="POST")return s(null,Df(e));this._stripe._platformFunctions.tryBufferData(e).then(a=>{const l=dq(t,a,n);return s(null,l)}).catch(a=>s(a,null))}const Ly=D.method,mq=D.extend({create:Ly({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:Ly({method:"GET",fullPath:"/v1/files/{file}"}),list:Ly({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:fq}),tu=D.method,pq=D.extend({create:tu({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:tu({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:tu({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:tu({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:tu({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),gA=D.method,gq=D.extend({retrieve:gA({method:"GET",fullPath:"/v1/invoice_payments/{invoice_payment}"}),list:gA({method:"GET",fullPath:"/v1/invoice_payments",methodType:"list"})}),dd=D.method,yq=D.extend({retrieve:dd({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:dd({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:dd({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:dd({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})}),nn=D.method,vq=D.extend({create:nn({method:"POST",fullPath:"/v1/invoices"}),retrieve:nn({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:nn({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:nn({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:nn({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:nn({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),attachPayment:nn({method:"POST",fullPath:"/v1/invoices/{invoice}/attach_payment"}),createPreview:nn({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:nn({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:nn({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),markUncollectible:nn({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:nn({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:nn({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),search:nn({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:nn({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:nn({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:nn({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:nn({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),bq=D.method,wq=D.extend({retrieve:bq({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),yA=D.method,$y="connect.stripe.com",_q=D.extend({basePath:"/",authorizeUrl(t,e){t=t||{},e=e||{};let n="oauth/authorize";return e.express&&(n=`express/${n}`),t.response_type||(t.response_type="code"),t.client_id||(t.client_id=this._stripe.getClientId()),t.scope||(t.scope="read_write"),`https://${$y}/${n}?${Df(t)}`},token:yA({method:"POST",path:"oauth/token",host:$y}),deauthorize(t,...e){return t.client_id||(t.client_id=this._stripe.getClientId()),yA({method:"POST",path:"oauth/deauthorize",host:$y}).apply(this,[t,...e])}}),Sr=D.method,Sq=D.extend({create:Sr({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:Sr({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:Sr({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:Sr({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:Sr({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:Sr({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:Sr({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:Sr({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:Sr({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),search:Sr({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:Sr({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),nu=D.method,xq=D.extend({create:nu({method:"POST",fullPath:"/v1/payment_links"}),retrieve:nu({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:nu({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:nu({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:nu({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),fd=D.method,Tq=D.extend({create:fd({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:fd({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:fd({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:fd({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),ru=D.method,Eq=D.extend({create:ru({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:ru({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:ru({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:ru({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:ru({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),co=D.method,Aq=D.extend({create:co({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:co({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:co({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:co({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:co({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:co({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),ho=D.method,Pq=D.extend({create:ho({method:"POST",fullPath:"/v1/payouts"}),retrieve:ho({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:ho({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:ho({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:ho({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:ho({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),su=D.method,Cq=D.extend({create:su({method:"POST",fullPath:"/v1/plans"}),retrieve:su({method:"GET",fullPath:"/v1/plans/{plan}"}),update:su({method:"POST",fullPath:"/v1/plans/{plan}"}),list:su({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:su({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),iu=D.method,Rq=D.extend({create:iu({method:"POST",fullPath:"/v1/prices"}),retrieve:iu({method:"GET",fullPath:"/v1/prices/{price}"}),update:iu({method:"POST",fullPath:"/v1/prices/{price}"}),list:iu({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:iu({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),Br=D.method,Oq=D.extend({create:Br({method:"POST",fullPath:"/v1/products"}),retrieve:Br({method:"GET",fullPath:"/v1/products/{id}"}),update:Br({method:"POST",fullPath:"/v1/products/{id}"}),list:Br({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:Br({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:Br({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:Br({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:Br({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:Br({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:Br({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),md=D.method,Mq=D.extend({create:md({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:md({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:md({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:md({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),zr=D.method,jq=D.extend({create:zr({method:"POST",fullPath:"/v1/quotes"}),retrieve:zr({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:zr({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:zr({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:zr({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:zr({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:zr({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:zr({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:zr({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:zr({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),au=D.method,Dq=D.extend({create:au({method:"POST",fullPath:"/v1/refunds"}),retrieve:au({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:au({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:au({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:au({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),Iy=D.method,kq=D.extend({retrieve:Iy({method:"GET",fullPath:"/v1/reviews/{review}"}),list:Iy({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:Iy({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),Nq=D.method,Lq=D.extend({list:Nq({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),Wi=D.method,$q=D.extend({create:Wi({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:Wi({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:Wi({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:Wi({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:Wi({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:Wi({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:Wi({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),pd=D.method,Iq=D.extend({create:pd({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:pd({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:pd({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:pd({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),ou=D.method,Uq=D.extend({create:ou({method:"POST",fullPath:"/v1/sources"}),retrieve:ou({method:"GET",fullPath:"/v1/sources/{source}"}),update:ou({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:ou({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:ou({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),lu=D.method,Bq=D.extend({create:lu({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:lu({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:lu({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:lu({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:lu({method:"DELETE",fullPath:"/v1/subscription_items/{item}"})}),fo=D.method,zq=D.extend({create:fo({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:fo({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:fo({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:fo({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:fo({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:fo({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),_s=D.method,qq=D.extend({create:_s({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:_s({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:_s({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:_s({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:_s({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:_s({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),migrate:_s({method:"POST",fullPath:"/v1/subscriptions/{subscription}/migrate"}),resume:_s({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:_s({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),vA=D.method,Hq=D.extend({retrieve:vA({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:vA({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),gd=D.method,Vq=D.extend({create:gd({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:gd({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:gd({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:gd({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})}),yd=D.method,Gq=D.extend({create:yd({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:yd({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:yd({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:yd({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),bA=D.method,Fq=D.extend({create:bA({method:"POST",fullPath:"/v1/tokens"}),retrieve:bA({method:"GET",fullPath:"/v1/tokens/{token}"})}),uu=D.method,Kq=D.extend({create:uu({method:"POST",fullPath:"/v1/topups"}),retrieve:uu({method:"GET",fullPath:"/v1/topups/{topup}"}),update:uu({method:"POST",fullPath:"/v1/topups/{topup}"}),list:uu({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:uu({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),li=D.method,Yq=D.extend({create:li({method:"POST",fullPath:"/v1/transfers"}),retrieve:li({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:li({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:li({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:li({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:li({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:li({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:li({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),cu=D.method,Xq=D.extend({create:cu({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:cu({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:cu({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:cu({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:cu({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),Wq=At("apps",{Secrets:T5}),Qq=At("billing",{Alerts:h6,CreditBalanceSummary:E6,CreditBalanceTransactions:A6,CreditGrants:P6,MeterEventAdjustments:q6,MeterEvents:W6,Meters:Z6}),Jq=At("billingPortal",{Configurations:v6,Sessions:A5}),Zq=At("checkout",{Sessions:P5}),eH=At("climate",{Orders:e5,Products:l5,Suppliers:O5}),tH=At("entitlements",{ActiveEntitlements:c6,Features:L6}),nH=At("financialConnections",{Accounts:u6,Sessions:C5,Transactions:N5}),rH=At("forwarding",{Requests:S5}),sH=At("identity",{VerificationReports:z5,VerificationSessions:q5}),iH=At("issuing",{Authorizations:f6,Cardholders:p6,Cards:y6,Disputes:j6,PersonalizationDesigns:a5,PhysicalBundles:o5,Tokens:j5,Transactions:L5}),aH=At("radar",{EarlyFraudWarnings:D6,ValueListItems:U5,ValueLists:B5}),oH=At("reporting",{ReportRuns:w5,ReportTypes:_5}),lH=At("sigma",{ScheduledQueryRuns:x5}),uH=At("tax",{Calculations:m6,Registrations:b5,Settings:R5,Transactions:$5}),cH=At("terminal",{Configurations:b6,ConnectionTokens:x6,Locations:B6,Readers:c5}),hH=At("testHelpers",{ConfirmationTokens:_6,Customers:O6,Refunds:v5,TestClocks:M5,Issuing:At("issuing",{Authorizations:d6,Cards:g6,PersonalizationDesigns:i5,Transactions:k5}),Terminal:At("terminal",{Readers:u5}),Treasury:At("treasury",{InboundTransfers:I6,OutboundPayments:t5,OutboundTransfers:r5,ReceivedCredits:d5,ReceivedDebits:p5})}),dH=At("treasury",{CreditReversals:C6,DebitReversals:M6,FinancialAccounts:$6,InboundTransfers:U6,OutboundPayments:n5,OutboundTransfers:s5,ReceivedCredits:f5,ReceivedDebits:g5,TransactionEntries:D5,Transactions:I5}),fH=At("v2",{Billing:At("billing",{MeterEventAdjustments:V6,MeterEventSession:F6,MeterEventStream:Y6,MeterEvents:J6}),Core:At("core",{EventDestinations:k6,Events:N6})}),vd=Object.freeze(Object.defineProperty({__proto__:null,Account:cA,AccountLinks:V5,AccountSessions:F5,Accounts:cA,ApplePayDomains:K5,ApplicationFees:Y5,Apps:Wq,Balance:W5,BalanceTransactions:Q5,Billing:Qq,BillingPortal:Jq,Charges:J5,Checkout:Zq,Climate:eH,ConfirmationTokens:eq,CountrySpecs:tq,Coupons:nq,CreditNotes:rq,CustomerSessions:iq,Customers:aq,Disputes:oq,Entitlements:tH,EphemeralKeys:lq,Events:uq,ExchangeRates:cq,FileLinks:hq,Files:mq,FinancialConnections:nH,Forwarding:rH,Identity:sH,InvoiceItems:pq,InvoicePayments:gq,InvoiceRenderingTemplates:yq,Invoices:vq,Issuing:iH,Mandates:wq,OAuth:_q,PaymentIntents:Sq,PaymentLinks:xq,PaymentMethodConfigurations:Tq,PaymentMethodDomains:Eq,PaymentMethods:Aq,Payouts:Pq,Plans:Cq,Prices:Rq,Products:Oq,PromotionCodes:Mq,Quotes:jq,Radar:aH,Refunds:Dq,Reporting:oH,Reviews:kq,SetupAttempts:Lq,SetupIntents:$q,ShippingRates:Iq,Sigma:lH,Sources:Uq,SubscriptionItems:Bq,SubscriptionSchedules:zq,Subscriptions:qq,Tax:uH,TaxCodes:Hq,TaxIds:Vq,TaxRates:Gq,Terminal:cH,TestHelpers:hH,Tokens:Fq,Topups:Kq,Transfers:Yq,Treasury:dH,V2:fH,WebhookEndpoints:Xq},Symbol.toStringTag,{value:"Module"})),wA="api.stripe.com",_A="443",SA="/v1/",xA=o6,TA=8e4,EA=5,AA=.5,mH=["name","version","url","partner_id"],PA=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],pH=t=>new Nu(t,D.MAX_BUFFERED_REQUEST_METRICS);function gH(t,e=pH){n.PACKAGE_VERSION="18.3.0",n.USER_AGENT=Object.assign({bindings_version:n.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},$8()),n.StripeResource=D,n.resources=vd,n.HttpClient=hr,n.HttpClientResponse=JO,n.CryptoProvider=ZO,n.webhooks=a6(t);function n(s,a={}){if(!(this instanceof n))return new n(s,a);const l=this._getPropsFromConfig(a);this._platformFunctions=t,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=n.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);const c=l.httpAgent||null;this._api={host:l.host||wA,port:l.port||_A,protocol:l.protocol||"https",basePath:SA,version:l.apiVersion||xA,timeout:Sy("timeout",l.timeout,TA),maxNetworkRetries:Sy("maxNetworkRetries",l.maxNetworkRetries,2),agent:c,httpClient:l.httpClient||(c?this._platformFunctions.createNodeHttpClient(c):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:l.stripeAccount||null,stripeContext:l.stripeContext||null};const h=l.typescript||!1;h!==n.USER_AGENT.typescript&&(n.USER_AGENT.typescript=h),l.appInfo&&this._setAppInfo(l.appInfo),this._prepResources(),this._setAuthenticator(s,l.authenticator),this.errors=KE,this.webhooks=n.webhooks,this._prevRequestMetrics=[],this._enableTelemetry=l.telemetry!==!1,this._requestSender=e(this),this.StripeResource=n.StripeResource}return n.errors=KE,n.createNodeHttpClient=t.createNodeHttpClient,n.createFetchHttpClient=t.createFetchHttpClient,n.createNodeCryptoProvider=t.createNodeCryptoProvider,n.createSubtleCryptoProvider=t.createSubtleCryptoProvider,n.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(s,a,l,c){return this._requestSender._rawRequest(s,a,l,c)},_setAuthenticator(s,a){if(s&&a)throw new Error("Can't specify both apiKey and authenticator");if(!s&&!a)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=s?$v(s):a},_setAppInfo(s){if(s&&typeof s!="object")throw new Error("AppInfo must be an object.");if(s&&!s.name)throw new Error("AppInfo.name is required");s=s||{},this._appInfo=mH.reduce((a,l)=>(typeof s[l]=="string"&&(a=a||{},a[l]=s[l]),a),{})},_setApiField(s,a){this._api[s]=a},getApiField(s){return this._api[s]},setClientId(s){this._clientId=s},getClientId(){return this._clientId},getConstant:s=>{switch(s){case"DEFAULT_HOST":return wA;case"DEFAULT_PORT":return _A;case"DEFAULT_BASE_PATH":return SA;case"DEFAULT_API_VERSION":return xA;case"DEFAULT_TIMEOUT":return TA;case"MAX_NETWORK_RETRY_DELAY_SEC":return EA;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return AA}return n[s]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(s,a,l){const c=Sy(s,a,l);this._setApiField(s,c)},getMaxNetworkRetryDelay(){return EA},getInitialNetworkRetryDelay(){return AA},getClientUserAgent(s){return this.getClientUserAgentSeeded(n.USER_AGENT,s)},getClientUserAgentSeeded(s,a){this._platformFunctions.getUname().then(l=>{var c;const h={};for(const f in s)Object.prototype.hasOwnProperty.call(s,f)&&(h[f]=encodeURIComponent((c=s[f])!==null&&c!==void 0?c:"null"));h.uname=encodeURIComponent(l||"UNKNOWN");const d=this.getApiField("httpClient");d&&(h.httplib=encodeURIComponent(d.getClientName())),this._appInfo&&(h.application=this._appInfo),a(JSON.stringify(h))})},getAppInfoAsString(){if(!this._appInfo)return"";let s=this._appInfo.name;return this._appInfo.version&&(s+=`/${this._appInfo.version}`),this._appInfo.url&&(s+=` (${this._appInfo.url})`),s},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(const s in vd)Object.prototype.hasOwnProperty.call(vd,s)&&(this[k8(s)]=new vd[s](this))},_getPropsFromConfig(s){if(!s)return{};const a=typeof s=="string";if(!(s===Object(s)&&!Array.isArray(s))&&!a)throw new Error("Config must either be an object or a string");if(a)return{apiVersion:s};if(Object.keys(s).filter(h=>!PA.includes(h)).length>0)throw new Error(`Config object may only contain the following: ${PA.join(", ")}`);return s},parseThinEvent(s,a,l,c,h,d){return this.webhooks.constructEvent(s,a,l,c,h,d)}},n}const h2=gH(new F8),Eo="PLACEHOLDER_KEY",yH="PLACEHOLDER_PRICE",vH="PLACEHOLDER_PRICE",Nf=!!Eo,Hd=Eo!=null&&Eo.startsWith("pk_live_")?"live":"test";Nf?console.log(`[Stripe]  Service initialized in ${Hd.toUpperCase()} mode at ${new Date().toISOString()}`):console.warn("[Stripe]  Service initialized in DISABLED mode - payment features unavailable");const CA=[];CA.length>0&&(console.warn(`[Stripe]  Missing configuration variables: ${CA.join(", ")}`),console.warn("[Stripe] Payment features will be disabled. Add these variables to your .env file to enable payments."));Nf&&new h2(Eo,{apiVersion:"2023-10-16"});const bd={MONTHLY:yH,YEARLY:vH};class wd extends Error{constructor(e){super(e),this.name="StripeConfigurationError"}}class Uy extends Error{constructor(e,n){super(e),this.statusCode=n,this.name="StripeEndpointError"}}function bH(t=!0){return console.log(`[Stripe]  Endpoint configuration:
  - Edge Function URL: Not configured
  - Supabase Project Ref: Not configured
  - Preference: ${t?"Edge Function":"Vercel Function"}`),console.log("[Stripe]  Edge Function not available, falling back to Vercel API route"),"/api/create-checkout-session"}async function Bv(t,e=1){if(!Nf)throw console.warn("[Stripe]  Cannot create checkout session - Stripe is not configured"),new wd("Stripe is not configured. Please add VITE_STRIPE_PUBLIC_KEY to your .env file.");const n=2,s=new Date().toISOString();if(console.log(`[Stripe]  [${s}] Requesting checkout session (attempt ${e}/${n})`,t),Hd==="live"&&t.priceId.includes("_test_")){const a="Environment Mismatch: A test price ID was used in live mode.";throw console.error(`[Stripe]  ${a}`),new wd(a)}if(Hd==="test"&&!t.priceId.includes("_test_")&&!t.priceId.includes("monthly_fallback")&&!t.priceId.includes("yearly_fallback")&&console.warn("[Stripe]  Environment Warning: A non-test price ID was used in test mode."),!t.priceId||!t.successUrl||!t.cancelUrl){const a=[];t.priceId||a.push("priceId"),t.successUrl||a.push("successUrl"),t.cancelUrl||a.push("cancelUrl");const l=`Missing required parameters: ${a.join(", ")}`;throw console.error(`[Stripe]  ${l}`),new wd(l)}try{const a=e===1,l=bH(a);console.log(`[Stripe]  Calling checkout endpoint: ${l}`);let c;try{const{data:{session:b}}=await ht.auth.getSession();c=b==null?void 0:b.access_token,c?console.log("[Stripe]  Auth token retrieved successfully"):console.warn("[Stripe]  No auth token available for request")}catch(b){console.error("[Stripe]  Failed to get auth token:",b)}const h={"Content-Type":"application/json"};c&&(h.Authorization=`Bearer ${c}`),h["X-Client-Timestamp"]=s,h["X-Client-Mode"]=Hd,h["X-Client-Attempt"]=String(e);const d=performance.now(),f=await fetch(l,{method:"POST",headers:h,body:JSON.stringify(t)}),p=performance.now(),y=Math.round(p-d);if(console.log(`[Stripe]  Checkout request completed in ${y}ms with status ${f.status}`),!f.ok){let b={error:`HTTP error ${f.status}`};try{b=await f.json()}catch{b={error:f.statusText||`HTTP error ${f.status}`}}const S=b.error||`HTTP error ${f.status}`;if(console.error(`[Stripe]  Checkout endpoint error: ${S}`),e<n&&a)return console.log("[Stripe]  Retrying with alternative endpoint..."),Bv(t,e+1);throw new Uy(S,f.status)}const v=await f.json();if(console.log(`[Stripe]  Checkout session created: ${v.id}`),!v.url){const b="Checkout session URL is missing from response";throw console.error(`[Stripe]  ${b}`),new Uy(b)}return{id:v.id,url:v.url}}catch(a){if(!(a instanceof wd)&&!(a instanceof Uy)){const l=a instanceof Error?a.message:"Unknown error";if(console.error(`[Stripe]  Checkout session creation failed: ${l}`,a),e<n)return console.log("[Stripe]  Error occurred, retrying with alternative endpoint..."),Bv(t,e+1);throw new Error(`Failed to create checkout session: ${l}`)}throw a}}function By(){return Nf?Eo:(console.warn("[Stripe]  Requested public key but Stripe is not configured"),"pk_missing_key")}const wH="fixed bottom-0 right-0 w-96 max-h-[80vh] bg-gray-900 text-white p-4 overflow-auto z-50 rounded-tl-lg shadow-xl border-l border-t border-gray-700",_d="mb-4 pb-4 border-b border-gray-700",hu="text-sm font-bold text-gray-400 uppercase tracking-wider mb-2",Ss="flex justify-between items-center mb-1",Sd="px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",_H="mt-2 p-2 bg-red-900/50 text-red-300 text-xs rounded",SH="mt-2 p-2 bg-green-900/50 text-green-300 text-xs rounded",xH="mt-4 p-2 bg-gray-800 text-xs font-mono rounded h-40 overflow-auto",RA=()=>{const{user:t}=n0(),e=Jr(),n=Fv(),[s,a]=k.useState(!1),[l,c]=k.useState(null),[h,d]=k.useState(null),[f,p]=k.useState([]),[y,v]=k.useState(null),[b,S]=k.useState(null),[A,w]=k.useState(!1),_=M=>{const j=new Date().toISOString().split("T")[1].split(".")[0];p($=>[`[${j}] ${M}`,...$])},x=()=>p([]);k.useEffect(()=>{(async()=>{try{_("Checking Stripe initialization...");const j=By();if(_(`Public key available: ${j?"YES":"NO"}`),!j){c(!1),_(" No Stripe public key found");return}const $=await Yz(j);d($),c(!!$),_(` Stripe ${$?"successfully loaded":"failed to load"}`)}catch(j){c(!1),_(` Error loading Stripe: ${j instanceof Error?j.message:String(j)}`)}})()},[]);const P=async M=>{v(null),S(null),w(!0);try{if(_(`Starting direct checkout test (${M})...`),!t){_(" No user logged in. Authentication required."),v("Authentication required. Please log in first.");return}if(!l||!h){_(" Stripe not loaded. Cannot proceed."),v("Stripe failed to load. Check console for details.");return}const j=M==="monthly"?bd.MONTHLY:bd.YEARLY;_(`Using price ID: ${j}`),_(`User ID: ${t.id}, Email: ${t.email}`),_("Creating checkout session...");const $=await Bv({priceId:j,successUrl:window.location.origin+"/conversations?checkout=success",cancelUrl:window.location.origin+"/pricing?checkout=canceled",customerId:t.id,customerEmail:t.email,metadata:{userId:t.id,debugMode:"true"}});_(` Session created: ${$.id}`),_(`Redirecting to: ${$.url}`),S(`Redirecting to Stripe checkout (${M} plan)...`);const{error:z}=await h.redirectToCheckout({sessionId:$.id});if(z)throw new Error(`Stripe redirect error: ${z.message}`)}catch(j){const $=j instanceof Error?j.message:String(j);_(` Error: ${$}`),v(`Checkout failed: ${$}`),console.error("Debug checkout error:",j)}finally{w(!1)}},O=M=>{_(`Testing URL parameter checkout (${M})...`),n(`/pricing?checkout=true&period=${M}`)},R=()=>a(!s);return T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:R,className:"fixed bottom-4 right-4 bg-gray-800 text-white p-2 rounded-full shadow-lg z-50 hover:bg-gray-700",title:"Toggle Debug Panel",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),s&&T.jsxs("div",{className:wH,children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h2",{className:"text-lg font-bold",children:"Checkout Debug Panel"}),T.jsx("button",{onClick:R,className:"text-gray-400 hover:text-white",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),T.jsxs("div",{className:_d,children:[T.jsx("h3",{className:hu,children:"Authentication Status"}),T.jsxs("div",{className:Ss,children:[T.jsx("span",{children:"User Logged In:"}),T.jsx("span",{className:t?"text-green-400":"text-red-400",children:t?"Yes":"No"})]}),t&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:Ss,children:[T.jsx("span",{children:"User ID:"}),T.jsx("span",{className:"text-xs",children:t.id})]}),T.jsxs("div",{className:Ss,children:[T.jsx("span",{children:"Email:"}),T.jsx("span",{className:"text-xs",children:t.email})]})]})]}),T.jsxs("div",{className:_d,children:[T.jsx("h3",{className:hu,children:"Stripe Status"}),T.jsxs("div",{className:Ss,children:[T.jsx("span",{children:"Stripe Loaded:"}),T.jsx("span",{className:l===null?"text-yellow-400":l?"text-green-400":"text-red-400",children:l===null?"Checking...":l?"Yes":"No"})]}),T.jsxs("div",{className:Ss,children:[T.jsx("span",{children:"Public Key Available:"}),T.jsx("span",{className:By()?"text-green-400":"text-red-400",children:By()?"Yes":"No"})]}),T.jsxs("div",{className:Ss,children:[T.jsx("span",{children:"Monthly Price ID:"}),T.jsx("span",{className:"text-xs",children:bd.MONTHLY})]}),T.jsxs("div",{className:Ss,children:[T.jsx("span",{children:"Yearly Price ID:"}),T.jsx("span",{className:"text-xs",children:bd.YEARLY})]})]}),T.jsxs("div",{className:_d,children:[T.jsx("h3",{className:hu,children:"Current Location"}),T.jsxs("div",{className:Ss,children:[T.jsx("span",{children:"Path:"}),T.jsx("span",{className:"text-xs",children:e.pathname})]}),T.jsxs("div",{className:Ss,children:[T.jsx("span",{children:"Search:"}),T.jsx("span",{className:"text-xs",children:e.search||"(none)"})]})]}),T.jsxs("div",{className:_d,children:[T.jsx("h3",{className:hu,children:"Test Actions"}),T.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[T.jsx("button",{onClick:()=>P("monthly"),disabled:A||!t||!l,className:`${Sd} ${A||!t||!l?"opacity-50 cursor-not-allowed":""}`,children:"Test Monthly Checkout"}),T.jsx("button",{onClick:()=>P("yearly"),disabled:A||!t||!l,className:`${Sd} ${A||!t||!l?"opacity-50 cursor-not-allowed":""}`,children:"Test Yearly Checkout"})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[T.jsx("button",{onClick:()=>O("monthly"),className:Sd,children:"Test URL Param (Monthly)"}),T.jsx("button",{onClick:()=>O("yearly"),className:Sd,children:"Test URL Param (Yearly)"})]}),y&&T.jsx("div",{className:_H,children:y}),b&&T.jsx("div",{className:SH,children:b})]}),T.jsxs("div",{children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("h3",{className:hu,children:"Debug Logs"}),T.jsx("button",{onClick:x,className:"text-xs text-gray-400 hover:text-white",children:"Clear"})]}),T.jsx("div",{className:xH,children:f.length===0?T.jsx("div",{className:"text-gray-500 italic",children:"No logs yet"}):f.map((M,j)=>T.jsx("div",{className:"mb-1",children:M},j))})]})]})]})};class OA extends Pe.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("[ErrorBoundary] Rendering error:",e)}render(){return this.state.hasError?T.jsx("div",{className:"flex items-center justify-center min-h-screen bg-blue-900 text-white",children:T.jsxs("div",{className:"text-center space-y-4",children:[T.jsx("h1",{className:"text-2xl font-bold",children:"Something went wrong."}),T.jsx("p",{children:"Please refresh the page to try again."}),T.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-400 text-blue-900 font-semibold px-4 py-2 rounded-lg",children:"Reload"})]})}):this.props.children}}function TH(){const t=new URLSearchParams(window.location.search),e=t.get("direct")==="1"||!1,n=t.get("skipAuth")==="1"||!0;console.log(`[App] init  DIRECT_RENDER=${e} | SKIP_AUTH=${n}`);const s=({children:l})=>T.jsx(EL,{children:l}),a=()=>{const l=Jr(),{flags:c,label:h}=k.useMemo(()=>{const d=[];return e&&d.push("DIRECT"),d.push("SKIP_AUTH"),{flags:d,label:d.join("  ")}},[e,n]);return c.length===0?null:T.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-red-600 text-white px-4 py-2 rounded-md shadow-lg text-xs",children:[h," ",T.jsx("br",{}),l.pathname]})};return e?T.jsx(OA,{children:T.jsx(s,{children:T.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-900 via-blue-700 to-blue-600",children:[T.jsx(a,{}),T.jsx(eE,{}),T.jsx(RA,{})]})})}):T.jsx(OA,{children:T.jsx(s,{children:T.jsxs(YD,{children:[T.jsx(a,{}),T.jsxs(TD,{children:[T.jsx(xd,{path:"/",element:T.jsx(eE,{})}),T.jsx(xd,{path:"/debug",element:T.jsxs("div",{className:"min-h-screen bg-slate-800 text-white p-4",children:[T.jsx("h1",{className:"text-2xl mb-4",children:"Debug Tools"}),T.jsx(RA,{})]})}),T.jsx(xd,{path:"*",element:T.jsx(SD,{to:"/",replace:!0})})]})]})})})}const d2="PLACEHOLDER_KEY",f2=!!d2;f2&&new Ke({apiKey:d2,dangerouslyAllowBrowser:!0});f2||console.warn("[OpenAI] No API key detected. Chat features will return placeholder responses. Provide VITE_OPENAI_API_KEY in your .env file to enable.");const Lu="PLACEHOLDER_KEY",m2=!!Lu,EH=Lu!=null&&Lu.startsWith("pk_live_")?"live":"test";m2?console.log(`[Stripe]  Service initialized in ${EH.toUpperCase()} mode`):console.warn("[Stripe]  Service initialized in DISABLED mode - payment features unavailable");const MA=[];MA.length>0&&(console.warn(`[Stripe]  Missing configuration variables: ${MA.join(", ")}`),console.warn("[Stripe] Payment features will be disabled. Add these variables to your .env file to enable."));m2&&new h2(Lu,{apiVersion:"2023-10-16"});console.log("[Services] Using safe service versions that gracefully handle missing API keys");(()=>{const t="sw-cleanup";if("serviceWorker"in navigator&&!document.getElementById(t)){const e=document.createElement("script");e.id=t,e.src="/service-worker-cleanup.js",document.head.prepend(e)}})();(()=>{const t="network-interceptor";if(!document.getElementById(t)){const n=document.createElement("script");n.id=t,n.src="/intercept.js",document.head.appendChild(n)}})();(()=>{const t="google-font-cinzel";if(!document.getElementById(t)){const e=document.createElement("link");e.id=t,e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&display=swap",document.head.appendChild(e)}})();const p2=document.getElementById("root");if(!p2)throw new Error("Root element with id 'root' not found");console.log("[App] Starting Bible Character Chat with safe service initialization");try{jj.createRoot(p2).render(T.jsx(k.StrictMode,{children:T.jsx(TH,{})}))}catch(t){console.error("[App] Failed to initialise React root:",t);const e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;width:100%;padding:12px;background:#b91c1c;color:#fff;font-family:monospace;z-index:9999",e.textContent=" Bible Character Chat failed to load. Check console for details.",document.body.appendChild(e)}
